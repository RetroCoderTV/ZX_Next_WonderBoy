# file opened: src/main.asm
   1  0000                  OPT --syntax=abfw     ; recommended sub-syntax of current sjasmplus
   2  0000                  ; "a" - multi-arguments for instructions require double-comma, i.e. `push hl,,de,,bc`
   3  0000                  ;     - this helps to avoid common pitfalls like `sub a,a` becoming 2x `sub a` in default syntax
   4  0000                  ;     - making it single "sub a from a" and enabling non-Zilog syntax `sub a,...`
   5  0000                  ; "b" - whole expression parentheses are legal for memory access only
   6  0000                  ;     - things like "ld b,(variable)" will become errors, as there's only ld b,immediate
   7  0000                  ;     - for regular expression parentheses you can disambiguate `ld b,+(1+2+3)` by unary +
   8  0000                  ; "f" - warn about fake instructions of sjasmplus (if used by accident)
   9  0000                  ;     - to use them intentionally, use comment to suppress warning: `ld hl,de ; fake`
  10  0000                  ;     - one extra warning from this class is Z80N extension `mul`, requiring explicit argument `mul de` or `mul d,e`
  11  0000                  ; "w" - report warnings as errors
  12  0000
  13  0000                  org 0x8000
  14  8000
  15  8000                  DEVICE ZXSPECTRUMNEXT
  16  8000              	CSPECTMAP main.map
  17  8000
  18  8000
  19  8000              start:
  20  8000              	; di
  21  8000 31 FE 7F     	ld sp,0x7FFE
  22  8003 ED 91 07 03  	nextreg $7,3 ;set Mhz mode (3=28mhz)
  23  8007 ED 91 15 0B  	nextreg $15,%00001011 ;sprites/layers system register
  24  800B CD D3 86     	call game_init
  25  800E C3 11 80     	jp main_loop
  26  8011
  27  8011              main_loop:
  28  8011 F3           	di
  29  8012 CD EC 86     	call game_update
  30  8015 CD 0B 87     	call game_draw
  31  8018 FB           	ei
  32  8019 C3 11 80     	jp main_loop
  33  801C
  34  801C
  35  801C
  36  801C
  37  801C              STACK_SIZE equ 20
  38  801C 00 00 00...  stack_bottom ds STACK_SIZE, 0
  39  8030 00           stack_top db 0
  40  8031
  41  8031              	include 'retrotools\constants.asm'
# file opened: src/retrotools/constants.asm
   1+ 8031              FALSE equ 0
   2+ 8031              TRUE equ 1
   3+ 8031
   4+ 8031              DEAD equ 0
   5+ 8031              ALIVE equ 1
   6+ 8031
   7+ 8031              NOT_VISIBLE equ 0
   8+ 8031              VISIBLE equ 1
   9+ 8031
  10+ 8031              NOT_ENABLED equ 0
  11+ 8031              ENABLED equ 1
  12+ 8031
  13+ 8031
  14+ 8031              ;DIRECTIONS:
  15+ 8031              LEFT equ 0
  16+ 8031              RIGHT equ 1
  17+ 8031              UP equ 2
  18+ 8031              DOWN equ 3
  19+ 8031
  20+ 8031
  21+ 8031              ;48k Screen
  22+ 8031              SCREEN_WIDTH_CELLS equ 32
  23+ 8031              SCREEN_HEIGHT_CELLS equ 24
  24+ 8031
  25+ 8031
  26+ 8031
  27+ 8031              ;Next Screen
  28+ 8031              GUTTER equ 32
  29+ 8031
  30+ 8031
  31+ 8031
  32+ 8031
  33+ 8031              END_OF_ARRAY equ 255
  34+ 8031
  35+ 8031
  36+ 8031
  37+ 8031
  38+ 8031
  39+ 8031
  40+ 8031
  41+ 8031
  42+ 8031
  43+ 8031
# file closed: src/retrotools/constants.asm
  42  8031              	include 'retrotools\tools.asm'
# file opened: src/retrotools/tools.asm
   1+ 8031              ;MACROS
   2+ 8031              	MACRO BREAKPOINT
   3+ 8031 ~            		DW $01DD
   4+ 8031              	ENDM
   5+ 8031
   6+ 8031              	MACRO CLIPTILES x1,y1,x2,y2
   7+ 8031 ~            		ld a,x1
   8+ 8031 ~            		nextreg $1b,a
   9+ 8031 ~            		ld a,y1
  10+ 8031 ~            		nextreg $1b,a
  11+ 8031 ~            		ld a,x2
  12+ 8031 ~            		nextreg $1b,a
  13+ 8031 ~            		ld a,y2
  14+ 8031 ~            		nextreg $1b,a
  15+ 8031 ~
  16+ 8031              	ENDM
  17+ 8031
  18+ 8031              	MACRO CLIP_LAYER2 x1,x2,y1,y2
  19+ 8031 ~            		ld a,x1
  20+ 8031 ~            		nextreg $18,a
  21+ 8031 ~            		ld a,x2
  22+ 8031 ~            		nextreg $18,a
  23+ 8031 ~            		ld a,y1
  24+ 8031 ~            		nextreg $18,a
  25+ 8031 ~            		ld a,y2
  26+ 8031 ~            		nextreg $18,a
  27+ 8031 ~
  28+ 8031              	ENDM
  29+ 8031
  30+ 8031
  31+ 8031              	MACRO SUB_HL_A
  32+ 8031 ~            	neg
  32+ 8031 ~              add hl,a
  33+ 8031              	ENDM
  34+ 8031
  35+ 8031
  36+ 8031              ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  37+ 8031              ;; Wait for n clock cycles
  38+ 8031              ;; Inputs: BC=n
  39+ 8031              ;; Outputs: none
  40+ 8031              ;; Destroys: A,BC
  41+ 8031              ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  42+ 8031              wait:
  43+ 8031 0B           	dec bc
  44+ 8032 78           	ld a,b
  45+ 8033 FE 00        	cp 0
  46+ 8035 C2 31 80     	jp nz, wait
  47+ 8038 C9           	ret
  48+ 8039
  49+ 8039
  50+ 8039
  51+ 8039              ;;;em00k wrote this;;;;
  52+ 8039              ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  53+ 8039              ;; Wait for vertical blank
  54+ 8039              ;; Inputs: B=frames delay count
  55+ 8039              ;; Outputs:
  56+ 8039              ;; Destroys:
  57+ 8039              ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  58+ 8039              WaitRasterLine:
  59+ 8039 CD 3F 80     	call RastererWait
  60+ 803C 10 FB        	djnz WaitRasterLine
  61+ 803E C9           	ret
  62+ 803F              RastererWait:
  63+ 803F C5           	push bc
  64+ 8040 1E 10        	ld e,16
  64+ 8042 3E 1F          ld a,$1f
  64+ 8044 01 3B 24       ld bc,$243b
  64+ 8047 ED 79          out (c),a
  64+ 8049 04             inc b
  65+ 804A              WaitForLinea:
  66+ 804A ED 78        	in a,(c)
  66+ 804C BB             cp e
  66+ 804D 20 FB          jr nz,WaitForLinea
  67+ 804F C1           	pop bc
  68+ 8050 C9           	ret
  69+ 8051
  70+ 8051
  71+ 8051
  72+ 8051
  73+ 8051
  74+ 8051
  75+ 8051
  76+ 8051
  77+ 8051
  78+ 8051
  79+ 8051
  80+ 8051              LAYER2_ACCESS_PORT	EQU 	$123B
  81+ 8051
  82+ 8051              		;----------------
  83+ 8051              		; Original code by Michael Ware adjustd to work with ZXB
  84+ 8051              		; Plot tile to layer 2 (needs to accept > 256 tiles)
  85+ 8051              		; in - hl = y/x tile coordinate (0-17, 0-31)
  86+ 8051              		; in - a = number of tile to display
  87+ 8051              		;----------------
  88+ 8051              PlotTile8:
  89+ 8051 ED 91 56 11  		nextreg $56,17
  90+ 8055
  91+ 8055 16 40        		ld d,64
  92+ 8057 5F           		ld e,a					; 11
  93+ 8058 ED 30        		mul de
  94+ 805A
  95+ 805A 3E C0        		ld a,%11000000 			; this points to $c000
  96+ 805C B2           		or d		 			; 8
  97+ 805D EB           		ex de,hl				; 4			; cannot avoid an ex (de now = yx)
  98+ 805E 67           		ld h,a					; 4
  99+ 805F 7B           		ld a,e
 100+ 8060 07           		rlca
 101+ 8061 07           		rlca
 102+ 8062 07           		rlca
 103+ 8063 5F           		ld e,a					; 4+4+4+4+4 = 20	; mul x,8
 104+ 8064 7A           		ld a,d
 105+ 8065 07           		rlca
 106+ 8066 07           		rlca
 107+ 8067 07           		rlca
 108+ 8068 57           		ld d,a					; 4+4+4+4+4 = 20	; mul y,8
 109+ 8069 E6 C0        		and 192
 110+ 806B F6 03        		or 3					; or 3 to keep layer on				; 8
 111+ 806D 01 3B 12     		ld bc,LAYER2_ACCESS_PORT
 112+ 8070 ED 79        		out (c),a      ; 21			; select bank
 113+ 8072
 114+ 8072 7A           		ld a,d
 115+ 8073 E6 3F        		and 63
 116+ 8075 57           		ld d,a					; clear top 2 bits of y (dest) (4+4+4 = 12)
 117+ 8076              		; T96 here
 118+ 8076 3E 08        		ld a,8					; 7
 119+ 8078              .plotTilesLoop2:
 120+ 8078 D5           		push de					; 11
 121+ 8079 ED A0        		ldi
 122+ 807B ED A0        		ldi
 123+ 807D ED A0        		ldi
 124+ 807F ED A0        		ldi
 125+ 8081 ED A0        		ldi
 126+ 8083 ED A0        		ldi
 127+ 8085 ED A0        		ldi
 128+ 8087 ED A0        		ldi					; 8 * 16 = 128
 129+ 8089
 130+ 8089 D1           		pop de					; 11
 131+ 808A 14           		inc d					; 4 add 256 for next line down
 132+ 808B 3D           		dec a					; 4
 133+ 808C 20 EA        		jr nz,.plotTilesLoop2			; 12/7
 134+ 808E
 135+ 808E ED 91 56 0E  		nextreg $56,14 ;$0e
 136+ 8092 C9           		ret
 137+ 8093
 138+ 8093
 139+ 8093
 140+ 8093
 141+ 8093
 142+ 8093
 143+ 8093              ; ;HL=mem address start yx
 144+ 8093              ; ;DE=message address
 145+ 8093              ; display_string:
 146+ 8093              ;     ld a,(de)
 147+ 8093              ;     cp 0
 148+ 8093              ;     ret z
 149+ 8093              ;     cp ' '
 150+ 8093              ;     jp nz,disp_char_next
 151+ 8093              ; 	inc a
 152+ 8093              ; disp_char_next:
 153+ 8093              ;     sub FONT_ASCII_OFFSET
 154+ 8093              ;     push de
 155+ 8093              ;     push hl
 156+ 8093              ;     call PlotTile8
 157+ 8093              ;     pop hl
 158+ 8093              ;     pop de
 159+ 8093
 160+ 8093              ;     inc de
 161+ 8093              ;     inc l
 162+ 8093              ;     jp display_string
 163+ 8093
 164+ 8093
 165+ 8093              ; display_numbers:
 166+ 8093              ;     ld c,-100
 167+ 8093              ;     call dispnums_add_offset
 168+ 8093              ;     ld c,-10
 169+ 8093              ;     call dispnums_add_offset
 170+ 8093              ;     ld c,-1
 171+ 8093              ; dispnums_add_offset:
 172+ 8093              ;     ld b,FONT_START
 173+ 8093              ; dispnums_inc:
 174+ 8093              ;     inc b
 175+ 8093              ;     add a,c
 176+ 8093              ;     jr c, dispnums_inc
 177+ 8093              ;     sub c ;actually adding (its holding minus number)
 178+ 8093              ;     push af
 179+ 8093              ;     ld a,b
 180+ 8093              ;     push hl
 181+ 8093              ;     call PlotTile8
 182+ 8093              ;     pop hl
 183+ 8093              ;     inc l
 184+ 8093              ;     pop af
 185+ 8093              ;     ret
 186+ 8093
 187+ 8093
 188+ 8093
 189+ 8093
# file closed: src/retrotools/tools.asm
  43  8093
  44  8093              	include 'player.asm'
# file opened: src/player.asm
   1+ 8093
   2+ 8093
   3+ 8093
   4+ 8093
   5+ 8093
   6+ 8093              PLAYER_SLOT equ 50
   7+ 8093
   8+ 8093              PLAYER_DEFAULT_ATTR3 equ %11000000
   9+ 8093
  10+ 8093              PLAYER_HEIGHT equ 32
  11+ 8093
  12+ 8093              SCROLL_MARKER_X equ 320/2
  13+ 8093
  14+ 8093              PLAYER_WALK_SPEED equ 1
  15+ 8093
  16+ 8093
  17+ 8093
  18+ 8093 00           player_world_x db 0 ;in cells
  19+ 8094 00           player_world_y db 0
  20+ 8095
  21+ 8095 30 00        px dw 48
  22+ 8097 00           py db 0
  23+ 8098 00           player_attr_2 db %00000000
  24+ 8099 C0           player_attr_3 db PLAYER_DEFAULT_ATTR3
  25+ 809A 20           player_attr_4 db %00100000
  26+ 809B
  27+ 809B
  28+ 809B              ;relative sprites:
  29+ 809B C1           headB_attr_3 db %11000001
  30+ 809C C2           legsA_attr_3 db %11000010
  31+ 809D C3           legsB_attr_3 db %11000011
  32+ 809E
  33+ 809E
  34+ 809E 00           player_animation_timer db 0
  35+ 809F              PLAYER_ANIMATION_DELAY equ 4
  36+ 809F
  37+ 809F
  38+ 809F              ;movement states:
  39+ 809F              IDLE equ 0x0
  40+ 809F              WALKING equ 0xA
  41+ 809F              JUMPING equ 0xB
  42+ 809F              ATTACKING equ 0xC
  43+ 809F              CLIMBING equ 0xD
  44+ 809F
  45+ 809F 0B           player_animation_state db JUMPING
  46+ 80A0 0B           player_animation_state_prev db JUMPING
  47+ 80A1
  48+ 80A1 00 00        vy dw 0
  49+ 80A3
  50+ 80A3              DOWN_FORCE equ 32
  51+ 80A3              UP_FORCE equ 64
  52+ 80A3
  53+ 80A3              MAX_DOWN_SPEED equ 7
  54+ 80A3              MAX_UP_SPEED equ 5
  55+ 80A3
  56+ 80A3
  57+ 80A3
  58+ 80A3 00           player_collided_solid db FALSE
  59+ 80A4
  60+ 80A4
  61+ 80A4
  62+ 80A4 01           player_walk_direction db RIGHT
  63+ 80A5 03           player_jump_direction db DOWN
  64+ 80A6 D0           player_jump_point db 208
  65+ 80A7              PLAYER_JUMP_HEIGHT equ 15
  66+ 80A7              PLAYER_JUMP_ATTR3 equ %11001001
  67+ 80A7 00           player_grounded db FALSE
  68+ 80A8
  69+ 80A8
  70+ 80A8              player_init:
  71+ 80A8 CD AD 80         call player_init_sprites
  72+ 80AB
  73+ 80AB C9               ret
  74+ 80AC
  75+ 80AC
  76+ 80AC              draw_debug_sprite:
  77+ 80AC
  78+ 80AC C9               ret
  79+ 80AD
  80+ 80AD              player_init_sprites:
  81+ 80AD 3E 32            ld a,PLAYER_SLOT
  82+ 80AF ED 92 34         nextreg $34,a
  83+ 80B2
  84+ 80B2                  ;Ax
  85+ 80B2                  ;xx
  86+ 80B2
  87+ 80B2                  ;attr 0
  88+ 80B2 3A 95 80         ld a,(px)
  89+ 80B5 ED 92 35         nextreg $35,a
  90+ 80B8
  91+ 80B8                  ;attr 1
  92+ 80B8 3A 97 80         ld a,(py)
  93+ 80BB ED 92 36         nextreg $36,a
  94+ 80BE
  95+ 80BE                  ;attr 2
  96+ 80BE 3A 98 80         ld a,(player_attr_2)
  97+ 80C1 47               ld b,a
  98+ 80C2 2A 95 80         ld hl,(px)
  99+ 80C5 7C               ld a,h
 100+ 80C6 B0               or b
 101+ 80C7 ED 92 37         nextreg $37,a
 102+ 80CA
 103+ 80CA                  ;attr 3
 104+ 80CA 3A 99 80         ld a,(player_attr_3)
 105+ 80CD ED 92 38         nextreg $38,a
 106+ 80D0
 107+ 80D0                  ;attr 4
 108+ 80D0 3A 9A 80         ld a,(player_attr_4)
 109+ 80D3 ED 92 39         nextreg $39,a
 110+ 80D6
 111+ 80D6                  ;relative sprites...
 112+ 80D6
 113+ 80D6                  ;r1:
 114+ 80D6                  ;AR
 115+ 80D6                  ;xx
 116+ 80D6
 117+ 80D6
 118+ 80D6 3E 33            ld a,PLAYER_SLOT+1
 119+ 80D8 ED 92 34         nextreg $34,a
 120+ 80DB
 121+ 80DB                  ;a0
 122+ 80DB 3E 10            ld a,16
 123+ 80DD ED 92 35         nextreg $35,a
 124+ 80E0
 125+ 80E0                  ;a1
 126+ 80E0 3E 00            ld a,0
 127+ 80E2 ED 92 36         nextreg $36,a
 128+ 80E5
 129+ 80E5                  ;a2
 130+ 80E5 3E 01            ld a,%00000001
 131+ 80E7 ED 92 37         nextreg $37,a
 132+ 80EA
 133+ 80EA                  ;a3
 134+ 80EA 3E C1            ld a,%11000001
 135+ 80EC ED 92 38         nextreg $38,a
 136+ 80EF
 137+ 80EF                  ;a4
 138+ 80EF 3E 41            ld a,%01000001
 139+ 80F1 ED 92 39         nextreg $39,a
 140+ 80F4
 141+ 80F4                  ;r2:
 142+ 80F4                  ;Ax
 143+ 80F4                  ;Rx
 144+ 80F4 3E 34            ld a,PLAYER_SLOT+2
 145+ 80F6 ED 92 34         nextreg $34,a
 146+ 80F9
 147+ 80F9                  ;a0
 148+ 80F9 3E 00            ld a,0
 149+ 80FB ED 92 35         nextreg $35,a
 150+ 80FE
 151+ 80FE                  ;a1
 152+ 80FE 3E 10            ld a,16
 153+ 8100 ED 92 36         nextreg $36,a
 154+ 8103
 155+ 8103                  ;a2
 156+ 8103 3E 01            ld a,%00000001
 157+ 8105 ED 92 37         nextreg $37,a
 158+ 8108
 159+ 8108                  ;a3
 160+ 8108 3A 9C 80         ld a,(legsA_attr_3)
 161+ 810B ED 92 38         nextreg $38,a
 162+ 810E
 163+ 810E                  ;a4
 164+ 810E 3E 41            ld a,%01000001
 165+ 8110 ED 92 39         nextreg $39,a
 166+ 8113
 167+ 8113                  ;r3:
 168+ 8113                  ;Ax
 169+ 8113                  ;xR
 170+ 8113
 171+ 8113 3E 35            ld a,PLAYER_SLOT+3
 172+ 8115 ED 92 34         nextreg $34,a
 173+ 8118
 174+ 8118                  ;a0
 175+ 8118 3E 10            ld a,16
 176+ 811A ED 92 35         nextreg $35,a
 177+ 811D
 178+ 811D                  ;a1
 179+ 811D 3E 10            ld a,16
 180+ 811F ED 92 36         nextreg $36,a
 181+ 8122
 182+ 8122                  ;a2
 183+ 8122 3E 01            ld a,%00000001
 184+ 8124 ED 92 37         nextreg $37,a
 185+ 8127
 186+ 8127                  ;a3
 187+ 8127 3A 9D 80         ld a,(legsB_attr_3)
 188+ 812A ED 92 38         nextreg $38,a
 189+ 812D
 190+ 812D                  ;a4
 191+ 812D 3E 41            ld a,%01000001
 192+ 812F ED 92 39         nextreg $39,a
 193+ 8132
 194+ 8132 C9               ret
 195+ 8133              ;
 196+ 8133
 197+ 8133
 198+ 8133              player_draw:
 199+ 8133 3E 32            ld a,PLAYER_SLOT
 200+ 8135 ED 92 34         nextreg $34,a
 201+ 8138
 202+ 8138                  ;Ax
 203+ 8138                  ;xx
 204+ 8138
 205+ 8138                  ;attr 0
 206+ 8138 3A 95 80         ld a,(px)
 207+ 813B ED 92 35         nextreg $35,a
 208+ 813E
 209+ 813E                  ;attr 1
 210+ 813E 3A 97 80         ld a,(py)
 211+ 8141 ED 92 36         nextreg $36,a
 212+ 8144
 213+ 8144                  ;attr 2
 214+ 8144 3A 98 80         ld a,(player_attr_2)
 215+ 8147 47               ld b,a
 216+ 8148 2A 95 80         ld hl,(px)
 217+ 814B 7C               ld a,h
 218+ 814C B0               or b
 219+ 814D ED 92 37         nextreg $37,a
 220+ 8150
 221+ 8150                  ;attr 3
 222+ 8150 3A 99 80         ld a,(player_attr_3)
 223+ 8153 ED 92 38         nextreg $38,a
 224+ 8156
 225+ 8156                  ;attr 4
 226+ 8156 3A 9A 80         ld a,(player_attr_4)
 227+ 8159 ED 92 39         nextreg $39,a
 228+ 815C
 229+ 815C                  ;relative sprites...
 230+ 815C
 231+ 815C                  ;r1:
 232+ 815C                  ;AR
 233+ 815C                  ;xx
 234+ 815C
 235+ 815C
 236+ 815C 3E 33            ld a,PLAYER_SLOT+1
 237+ 815E ED 92 34         nextreg $34,a
 238+ 8161
 239+ 8161                  ;a0
 240+ 8161 3E 10            ld a,16
 241+ 8163 ED 92 35         nextreg $35,a
 242+ 8166
 243+ 8166                  ;a1
 244+ 8166 3E 00            ld a,0
 245+ 8168 ED 92 36         nextreg $36,a
 246+ 816B
 247+ 816B                  ;a2
 248+ 816B 3E 01            ld a,%00000001
 249+ 816D ED 92 37         nextreg $37,a
 250+ 8170
 251+ 8170                  ;a3
 252+ 8170 3A 9B 80         ld a,(headB_attr_3)
 253+ 8173 ED 92 38         nextreg $38,a
 254+ 8176
 255+ 8176                  ;a4
 256+ 8176 3E 41            ld a,%01000001
 257+ 8178 ED 92 39         nextreg $39,a
 258+ 817B
 259+ 817B                  ;r2:
 260+ 817B                  ;Ax
 261+ 817B                  ;Rx
 262+ 817B 3E 34            ld a,PLAYER_SLOT+2
 263+ 817D ED 92 34         nextreg $34,a
 264+ 8180
 265+ 8180                  ;a0
 266+ 8180 3E 00            ld a,0
 267+ 8182 ED 92 35         nextreg $35,a
 268+ 8185
 269+ 8185                  ;a1
 270+ 8185 3E 10            ld a,16
 271+ 8187 ED 92 36         nextreg $36,a
 272+ 818A
 273+ 818A                  ;a2
 274+ 818A 3E 01            ld a,%00000001
 275+ 818C ED 92 37         nextreg $37,a
 276+ 818F
 277+ 818F                  ;a3
 278+ 818F 3A 9C 80         ld a,(legsA_attr_3)
 279+ 8192 ED 92 38         nextreg $38,a
 280+ 8195
 281+ 8195                  ;a4
 282+ 8195 3E 41            ld a,%01000001
 283+ 8197 ED 92 39         nextreg $39,a
 284+ 819A
 285+ 819A                  ;r3:
 286+ 819A                  ;Ax
 287+ 819A                  ;xR
 288+ 819A
 289+ 819A 3E 35            ld a,PLAYER_SLOT+3
 290+ 819C ED 92 34         nextreg $34,a
 291+ 819F
 292+ 819F                  ;a0
 293+ 819F 3E 10            ld a,16
 294+ 81A1 ED 92 35         nextreg $35,a
 295+ 81A4
 296+ 81A4                  ;a1
 297+ 81A4 3E 10            ld a,16
 298+ 81A6 ED 92 36         nextreg $36,a
 299+ 81A9
 300+ 81A9                  ;a2
 301+ 81A9 3E 01            ld a,%00000001
 302+ 81AB ED 92 37         nextreg $37,a
 303+ 81AE
 304+ 81AE                  ;a3
 305+ 81AE 3A 9D 80         ld a,(legsB_attr_3)
 306+ 81B1 ED 92 38         nextreg $38,a
 307+ 81B4
 308+ 81B4                  ;a4
 309+ 81B4 3E 41            ld a,%01000001
 310+ 81B6 ED 92 39         nextreg $39,a
 311+ 81B9
 312+ 81B9 C9               ret
 313+ 81BA
 314+ 81BA
 315+ 81BA
 316+ 81BA              player_update:
 317+ 81BA 3A 9E 80         ld a,(player_animation_timer)
 318+ 81BD 3C               inc a
 319+ 81BE 32 9E 80         ld (player_animation_timer),a
 320+ 81C1
 321+ 81C1
 322+ 81C1
 323+ 81C1
 324+ 81C1 3A 1F 87         ld a,(keypressed_Q)
 325+ 81C4 FE 01            cp TRUE
 326+ 81C6 CC E1 81         call z,player_attacking_start
 327+ 81C9
 328+ 81C9
 329+ 81C9 3A 9F 80         ld a,(player_animation_state)
 330+ 81CC FE 0C            cp ATTACKING
 331+ 81CE CA F4 81         jp z, player_update_attacking
 332+ 81D1 FE 0A            cp WALKING
 333+ 81D3 CA 9B 82         jp z, player_update_walking
 334+ 81D6 FE 0B            cp JUMPING
 335+ 81D8 CA E3 82         jp z, player_update_jumping
 336+ 81DB FE 00            cp IDLE
 337+ 81DD CA 59 82         jp z,player_update_idle
 338+ 81E0
 339+ 81E0
 340+ 81E0 C9               ret
 341+ 81E1
 342+ 81E1
 343+ 81E1
 344+ 81E1              player_attacking_start:
 345+ 81E1
 346+ 81E1 3A 9F 80         ld a,(player_animation_state)
 347+ 81E4 FE 0C            cp ATTACKING
 348+ 81E6 28 0C            jr z, player_update_attacking
 349+ 81E8                  ;cache previous anim state:
 350+ 81E8 32 A0 80         ld (player_animation_state_prev),a
 351+ 81EB
 352+ 81EB
 353+ 81EB CD 0F 82         call player_update_attacking.showframe1
 354+ 81EE
 355+ 81EE 3E 0C            ld a,ATTACKING
 356+ 81F0 32 9F 80         ld (player_animation_state),a
 357+ 81F3 C9               ret
 358+ 81F4
 359+ 81F4              player_update_attacking:
 360+ 81F4 3A 20 87         ld a,(keypressed_Q_Held)
 361+ 81F7 FE 01            cp TRUE
 362+ 81F9 28 14            jr z,.showframe1
 363+ 81FB C4 24 82         call nz,.showframe2
 364+ 81FE
 365+ 81FE CD 0F 85         call throw_hammer
 366+ 8201 3A A0 80         ld a,(player_animation_state_prev)
 367+ 8204
 368+ 8204 FE 00            cp IDLE
 369+ 8206 CA 39 82         jp z,player_idle_start
 370+ 8209 FE 0A            cp WALKING
 371+ 820B CA 39 82         jp z,player_idle_start
 372+ 820E                  ;if state was jumping, have to set state but not allow extra jump
 373+ 820E                  ;jp jump/falling
 374+ 820E C9               ret
 375+ 820F
 376+ 820F              .showframe1:
 377+ 820F 3E 0E            ld a,WBOY_THROW_A
 378+ 8211 C6 C0            add a,PLAYER_DEFAULT_ATTR3
 379+ 8213 32 99 80         ld (player_attr_3),a
 380+ 8216 3E C1            ld a,%11000001
 381+ 8218 32 9B 80         ld (headB_attr_3),a
 382+ 821B 3C               inc a
 383+ 821C 32 9C 80         ld (legsA_attr_3),a
 384+ 821F 3C               inc a
 385+ 8220 32 9D 80         ld (legsB_attr_3),a
 386+ 8223 C9               ret
 387+ 8224              .showframe2:
 388+ 8224 3E 12            ld a,WBOY_THROW_B
 389+ 8226 C6 C0            add a,PLAYER_DEFAULT_ATTR3
 390+ 8228 32 99 80         ld (player_attr_3),a
 391+ 822B 3E C1            ld a,%11000001
 392+ 822D 32 9B 80         ld (headB_attr_3),a
 393+ 8230 3C               inc a
 394+ 8231 32 9C 80         ld (legsA_attr_3),a
 395+ 8234 3C               inc a
 396+ 8235 32 9D 80         ld (legsB_attr_3),a
 397+ 8238 C9               ret
 398+ 8239
 399+ 8239
 400+ 8239
 401+ 8239              player_idle_start:
 402+ 8239 3A 9F 80         ld a,(player_animation_state)
 403+ 823C FE 00            cp IDLE
 404+ 823E C8               ret z
 405+ 823F
 406+ 823F 3E 00            ld a,IDLE
 407+ 8241 32 9F 80         ld (player_animation_state),a
 408+ 8244
 409+ 8244 3E 00            ld a,0 ;wonderboys head pattern
 410+ 8246 C6 C0            add a,PLAYER_DEFAULT_ATTR3
 411+ 8248 32 99 80         ld (player_attr_3),a
 412+ 824B 3E C1            ld a,%11000001
 413+ 824D 32 9B 80         ld (headB_attr_3),a
 414+ 8250 3C               inc a
 415+ 8251 32 9C 80         ld (legsA_attr_3),a
 416+ 8254 3C               inc a
 417+ 8255 32 9D 80         ld (legsB_attr_3),a
 418+ 8258 C9               ret
 419+ 8259
 420+ 8259
 421+ 8259
 422+ 8259
 423+ 8259              player_update_idle:
 424+ 8259 3E 00            ld a,IDLE
 425+ 825B 32 9F 80         ld (player_animation_state),a
 426+ 825E 3A 9E 80         ld a,(player_animation_timer)
 427+ 8261 FE 0F            cp 15 ;frame time
 428+ 8263 D4 DC 83         call nc, player_animate_idle
 429+ 8266
 430+ 8266
 431+ 8266 3A 23 87         ld a,(keypressed_Space)
 432+ 8269 FE 01            cp TRUE
 433+ 826B 28 4F            jr z,player_jump_start
 434+ 826D
 435+ 826D 3A 17 87         ld a,(keypressed_A)
 436+ 8270 FE 01            cp TRUE
 437+ 8272 28 08            jr z,.set_state_walking
 438+ 8274
 439+ 8274 3A 1B 87         ld a,(keypressed_D)
 440+ 8277 FE 01            cp TRUE
 441+ 8279 28 01            jr z,.set_state_walking
 442+ 827B
 443+ 827B C9               ret
 444+ 827C              .set_state_walking:
 445+ 827C 3E 0A            ld a,WALKING
 446+ 827E 32 9F 80         ld (player_animation_state),a
 447+ 8281 C9               ret
 448+ 8282
 449+ 8282
 450+ 8282
 451+ 8282              player_walking_start:
 452+ 8282 3A 9F 80         ld a,(player_animation_state)
 453+ 8285 FE 0A            cp WALKING
 454+ 8287 CA 9B 82         jp z,player_update_walking
 455+ 828A
 456+ 828A 21 00 00         ld hl,0
 457+ 828D 22 A1 80         ld (vy),hl
 458+ 8290
 459+ 8290 3E 0A            ld a,WALKING
 460+ 8292 32 9F 80         ld (player_animation_state),a
 461+ 8295
 462+ 8295 3E C0            ld a,PLAYER_DEFAULT_ATTR3
 463+ 8297 32 99 80         ld (player_attr_3),a
 464+ 829A
 465+ 829A C9               ret
 466+ 829B              player_update_walking:
 467+ 829B CD D6 84         call check_grounded
 468+ 829E
 469+ 829E 3A 23 87         ld a,(keypressed_Space)
 470+ 82A1 FE 01            cp TRUE
 471+ 82A3 CC BC 82         call z,player_jump_start
 472+ 82A6
 473+ 82A6 3A 17 87         ld a,(keypressed_A)
 474+ 82A9 FE 01            cp TRUE
 475+ 82AB CA 4C 83         jp z,plyr_move_left_start
 476+ 82AE
 477+ 82AE 3A 1B 87         ld a,(keypressed_D)
 478+ 82B1 FE 01            cp TRUE
 479+ 82B3 CA 97 83         jp z,plyr_move_right_start
 480+ 82B6
 481+ 82B6                  ;else idle walking state...
 482+ 82B6 3E 00            ld a,IDLE
 483+ 82B8 32 9F 80         ld (player_animation_state),a
 484+ 82BB
 485+ 82BB C9               ret
 486+ 82BC
 487+ 82BC              player_jump_start:
 488+ 82BC 3A 24 87         ld a,(keypressed_Space_Held)
 489+ 82BF FE 01            cp TRUE
 490+ 82C1 C8               ret z
 491+ 82C2
 492+ 82C2 3A 9F 80         ld a,(player_animation_state)
 493+ 82C5 FE 0B            cp JUMPING
 494+ 82C7 C8               ret z
 495+ 82C8
 496+ 82C8 3E 0C            ld a,WBOY_FIRST_JUMP
 497+ 82CA C6 C0            add a,PLAYER_DEFAULT_ATTR3
 498+ 82CC 32 9C 80         ld (legsA_attr_3),a
 499+ 82CF 3C               inc a
 500+ 82D0 32 9D 80         ld (legsB_attr_3),a
 501+ 82D3
 502+ 82D3 3E 0B            ld a,JUMPING
 503+ 82D5 32 9F 80         ld (player_animation_state),a
 504+ 82D8
 505+ 82D8 3A 97 80         ld a,(py)
 506+ 82DB 32 A6 80         ld (player_jump_point),a
 507+ 82DE
 508+ 82DE 3E 02            ld a,UP
 509+ 82E0 32 A5 80         ld (player_jump_direction),a
 510+ 82E3              player_update_jumping:
 511+ 82E3 3A 17 87         ld a,(keypressed_A)
 512+ 82E6 FE 01            cp TRUE
 513+ 82E8 CC 4C 83         call z,plyr_move_left_start
 514+ 82EB
 515+ 82EB 3A 1B 87         ld a,(keypressed_D)
 516+ 82EE FE 01            cp TRUE
 517+ 82F0 CC 97 83         call z,plyr_move_right_start
 518+ 82F3
 519+ 82F3 CD 33 84         call player_calculate_world_position
 520+ 82F6
 521+ 82F6 CD 75 84         call check_collision_jumping
 522+ 82F9
 523+ 82F9 3A A6 80         ld a,(player_jump_point)
 524+ 82FC D6 0F            sub PLAYER_JUMP_HEIGHT
 525+ 82FE 47               ld b,a
 526+ 82FF 3A 97 80         ld a,(py)
 527+ 8302 B8               cp b
 528+ 8303 DC 1B 83         call c,plyr_set_jump_down
 529+ 8306
 530+ 8306
 531+ 8306 3A A5 80         ld a,(player_jump_direction)
 532+ 8309 FE 02            cp UP
 533+ 830B F5               push af
 534+ 830C CC 21 83         call z, apply_force_up
 535+ 830F F1               pop af
 536+ 8310 FE 03            cp DOWN
 537+ 8312 F5               push af
 538+ 8313 CC 30 83         call z, apply_force_down
 539+ 8316 F1               pop af
 540+ 8317
 541+ 8317
 542+ 8317
 543+ 8317 CD 3F 83         call apply_velocity
 544+ 831A
 545+ 831A
 546+ 831A C9               ret
 547+ 831B
 548+ 831B
 549+ 831B
 550+ 831B
 551+ 831B              plyr_set_jump_down:
 552+ 831B 3E 03            ld a,DOWN
 553+ 831D 32 A5 80         ld (player_jump_direction),a
 554+ 8320 C9               ret
 555+ 8321
 556+ 8321              apply_force_up:
 557+ 8321 2A A1 80         ld hl,(vy)
 558+ 8324 7C               ld a,h
 559+ 8325 FE FB            cp -MAX_UP_SPEED
 560+ 8327 C8               ret z
 561+ 8328
 562+ 8328 ED 34 80 FF      add hl,-UP_FORCE*2
 563+ 832C 22 A1 80         ld (vy),hl
 564+ 832F C9               ret
 565+ 8330              apply_force_down:
 566+ 8330 2A A1 80         ld hl,(vy)
 567+ 8333 7C               ld a,h
 568+ 8334 FE 07            cp MAX_DOWN_SPEED
 569+ 8336 C8               ret z
 570+ 8337 ED 34 20 00      add hl,DOWN_FORCE
 571+ 833B 22 A1 80         ld (vy),hl
 572+ 833E C9               ret
 573+ 833F
 574+ 833F              apply_velocity:
 575+ 833F 21 97 80         ld hl,py
 576+ 8342 46               ld b,(hl)
 577+ 8343 2A A1 80         ld hl,(vy)
 578+ 8346 7C               ld a,h
 579+ 8347 80               add a,b
 580+ 8348 32 97 80         ld (py),a
 581+ 834B C9               ret
 582+ 834C
 583+ 834C
 584+ 834C
 585+ 834C              plyr_move_left_start:
 586+ 834C 3E 00            ld a,LEFT
 587+ 834E 32 A4 80         ld (player_walk_direction),a
 588+ 8351
 589+ 8351 3A 98 80         ld a,(player_attr_2)
 590+ 8354 CB 5F            bit 3,a
 591+ 8356 C2 6C 83         jp nz,plyr_move_left
 592+ 8359
 593+ 8359 3A 98 80         ld a,(player_attr_2)
 594+ 835C CB DF            set 3,a
 595+ 835E 32 98 80         ld (player_attr_2),a
 596+ 8361
 597+ 8361 2A 95 80         ld hl,(px)
 598+ 8364 ED 34 20 00      add hl,32 ;2 relatives width (plus anchor)
 599+ 8368 22 95 80         ld (px),hl
 600+ 836B
 601+ 836B C9               ret
 602+ 836C              plyr_move_left:
 603+ 836C
 604+ 836C CD 33 84         call player_calculate_world_position
 605+ 836F                  ; ; ; ; ; ; ; ; call check_collision_left
 606+ 836F
 607+ 836F 3A A3 80         ld a,(player_collided_solid)
 608+ 8372 FE 01            cp TRUE
 609+ 8374 C8               ret z
 610+ 8375
 611+ 8375 3A 9E 80         ld a,(player_animation_timer)
 612+ 8378 FE 04            cp PLAYER_ANIMATION_DELAY
 613+ 837A D4 07 84         call nc, player_animate_walk
 614+ 837D
 615+ 837D 2A 95 80         ld hl,(px)
 616+ 8380 7C               ld a,h
 617+ 8381 FE 00            cp 0
 618+ 8383 C2 8F 83         jp nz,p_move_left
 619+ 8386 7D               ld a,l
 620+ 8387 FE B0            cp SCROLL_MARKER_X+16
 621+ 8389 DA FB 8D         jp c,scroll_left
 622+ 838C D2 8F 83         jp nc,p_move_left
 623+ 838F
 624+ 838F              p_move_left:
 625+ 838F ED 34 FF FF      add hl,-PLAYER_WALK_SPEED
 626+ 8393 22 95 80         ld (px),hl
 627+ 8396 C9               ret
 628+ 8397
 629+ 8397
 630+ 8397              plyr_move_right_start:
 631+ 8397 3E 01            ld a,RIGHT
 632+ 8399 32 A4 80         ld (player_walk_direction),a
 633+ 839C
 634+ 839C 3A 98 80         ld a,(player_attr_2)
 635+ 839F CB 5F            bit 3,a
 636+ 83A1 CA B7 83         jp z,plyr_move_right
 637+ 83A4
 638+ 83A4 3A 98 80         ld a,(player_attr_2)
 639+ 83A7 CB 9F            res 3,a
 640+ 83A9 32 98 80         ld (player_attr_2),a
 641+ 83AC
 642+ 83AC 2A 95 80         ld hl,(px)
 643+ 83AF ED 34 E0 FF      add hl,-32
 644+ 83B3 22 95 80         ld (px),hl
 645+ 83B6 C9               ret
 646+ 83B7              plyr_move_right:
 647+ 83B7 CD 33 84         call player_calculate_world_position
 648+ 83BA                  ; ; ; ; ; ; ; ; ; ; call check_collision_right
 649+ 83BA
 650+ 83BA 3A A3 80         ld a,(player_collided_solid)
 651+ 83BD FE 01            cp TRUE
 652+ 83BF C8               ret z
 653+ 83C0
 654+ 83C0 3A 9E 80         ld a,(player_animation_timer)
 655+ 83C3 FE 04            cp PLAYER_ANIMATION_DELAY
 656+ 83C5 D4 07 84         call nc, player_animate_walk
 657+ 83C8
 658+ 83C8 2A 95 80         ld hl,(px)
 659+ 83CB 7D               ld a,l
 660+ 83CC FE 90            cp SCROLL_MARKER_X-16
 661+ 83CE D2 4B 8E         jp nc,scroll_right
 662+ 83D1 DA D4 83         jp c,p_move_right
 663+ 83D4
 664+ 83D4              p_move_right
 665+ 83D4 ED 34 01 00      add hl,PLAYER_WALK_SPEED
 666+ 83D8 22 95 80         ld (px),hl
 667+ 83DB C9               ret
 668+ 83DC
 669+ 83DC
 670+ 83DC
 671+ 83DC
 672+ 83DC              player_animate_idle:
 673+ 83DC AF               xor a
 674+ 83DD 32 9E 80         ld (player_animation_timer),a
 675+ 83E0
 676+ 83E0 3A 9F 80         ld a,(player_animation_state)
 677+ 83E3 FE 00            cp IDLE
 678+ 83E5 C0               ret nz
 679+ 83E6
 680+ 83E6 3A 9C 80         ld a,(legsA_attr_3)
 681+ 83E9 E6 3F            and %00111111 ;mask out top 2 bits
 682+ 83EB FE 04            cp WBOY_FINAL_IDLE ;Final Idle 'A' pattern
 683+ 83ED 30 0C            jr nc,plyr_set_idle_firstframe
 684+ 83EF
 685+ 83EF C6 02            add a,WBOY_BODY_SIZE
 686+ 83F1 C6 C0            add a,PLAYER_DEFAULT_ATTR3
 687+ 83F3 32 9C 80         ld (legsA_attr_3),a
 688+ 83F6 3C               inc a
 689+ 83F7 32 9D 80         ld (legsB_attr_3),a
 690+ 83FA
 691+ 83FA C9               ret
 692+ 83FB
 693+ 83FB              plyr_set_idle_firstframe:
 694+ 83FB 3E 02            ld a,WBOY_FIRST_IDLE
 695+ 83FD C6 C0            add a,PLAYER_DEFAULT_ATTR3
 696+ 83FF 32 9C 80         ld (legsA_attr_3),a
 697+ 8402 3C               inc a
 698+ 8403 32 9D 80         ld (legsB_attr_3),a
 699+ 8406 C9               ret
 700+ 8407
 701+ 8407              player_animate_walk:
 702+ 8407 AF               xor a
 703+ 8408 32 9E 80         ld (player_animation_timer),a
 704+ 840B
 705+ 840B 3A 9F 80         ld a,(player_animation_state)
 706+ 840E FE 0A            cp WALKING
 707+ 8410 C0               ret nz
 708+ 8411
 709+ 8411 3A 9C 80         ld a,(legsA_attr_3)
 710+ 8414 E6 3F            and %00111111 ;mask out top 2 bits
 711+ 8416 FE 0C            cp WBOY_FINAL_WALK ;final walk 'A' pattern
 712+ 8418 CA 27 84         jp z,plyr_set_walking_firstframe
 713+ 841B
 714+ 841B C6 02            add a,WBOY_BODY_SIZE
 715+ 841D C6 C0            add a,PLAYER_DEFAULT_ATTR3
 716+ 841F 32 9C 80         ld (legsA_attr_3),a
 717+ 8422 3C               inc a
 718+ 8423 32 9D 80         ld (legsB_attr_3),a
 719+ 8426 C9               ret
 720+ 8427
 721+ 8427              plyr_set_walking_firstframe:
 722+ 8427 3E 06            ld a,WBOY_FIRST_WALK
 723+ 8429 C6 C0            add a,PLAYER_DEFAULT_ATTR3
 724+ 842B 32 9C 80         ld (legsA_attr_3),a
 725+ 842E 3C               inc a
 726+ 842F 32 9D 80         ld (legsB_attr_3),a
 727+ 8432 C9               ret
 728+ 8433
 729+ 8433
 730+ 8433              player_calculate_world_position:
 731+ 8433 3A 97 80         ld a,(py)
 732+ 8436 E6 F0            and %11110000
 733+ 8438 0F               rrca
 734+ 8439 0F               rrca
 735+ 843A 0F               rrca
 736+ 843B 0F               rrca
 737+ 843C 32 94 80         ld (player_world_y),a
 738+ 843F
 739+ 843F 3A A4 80         ld a,(player_walk_direction)
 740+ 8442 FE 01            cp RIGHT
 741+ 8444 CA 5C 84         jp z, p_wp_r
 742+ 8447
 743+ 8447              p_wp_l:
 744+ 8447 2A 95 80         ld hl,(px)
 745+ 844A 7D               ld a,l
 746+ 844B E6 F0            and %11110000
 747+ 844D 0F               rrca
 748+ 844E 0F               rrca
 749+ 844F 0F               rrca
 750+ 8450 0F               rrca
 751+ 8451 47               ld b,a
 752+ 8452 3A F6 8C         ld a,(cam_x)
 753+ 8455 4F               ld c,a
 754+ 8456 78               ld a,b
 755+ 8457 81               add a,c
 756+ 8458 32 93 80         ld (player_world_x),a
 757+ 845B C9               ret
 758+ 845C              p_wp_r:
 759+ 845C 2A 95 80         ld hl,(px)
 760+ 845F ED 34 18 00      add hl,24
 761+ 8463 7D               ld a,l
 762+ 8464 E6 F0            and %11110000
 763+ 8466 0F               rrca
 764+ 8467 0F               rrca
 765+ 8468 0F               rrca
 766+ 8469 0F               rrca
 767+ 846A 47               ld b,a
 768+ 846B 3A F6 8C         ld a,(cam_x)
 769+ 846E 4F               ld c,a
 770+ 846F 78               ld a,b
 771+ 8470 81               add a,c
 772+ 8471 32 93 80         ld (player_world_x),a
 773+ 8474 C9               ret
 774+ 8475
 775+ 8475
 776+ 8475
 777+ 8475              check_collision_jumping:
 778+ 8475 3A 9F 80         ld a,(player_animation_state)
 779+ 8478 FE 0B            cp JUMPING
 780+ 847A C0               ret nz
 781+ 847B
 782+ 847B 3A A5 80         ld a,(player_jump_direction)
 783+ 847E FE 03            cp DOWN
 784+ 8480 C0               ret nz
 785+ 8481
 786+ 8481
 787+ 8481 21 74 88         ld hl,superlevel
 788+ 8484 3A 94 80         ld a,(player_world_y)
 789+ 8487 FE 06            cp 6
 790+ 8489 D8               ret c
 791+ 848A D6 06            sub 6
 792+ 848C 57               ld d,a
 793+ 848D 1E 50            ld e,LEVEL_WIDTH_META
 794+ 848F ED 30            mul d,e
 795+ 8491 19               add hl,de
 796+ 8492 3A 93 80         ld a,(player_world_x)
 797+ 8495 5F               ld e,a
 798+ 8496 16 00            ld d,0
 799+ 8498 19               add hl,de
 800+ 8499 7E               ld a,(hl)
 801+ 849A CD 6B 88         call check_solid
 802+ 849D CA C2 84         jp z,collided_jumping
 803+ 84A0
 804+ 84A0 21 74 88         ld hl,superlevel
 805+ 84A3 3A 94 80         ld a,(player_world_y)
 806+ 84A6 FE 06            cp 6
 807+ 84A8 D8               ret c
 808+ 84A9 D6 06            sub 6
 809+ 84AB 57               ld d,a
 810+ 84AC 1E 50            ld e,LEVEL_WIDTH_META
 811+ 84AE ED 30            mul d,e
 812+ 84B0 19               add hl,de
 813+ 84B1 3A 93 80         ld a,(player_world_x)
 814+ 84B4 C6 01            add a,1
 815+ 84B6 5F               ld e,a
 816+ 84B7 16 00            ld d,0
 817+ 84B9 19               add hl,de
 818+ 84BA 7E               ld a,(hl)
 819+ 84BB CD 6B 88         call check_solid
 820+ 84BE CA C2 84         jp z,collided_jumping
 821+ 84C1
 822+ 84C1
 823+ 84C1
 824+ 84C1 C9               ret
 825+ 84C2
 826+ 84C2
 827+ 84C2              collided_jumping:
 828+ 84C2
 829+ 84C2                  ;snap to nearest cell
 830+ 84C2 3A 94 80         ld a,(player_world_y)
 831+ 84C5 87               add a,a
 832+ 84C6 87               add a,a
 833+ 84C7 87               add a,a
 834+ 84C8 87               add a,a
 835+ 84C9 32 97 80         ld (py),a
 836+ 84CC
 837+ 84CC 3A A5 80         ld a,(player_jump_direction)
 838+ 84CF FE 02            cp UP
 839+ 84D1 C8               ret z
 840+ 84D2
 841+ 84D2                  ;collided
 842+ 84D2 CD 82 82         call player_walking_start
 843+ 84D5
 844+ 84D5
 845+ 84D5
 846+ 84D5 C9               ret
 847+ 84D6
 848+ 84D6
 849+ 84D6              check_grounded:
 850+ 84D6 3A A5 80         ld a,(player_jump_direction)
 851+ 84D9 FE 03            cp DOWN
 852+ 84DB C0               ret nz
 853+ 84DC
 854+ 84DC 21 74 88         ld hl,superlevel
 855+ 84DF 3A 94 80         ld a,(player_world_y)
 856+ 84E2 FE 06            cp 6
 857+ 84E4 D8               ret c
 858+ 84E5 D6 06            sub 6
 859+ 84E7 57               ld d,a
 860+ 84E8 1E 50            ld e,LEVEL_WIDTH_META
 861+ 84EA ED 30            mul d,e
 862+ 84EC 19               add hl,de
 863+ 84ED 3A 93 80         ld a,(player_world_x)
 864+ 84F0 5F               ld e,a
 865+ 84F1 16 00            ld d,0
 866+ 84F3 19               add hl,de
 867+ 84F4 7E               ld a,(hl)
 868+ 84F5 CD 6B 88         call check_solid
 869+ 84F8 CA FE 84         jp z,grounded_true
 870+ 84FB
 871+ 84FB
 872+ 84FB C3 04 85         jp grounded_false
 873+ 84FE              grounded_true:
 874+ 84FE
 875+ 84FE 3E 01            ld a,TRUE
 876+ 8500 32 A7 80         ld (player_grounded),a
 877+ 8503 C9               ret
 878+ 8504
 879+ 8504              grounded_false:
 880+ 8504 3E 00            ld a,FALSE
 881+ 8506 32 A7 80         ld (player_grounded),a
 882+ 8509
 883+ 8509
 884+ 8509 3E 0B            ld a,JUMPING
 885+ 850B 32 9F 80         ld (player_animation_state),a
 886+ 850E
 887+ 850E C9               ret
 888+ 850F
 889+ 850F
 890+ 850F              ; check_collision_left:
 891+ 850F              ;     ld hl,level1
 892+ 850F              ;     ld a,(player_world_y)
 893+ 850F              ;     add a,2
 894+ 850F              ;     ld d,a
 895+ 850F              ;     ld e,WORLD_WIDTH
 896+ 850F              ;     mul d,e
 897+ 850F              ;     add hl,de
 898+ 850F              ;     ld a,(player_world_x)
 899+ 850F              ;     ld e,a
 900+ 850F              ;     ld d,0
 901+ 850F              ;     add hl,de
 902+ 850F              ;     ld a,(hl)
 903+ 850F              ;     cp 12
 904+ 850F              ;     jp c,collided_solid_sideways
 905+ 850F
 906+ 850F              ;     ld a,FALSE
 907+ 850F              ;     ld (player_collided_solid),a
 908+ 850F
 909+ 850F              ;     ret
 910+ 850F
 911+ 850F
 912+ 850F
 913+ 850F              ; check_collision_right:
 914+ 850F              ;     ld hl,(px)
 915+ 850F              ;     ld a,h
 916+ 850F              ;     cp 0
 917+ 850F              ;     jp nz, check_collision_right_x8
 918+ 850F
 919+ 850F              ;     ld hl,level1
 920+ 850F              ;     ld a,(player_world_y)
 921+ 850F              ;     ld d,a
 922+ 850F              ;     ld e,WORLD_WIDTH
 923+ 850F              ;     mul d,e
 924+ 850F              ;     add hl,de
 925+ 850F              ;     ld a,(player_world_x)
 926+ 850F              ;     add a,1
 927+ 850F              ;     ld e,a
 928+ 850F              ;     ld d,0
 929+ 850F              ;     add hl,de
 930+ 850F              ;     ld a,(hl)
 931+ 850F              ;     cp 12
 932+ 850F              ;     jp c,collided_solid_sideways
 933+ 850F
 934+ 850F              ;     ld hl,level1
 935+ 850F              ;     ld a,(player_world_y)
 936+ 850F              ;     add a,1
 937+ 850F              ;     ld d,a
 938+ 850F              ;     ld e,WORLD_WIDTH
 939+ 850F              ;     mul d,e
 940+ 850F              ;     add hl,de
 941+ 850F              ;     ld a,(player_world_x)
 942+ 850F              ;     add a,1
 943+ 850F              ;     ld e,a
 944+ 850F              ;     ld d,0
 945+ 850F              ;     add hl,de
 946+ 850F              ;     ld a,(hl)
 947+ 850F              ;     cp 12
 948+ 850F              ;     jp c,collided_solid_sideways
 949+ 850F
 950+ 850F              ;     ld hl,level1
 951+ 850F              ;     ld a,(player_world_y)
 952+ 850F              ;     add a,2
 953+ 850F              ;     ld d,a
 954+ 850F              ;     ld e,WORLD_WIDTH
 955+ 850F              ;     mul d,e
 956+ 850F              ;     add hl,de
 957+ 850F              ;     ld a,(player_world_x)
 958+ 850F              ;     add a,1
 959+ 850F              ;     ld e,a
 960+ 850F              ;     ld d,0
 961+ 850F              ;     add hl,de
 962+ 850F              ;     ld a,(hl)
 963+ 850F              ;     cp 12
 964+ 850F              ;     jp c,collided_solid_sideways
 965+ 850F
 966+ 850F              ;     ld hl,level1
 967+ 850F              ;     ld a,(player_world_y)
 968+ 850F              ;     add a,3
 969+ 850F              ;     ld d,a
 970+ 850F              ;     ld e,WORLD_WIDTH
 971+ 850F              ;     mul d,e
 972+ 850F              ;     add hl,de
 973+ 850F              ;     ld a,(player_world_x)
 974+ 850F              ;     add a,1
 975+ 850F              ;     ld e,a
 976+ 850F              ;     ld d,0
 977+ 850F              ;     add hl,de
 978+ 850F              ;     ld a,(hl)
 979+ 850F              ;     cp 12
 980+ 850F              ;     jp c,collided_solid_sideways
 981+ 850F
 982+ 850F
 983+ 850F
 984+ 850F              ;     ld a,FALSE
 985+ 850F              ;     ld (player_collided_solid),a
 986+ 850F
 987+ 850F              ;     ret
 988+ 850F
 989+ 850F              ; check_collision_right_x8:
 990+ 850F              ;     ld hl,level1
 991+ 850F              ;     ld a,(player_world_y)
 992+ 850F              ;     ld d,a
 993+ 850F              ;     ld e,WORLD_WIDTH
 994+ 850F              ;     mul d,e
 995+ 850F              ;     add hl,de
 996+ 850F              ;     ld a,(player_world_x)
 997+ 850F              ;     add a,33
 998+ 850F              ;     ld e,a
 999+ 850F              ;     ld d,0
1000+ 850F              ;     add hl,de
1001+ 850F              ;     ld a,(hl)
1002+ 850F              ;     cp 12
1003+ 850F              ;     jp c,collided_solid_sideways
1004+ 850F
1005+ 850F              ;     ld hl,level1
1006+ 850F              ;     ld a,(player_world_y)
1007+ 850F              ;     add a,1
1008+ 850F              ;     ld d,a
1009+ 850F              ;     ld e,WORLD_WIDTH
1010+ 850F              ;     mul d,e
1011+ 850F              ;     add hl,de
1012+ 850F              ;     ld a,(player_world_x)
1013+ 850F              ;     add a,33
1014+ 850F              ;     ld e,a
1015+ 850F              ;     ld d,0
1016+ 850F              ;     add hl,de
1017+ 850F              ;     ld a,(hl)
1018+ 850F              ;     cp 12
1019+ 850F              ;     jp c,collided_solid_sideways
1020+ 850F
1021+ 850F              ;     ld hl,level1
1022+ 850F              ;     ld a,(player_world_y)
1023+ 850F              ;     add a,2
1024+ 850F              ;     ld d,a
1025+ 850F              ;     ld e,WORLD_WIDTH
1026+ 850F              ;     mul d,e
1027+ 850F              ;     add hl,de
1028+ 850F              ;     ld a,(player_world_x)
1029+ 850F              ;     add a,33
1030+ 850F              ;     ld e,a
1031+ 850F              ;     ld d,0
1032+ 850F              ;     add hl,de
1033+ 850F              ;     ld a,(hl)
1034+ 850F              ;     cp 12
1035+ 850F              ;     jp c,collided_solid_sideways
1036+ 850F
1037+ 850F              ;     ld hl,level1
1038+ 850F              ;     ld a,(player_world_y)
1039+ 850F              ;     add a,3
1040+ 850F              ;     ld d,a
1041+ 850F              ;     ld e,WORLD_WIDTH
1042+ 850F              ;     mul d,e
1043+ 850F              ;     add hl,de
1044+ 850F              ;     ld a,(player_world_x)
1045+ 850F              ;     add a,33
1046+ 850F              ;     ld e,a
1047+ 850F              ;     ld d,0
1048+ 850F              ;     add hl,de
1049+ 850F              ;     ld a,(hl)
1050+ 850F              ;     cp 12
1051+ 850F              ;     jp c,collided_solid_sideways
1052+ 850F
1053+ 850F
1054+ 850F
1055+ 850F              ;     ld a,FALSE
1056+ 850F              ;     ld (player_collided_solid),a
1057+ 850F
1058+ 850F              ;     ret
1059+ 850F
1060+ 850F
1061+ 850F
1062+ 850F
1063+ 850F
1064+ 850F
1065+ 850F              ; collided_solid_sideways:
1066+ 850F              ;     ld a,TRUE
1067+ 850F              ;     ld (player_collided_solid),a
1068+ 850F              ;     ret
1069+ 850F
1070+ 850F
1071+ 850F
1072+ 850F              throw_hammer:
1073+ 850F 3A 20 87         ld a,(keypressed_Q_Held)
1074+ 8512 FE 01            cp TRUE
1075+ 8514 C8               ret z
1076+ 8515
1077+ 8515
1078+ 8515 CD 0C 8F         call projectiles_spawn
1079+ 8518 C9               ret
# file closed: src/player.asm
  45  8519              	include 'objects.asm'
# file opened: src/objects.asm
   1+ 8519
   2+ 8519
   3+ 8519
   4+ 8519              OBJECT_PUMPKIN equ 0
   5+ 8519              OBJECT_GHOST equ 1
   6+ 8519              OBJECT_GHOST_WALKER equ 2
   7+ 8519              OBJECT_DEAD equ 100
   8+ 8519              OBJECT_COLLIDED equ $FF
   9+ 8519              OBJECT_HEIGHT equ 16
  10+ 8519
  11+ 8519
  12+ 8519              ;::All objects have 2 frame animation::
  13+ 8519
  14+ 8519              ;0=isInView
  15+ 8519              ;1=objType
  16+ 8519              ;2=wX
  17+ 8519              ;3=wY
  18+ 8519              ;4,5=XX
  19+ 8519              ;6=Y
  20+ 8519              ;7=att2
  21+ 8519              ;8=att3
  22+ 8519              ;9=att4
  23+ 8519              ;10=slot_ID
  24+ 8519              ;11=sprites specific XOR value
  25+ 8519              ;12=direction
  26+ 8519
  27+ 8519              objects:
  28+ 8519                  ; db FALSE, OBJECT_PUMPKIN, 01, 01  : dw 0 : db 0,  %00000000,%01010000,%00000000,0,1,RIGHT
  29+ 8519                  ; db FALSE, OBJECT_GHOST, 50, 19 : dw 0 : db 0, %00000000,%01010010,%00000000,11,1,RIGHT
  30+ 8519                  ; db FALSE, OBJECT_GHOST_WALKER, 39, 24 : dw 0 : db 0, %00000000,%01010010,%00000000,15,1,LEFT
  31+ 8519                  ; db FALSE, OBJECT_GHOST_WALKER, 50, 26 : dw 0 : db 0, %00000000,%01010010,%00000000,15,1,LEFT
  32+ 8519                  ; db FALSE, OBJECT_GHOST_WALKER, 72, 26 : dw 0 : db 0, %00000000,%01010010,%00000000,15,1,LEFT
  33+ 8519                  ; db FALSE, OBJECT_GHOST_WALKER, 110, 26 : dw 0 : db 0, %00000000,%01010010,%00000000,15,1,LEFT
  34+ 8519 FF               db END_OF_ARRAY
  35+ 851A
  36+ 851A              OBJECTS_DATA_LENGTH equ 13
  37+ 851A
  38+ 851A
  39+ 851A              GHOST_SPEED equ 2
  40+ 851A              GHOST_MAX_MOVEMENT_X equ 30
  41+ 851A
  42+ 851A
  43+ 851A
  44+ 851A              ;sX= wX-(cam_edge_r-VW)*8
  45+ 851A              ;sY= wY*8
  46+ 851A
  47+ 851A
  48+ 851A
  49+ 851A              objects_init:
  50+ 851A C9               ret
  51+ 851B
  52+ 851B
  53+ 851B
  54+ 851B              objects_update:
  55+ 851B DD 21 19 85      ld ix,objects
  56+ 851F              objs_update_start:
  57+ 851F DD 7E 00         ld a,(ix)
  58+ 8522 FE FF            cp END_OF_ARRAY
  59+ 8524 C8               ret z
  60+ 8525
  61+ 8525 CD 45 85         call object_update
  62+ 8528
  63+ 8528 11 0D 00         ld de,OBJECTS_DATA_LENGTH
  64+ 852B DD 19            add ix,de
  65+ 852D C3 1F 85         jp objs_update_start
  66+ 8530
  67+ 8530
  68+ 8530
  69+ 8530
  70+ 8530              objects_draw:
  71+ 8530 DD 21 19 85      ld ix,objects
  72+ 8534              objs_draw_start:
  73+ 8534 DD 7E 00         ld a,(ix)
  74+ 8537 FE FF            cp END_OF_ARRAY
  75+ 8539 C8               ret z
  76+ 853A
  77+ 853A CD FC 85         call object_draw
  78+ 853D
  79+ 853D 11 0D 00         ld de,OBJECTS_DATA_LENGTH
  80+ 8540 DD 19            add ix,de
  81+ 8542 C3 34 85         jp objs_draw_start
  82+ 8545
  83+ 8545
  84+ 8545
  85+ 8545
  86+ 8545
  87+ 8545
  88+ 8545
  89+ 8545              object_update:
  90+ 8545 DD 7E 01         ld a,(ix+1)
  91+ 8548 FE 64            cp OBJECT_DEAD
  92+ 854A C8               ret z
  93+ 854B
  94+ 854B
  95+ 854B CD 5E 85         call object_check_in_view
  96+ 854E CD E9 85         call animate_object
  97+ 8551
  98+ 8551 DD 7E 01         ld a,(ix+1)
  99+ 8554 FE 00            cp OBJECT_PUMPKIN
 100+ 8556 C8               ret z
 101+ 8557
 102+ 8557 CD 2C 86         call handle_behaviour
 103+ 855A CD 65 86         call object_check_collision_player
 104+ 855D
 105+ 855D C9               ret
 106+ 855E
 107+ 855E
 108+ 855E
 109+ 855E              object_check_in_view:
 110+ 855E DD 7E 02         ld a,(ix+2)
 111+ 8561 47               ld b,a
 112+ 8562 3A F6 8C         ld a,(cam_x)
 113+ 8565 C6 14            add a,VIEW_WIDTH_META
 114+ 8567 B8               cp b
 115+ 8568 DA 86 85         jp c, obj_set_not_inview
 116+ 856B
 117+ 856B 3A F6 8C         ld a,(cam_x)
 118+ 856E 47               ld b,a
 119+ 856F DD 7E 02         ld a,(ix+2)
 120+ 8572 B8               cp b
 121+ 8573 DA 86 85         jp c, obj_set_not_inview
 122+ 8576
 123+ 8576                  ; set to inview=yes
 124+ 8576 DD 36 00 01      ld (ix),TRUE
 125+ 857A DD 7E 08         ld a,(ix+8)
 126+ 857D CB FF            set 7,a
 127+ 857F DD 77 08         ld (ix+8),a
 128+ 8582
 129+ 8582 CD 96 85         call object_calculate_screen_pos
 130+ 8585 C9               ret
 131+ 8586
 132+ 8586              obj_set_not_inview:
 133+ 8586 DD 36 00 00      ld (ix),FALSE
 134+ 858A DD 7E 08         ld a,(ix+8)
 135+ 858D CB BF            res 7,a
 136+ 858F DD 77 08         ld (ix+8),a
 137+ 8592 CD 02 86         call obj_drw
 138+ 8595 C9               ret
 139+ 8596
 140+ 8596
 141+ 8596
 142+ 8596              object_calculate_screen_pos:
 143+ 8596                  ;Y
 144+ 8596 DD 7E 03         ld a,(ix+3)
 145+ 8599 87               add a,a
 146+ 859A 87               add a,a
 147+ 859B 87               add a,a ;A*8
 148+ 859C DD 77 06         ld (ix+6),a
 149+ 859F
 150+ 859F 3A F5 8C         ld a,(scroll_direction)
 151+ 85A2 FE 00            cp LEFT
 152+ 85A4 CA AD 85         jp z,obj_screen_moving_left
 153+ 85A7 FE 01            cp RIGHT
 154+ 85A9 CA C9 85         jp z,obj_screen_moving_right
 155+ 85AC
 156+ 85AC C9               ret
 157+ 85AD
 158+ 85AD              obj_screen_moving_left:
 159+ 85AD                  ;X (scroll left)
 160+ 85AD 3A F6 8C         ld a,(cam_x)
 161+ 85B0 47               ld b,a
 162+ 85B1 DD 7E 02         ld a,(ix+2) ;wX
 163+ 85B4 90               sub b ;wX-camX
 164+ 85B5 21 00 00         ld hl,0
 165+ 85B8 ED 31            add hl,a
 166+ 85BA 29               add hl,hl
 167+ 85BB 29               add hl,hl
 168+ 85BC 29               add hl,hl
 169+ 85BD 3A F4 8C         ld a,(current_scroll)
 170+ 85C0 ED 31            add hl,a
 171+ 85C2 DD 75 04         ld (ix+4),l
 172+ 85C5 DD 74 05         ld (ix+5),h ;X8
 173+ 85C8 C9               ret
 174+ 85C9
 175+ 85C9              obj_screen_moving_right:
 176+ 85C9                  ;X (scroll left)
 177+ 85C9 3A F6 8C         ld a,(cam_x)
 178+ 85CC 47               ld b,a
 179+ 85CD DD 7E 02         ld a,(ix+2) ;wX
 180+ 85D0 90               sub b ;wX-camX
 181+ 85D1 21 00 00         ld hl,0
 182+ 85D4 ED 31            add hl,a
 183+ 85D6 29               add hl,hl
 184+ 85D7 29               add hl,hl
 185+ 85D8 29               add hl,hl
 186+ 85D9 3A F4 8C         ld a,(current_scroll)
 187+ 85DC 47               ld b,a
 188+ 85DD 3E 08            ld a,8
 189+ 85DF 90               sub b
 190+ 85E0 ED 31            add hl,a
 191+ 85E2 DD 75 04         ld (ix+4),l
 192+ 85E5 DD 74 05         ld (ix+5),h ;X8
 193+ 85E8
 194+ 85E8 C9               ret
 195+ 85E9
 196+ 85E9
 197+ 85E9              animate_object:
 198+ 85E9 DD 7E 08         ld a,(ix+8)
 199+ 85EC E6 C0            and %11000000
 200+ 85EE 47               ld b,a
 201+ 85EF DD 7E 08         ld a,(ix+8)
 202+ 85F2 E6 3F            and %00111111
 203+ 85F4 DD AE 0B         xor (ix+11)
 204+ 85F7 80               add a,b
 205+ 85F8 DD 77 08         ld (ix+8),a
 206+ 85FB C9               ret
 207+ 85FC
 208+ 85FC
 209+ 85FC              object_draw:
 210+ 85FC DD 7E 00         ld a,(ix)
 211+ 85FF FE 01            cp TRUE
 212+ 8601 C0               ret nz
 213+ 8602              obj_drw:
 214+ 8602 DD 7E 0A         ld a,(ix+10)
 215+ 8605 ED 92 34         nextreg $34,a
 216+ 8608
 217+ 8608                  ;attr 0
 218+ 8608 DD 7E 04         ld a,(ix+4)
 219+ 860B ED 92 35         nextreg $35,a
 220+ 860E
 221+ 860E                  ;attr 1
 222+ 860E DD 7E 06         ld a,(ix+6)
 223+ 8611 ED 92 36         nextreg $36,a
 224+ 8614
 225+ 8614                  ;attr 2
 226+ 8614 DD 7E 07         ld a,(ix+7)
 227+ 8617 47               ld b,a
 228+ 8618 DD 7E 05         ld a,(ix+5)
 229+ 861B B0               or b
 230+ 861C ED 92 37         nextreg $37,a
 231+ 861F
 232+ 861F                  ;attr 3
 233+ 861F DD 7E 08         ld a,(ix+8)
 234+ 8622 ED 92 38         nextreg $38,a
 235+ 8625
 236+ 8625                  ;attr 4
 237+ 8625 DD 7E 09         ld a,(ix+9)
 238+ 8628 ED 92 39         nextreg $39,a
 239+ 862B
 240+ 862B C9               ret
 241+ 862C
 242+ 862C
 243+ 862C
 244+ 862C
 245+ 862C
 246+ 862C
 247+ 862C
 248+ 862C              handle_behaviour:
 249+ 862C DD 7E 00         ld a,(ix)
 250+ 862F FE 00            cp FALSE
 251+ 8631 C8               ret z
 252+ 8632
 253+ 8632 DD 7E 01         ld a,(ix+1)
 254+ 8635 FE 01            cp OBJECT_GHOST
 255+ 8637 CA 40 86         jp z, handle_behaviour_ghost
 256+ 863A FE 02            cp OBJECT_GHOST_WALKER
 257+ 863C CA 50 86         jp z, handle_behaviour_ghost_walker
 258+ 863F C9               ret
 259+ 8640
 260+ 8640
 261+ 8640              handle_behaviour_ghost:
 262+ 8640 DD 7E 0C         ld a,(ix+12)
 263+ 8643 FE 00            cp LEFT
 264+ 8645 CA 4E 86         jp z,ghost_move_left
 265+ 8648 FE 01            cp RIGHT
 266+ 864A CA 4F 86         jp z,ghost_move_right
 267+ 864D
 268+ 864D C9               ret
 269+ 864E
 270+ 864E              ghost_move_left:
 271+ 864E                  ; ld a,(ix+2)
 272+ 864E                  ; dec a
 273+ 864E                  ; ld (ix+2),a
 274+ 864E
 275+ 864E                  ; ; ld a,h
 276+ 864E                  ; ; or l
 277+ 864E                  ; ; ret nz
 278+ 864E
 279+ 864E                  ; ; ld a,RIGHT
 280+ 864E                  ; ; ld (ix+12),a
 281+ 864E
 282+ 864E C9               ret
 283+ 864F              ghost_move_right:
 284+ 864F                  ; ld h,(ix+14)
 285+ 864F                  ; ld l,(ix+15)
 286+ 864F                  ; add hl,GHOST_SPEED
 287+ 864F                  ; ld (ix+14),h
 288+ 864F                  ; ld (ix+15),l
 289+ 864F
 290+ 864F                  ; ld a,l
 291+ 864F                  ; cp GHOST_MAX_MOVEMENT_X
 292+ 864F                  ; ret nz
 293+ 864F
 294+ 864F                  ; ld a,LEFT
 295+ 864F                  ; ld (ix+12),a
 296+ 864F
 297+ 864F
 298+ 864F C9               ret
 299+ 8650
 300+ 8650
 301+ 8650              handle_behaviour_ghost_walker:
 302+ 8650 DD 7E 02         ld a,(ix+2)
 303+ 8653 3D               dec a
 304+ 8654 DD 77 02         ld (ix+2),a
 305+ 8657
 306+ 8657 47               ld b,a
 307+ 8658 3A F6 8C         ld a,(cam_x)
 308+ 865B B8               cp b
 309+ 865C D8               ret c
 310+ 865D
 311+ 865D
 312+ 865D                  ;kill ghost
 313+ 865D DD 36 01 64      ld (ix+1),OBJECT_DEAD
 314+ 8661 CD 86 85         call obj_set_not_inview
 315+ 8664
 316+ 8664 C9               ret
 317+ 8665
 318+ 8665
 319+ 8665
 320+ 8665
 321+ 8665
 322+ 8665              object_check_collision_player
 323+ 8665 DD 7E 00         ld a,(ix)
 324+ 8668 FE 01            cp TRUE
 325+ 866A C0               ret nz
 326+ 866B
 327+ 866B DD 7E 01         ld a,(ix+1)
 328+ 866E FE 01            cp OBJECT_GHOST
 329+ 8670 CA 9A 86         jp z,checkcollision_player_ghost
 330+ 8673 FE 02            cp OBJECT_GHOST_WALKER
 331+ 8675 CA B5 86         jp z,checkcollision_player_ghostwalker
 332+ 8678              obj_check_coll_y:
 333+ 8678                  ;player above object:
 334+ 8678 DD 7E 06         ld a,(ix+6)
 335+ 867B 47               ld b,a
 336+ 867C 3A 97 80         ld a,(py)
 337+ 867F C6 20            add a,PLAYER_HEIGHT
 338+ 8681 B8               cp b
 339+ 8682 38 15            jr c,obj_nocollision
 340+ 8684
 341+ 8684                  ;player below object:
 342+ 8684 3A 97 80         ld a,(py)
 343+ 8687 47               ld b,a
 344+ 8688 DD 7E 06         ld a,(ix+6)
 345+ 868B C6 10            add a,OBJECT_HEIGHT
 346+ 868D B8               cp b
 347+ 868E 38 09            jr c,obj_nocollision
 348+ 8690
 349+ 8690 2A 95 80         ld hl,(px)
 350+ 8693 DD 7E 05         ld a,(ix+5)
 351+ 8696 BC               cp h
 352+ 8697 20 00            jr nz,obj_nocollision
 353+ 8699
 354+ 8699                  ;collided...
 355+ 8699
 356+ 8699              obj_nocollision:
 357+ 8699 C9               ret
 358+ 869A
 359+ 869A              checkcollision_player_ghost:
 360+ 869A                  ;x axis collision check:
 361+ 869A DD 66 04         ld h,(ix+4)
 362+ 869D DD 6E 05         ld l,(ix+5)
 363+ 86A0 DD 56 0E         ld d,(ix+14)
 364+ 86A3 DD 5E 0F         ld e,(ix+15)
 365+ 86A6 19               add hl,de
 366+ 86A7 ED 5B 95 80      ld de,(px)
 367+ 86AB B7               or a
 368+ 86AC ED 52            sbc hl,de
 369+ 86AE 7D               ld a,l
 370+ 86AF FE 1C            cp 28
 371+ 86B1 DA 78 86         jp c,obj_check_coll_y
 372+ 86B4 C9               ret
 373+ 86B5
 374+ 86B5              checkcollision_player_ghostwalker:
 375+ 86B5                  ;x axis collision check:
 376+ 86B5 DD 66 04         ld h,(ix+4)
 377+ 86B8 DD 6E 05         ld l,(ix+5)
 378+ 86BB DD 56 0E         ld d,(ix+14)
 379+ 86BE DD 5E 0F         ld e,(ix+15)
 380+ 86C1 B7               or a
 381+ 86C2 ED 52            sbc hl,de
 382+ 86C4 ED 5B 95 80      ld de,(px)
 383+ 86C8 B7               or a
 384+ 86C9 ED 52            sbc hl,de
 385+ 86CB 7D               ld a,l
 386+ 86CC FE 1C            cp 28
 387+ 86CE DA 78 86         jp c,obj_check_coll_y
 388+ 86D1 C9               ret
# file closed: src/objects.asm
  46  86D2              	include 'game.asm'
# file opened: src/game.asm
   1+ 86D2 00           frame_counter db 0
   2+ 86D3
   3+ 86D3              game_init:
   4+ 86D3 CD F9 8C         call layer2_init
   5+ 86D6 ED 91 56 0E      nextreg $56,14
   6+ 86DA
   7+ 86DA 06 16            ld b,WBOY_PATTERN_COUNT
   8+ 86DC 21 00 C0         ld hl,$c000
   9+ 86DF CD 55 88         call sprites_init
  10+ 86E2
  11+ 86E2 CD 1A 8D         call tiles_init
  12+ 86E5 CD A8 80         call player_init
  13+ 86E8 CD 0B 8F         call projectiles_init
  14+ 86EB
  15+ 86EB C9               ret
  16+ 86EC
  17+ 86EC
  18+ 86EC              game_update:
  19+ 86EC 06 0B            ld b,11
  20+ 86EE CD 39 80         call WaitRasterLine
  21+ 86F1
  22+ 86F1 3A D2 86         ld a,(frame_counter)
  23+ 86F4 3C               inc a
  24+ 86F5 32 D2 86         ld (frame_counter),a
  25+ 86F8
  26+ 86F8 CD 63 8D         call layer2_update
  27+ 86FB CD 25 87         call check_keys
  28+ 86FE CD BA 81         call player_update
  29+ 8701 CD AC 80         call draw_debug_sprite
  30+ 8704 CD 1B 85         call objects_update
  31+ 8707 CD 51 8F         call projectiles_update
  32+ 870A
  33+ 870A C9               ret
  34+ 870B
  35+ 870B              game_draw:
  36+ 870B CD 33 81         call player_draw
  37+ 870E CD 30 85         call objects_draw
  38+ 8711 CD 66 8F         call projectiles_draw
  39+ 8714 C9               ret
  40+ 8715
  41+ 8715
# file closed: src/game.asm
  47  8715              	include 'retrotools\keycacher.asm'
# file opened: src/retrotools/keycacher.asm
   1+ 8715              ;Usage:
   2+ 8715              ;first call check_keys
   3+ 8715              ;compare states of cached values (eg. keypressed_W) before doing movement/actions etc.
   4+ 8715              ;after all actions, call reset_keys
   5+ 8715
   6+ 8715
   7+ 8715              ; 32766 B, N, M, Symbol Shift, Space
   8+ 8715              ; 49150 H, J, K, L, Enter
   9+ 8715              ; 57342 Y, U, I, O, P
  10+ 8715              ; 61438 6, 7, 8, 9, 0
  11+ 8715              ; 63486 5, 4, 3, 2, 1
  12+ 8715              ; 64510 T, R, E, W, Q
  13+ 8715              ; 65022 G, F, D, S, A
  14+ 8715              ; 65278 V, C, X, Z, Caps Shift
  15+ 8715
  16+ 8715
  17+ 8715 00           keypressed_W db FALSE
  18+ 8716 00           keypressed_W_Held db FALSE
  19+ 8717 00           keypressed_A db FALSE
  20+ 8718 00           keypressed_A_Held db FALSE
  21+ 8719 00           keypressed_S db FALSE
  22+ 871A 00           keypressed_S_Held db FALSE
  23+ 871B 00           keypressed_D db FALSE
  24+ 871C
  25+ 871C 00           keypressed_F db FALSE
  26+ 871D 00           keypressed_F_Held db FALSE
  27+ 871E 00           keypressed_I db FALSE
  28+ 871F 00           keypressed_Q db FALSE
  29+ 8720 00           keypressed_Q_Held db FALSE
  30+ 8721 00           keypressed_O db FALSE
  31+ 8722 00           keypressed_P db FALSE
  32+ 8723 00           keypressed_Space db FALSE
  33+ 8724 00           keypressed_Space_Held db FALSE
  34+ 8725
  35+ 8725              check_keys:
  36+ 8725 3A 15 87         ld a,(keypressed_W)
  37+ 8728 FE 01            cp TRUE
  38+ 872A CC DD 87         call z,set_W_Held
  39+ 872D C4 E3 87         call nz, reset_W_Held
  40+ 8730
  41+ 8730 3A 19 87         ld a,(keypressed_S)
  42+ 8733 FE 01            cp TRUE
  43+ 8735 CC FF 87         call z,set_S_Held
  44+ 8738 C4 05 88         call nz, reset_S_Held
  45+ 873B
  46+ 873B 3A 1C 87         ld a,(keypressed_F)
  47+ 873E FE 01            cp TRUE
  48+ 8740 CC 16 88         call z, set_F_Held
  49+ 8743 C4 1C 88         call nz, reset_F_Held
  50+ 8746
  51+ 8746 3A 17 87         ld a,(keypressed_A)
  52+ 8749 FE 01            cp TRUE
  53+ 874B CC EE 87         call z,set_A_Held
  54+ 874E C4 F4 87         call nz, reset_A_Held
  55+ 8751
  56+ 8751 3A 1F 87         ld a,(keypressed_Q)
  57+ 8754 FE 01            cp TRUE
  58+ 8756 CC 2D 88         call z,set_Q_Held
  59+ 8759 C4 33 88         call nz, reset_Q_Held
  60+ 875C
  61+ 875C 3A 23 87         ld a,(keypressed_Space)
  62+ 875F FE 01            cp TRUE
  63+ 8761 CC 4A 88         call z,set_Space_Held
  64+ 8764 C4 50 88         call nz, reset_Space_Held
  65+ 8767
  66+ 8767
  67+ 8767
  68+ 8767 AF               xor a
  69+ 8768 32 15 87         ld (keypressed_W),a
  70+ 876B 32 17 87         ld (keypressed_A),a
  71+ 876E 32 19 87         ld (keypressed_S),a
  72+ 8771 32 1B 87         ld (keypressed_D),a
  73+ 8774 32 1C 87         ld (keypressed_F),a
  74+ 8777 32 1E 87         ld (keypressed_I),a
  75+ 877A 32 1F 87         ld (keypressed_Q),a
  76+ 877D 32 21 87         ld (keypressed_O),a
  77+ 8780 32 22 87         ld (keypressed_P),a
  78+ 8783 32 23 87         ld (keypressed_Space),a
  79+ 8786
  80+ 8786
  81+ 8786 01 FE FD         ld bc,0xFDFE ;ASDFG
  82+ 8789 ED 78            in a,(c)
  83+ 878B 1F               rra
  84+ 878C F5               push af
  85+ 878D D4 E8 87         call nc, set_A
  86+ 8790 F1               pop af
  87+ 8791 1F               rra
  88+ 8792 F5               push af
  89+ 8793 D4 F9 87         call nc, set_S
  90+ 8796 F1               pop af
  91+ 8797 1F               rra
  92+ 8798 F5               push af
  93+ 8799 D4 0A 88         call nc, set_D
  94+ 879C F1               pop af
  95+ 879D 1F               rra
  96+ 879E F5               push af
  97+ 879F D4 10 88         call nc, set_F
  98+ 87A2 F1               pop af
  99+ 87A3
 100+ 87A3 01 FE FB         ld bc,0xFBFE ;QWERT
 101+ 87A6 ED 78            in a,(c)
 102+ 87A8 1F               rra ;Q
 103+ 87A9 F5               push af
 104+ 87AA D4 27 88         call nc, set_Q
 105+ 87AD F1               pop af
 106+ 87AE 1F               rra ;W
 107+ 87AF F5               push af
 108+ 87B0 D4 D7 87         call nc, set_W
 109+ 87B3 F1               pop af
 110+ 87B4
 111+ 87B4 01 FE DF         ld bc,0xDFFE ;POIUY
 112+ 87B7 ED 78            in a,(c)
 113+ 87B9 1F               rra ;P
 114+ 87BA F5               push af
 115+ 87BB D4 3E 88         call nc, set_P
 116+ 87BE F1               pop af
 117+ 87BF 1F               rra ;O
 118+ 87C0 F5               push af
 119+ 87C1 D4 38 88         call nc, set_O
 120+ 87C4 F1               pop af
 121+ 87C5 1F               rra ;I
 122+ 87C6 F5               push af
 123+ 87C7 D4 21 88         call nc, set_I
 124+ 87CA F1               pop af
 125+ 87CB
 126+ 87CB 01 FE 7F         ld bc,32766
 127+ 87CE ED 78            in a,(c)
 128+ 87D0 1F               rra
 129+ 87D1 F5               push af
 130+ 87D2 D4 44 88         call nc, set_Space
 131+ 87D5 F1               pop af
 132+ 87D6
 133+ 87D6
 134+ 87D6 C9               ret
 135+ 87D7
 136+ 87D7              set_W:
 137+ 87D7 3E 01            ld a,TRUE
 138+ 87D9 32 15 87         ld (keypressed_W),a
 139+ 87DC C9               ret
 140+ 87DD
 141+ 87DD              set_W_Held:
 142+ 87DD 3E 01            ld a,TRUE
 143+ 87DF 32 16 87         ld (keypressed_W_Held),a
 144+ 87E2 C9               ret
 145+ 87E3              reset_W_Held:
 146+ 87E3 AF               xor a
 147+ 87E4 32 16 87         ld (keypressed_W_Held),a
 148+ 87E7 C9               ret
 149+ 87E8
 150+ 87E8              set_A:
 151+ 87E8 3E 01            ld a,TRUE
 152+ 87EA 32 17 87         ld (keypressed_A),a
 153+ 87ED C9               ret
 154+ 87EE
 155+ 87EE              set_A_Held:
 156+ 87EE 3E 01            ld a,TRUE
 157+ 87F0 32 18 87         ld (keypressed_A_Held),a
 158+ 87F3 C9               ret
 159+ 87F4
 160+ 87F4              reset_A_Held:
 161+ 87F4 AF               xor a
 162+ 87F5 32 18 87         ld (keypressed_A_Held),a
 163+ 87F8 C9               ret
 164+ 87F9
 165+ 87F9              set_S:
 166+ 87F9 3E 01            ld a,TRUE
 167+ 87FB 32 19 87         ld (keypressed_S),a
 168+ 87FE C9               ret
 169+ 87FF              set_S_Held:
 170+ 87FF 3E 01            ld a,TRUE
 171+ 8801 32 1A 87         ld (keypressed_S_Held),a
 172+ 8804 C9               ret
 173+ 8805              reset_S_Held:
 174+ 8805 AF               xor a
 175+ 8806 32 1A 87         ld (keypressed_S_Held),a
 176+ 8809 C9               ret
 177+ 880A
 178+ 880A              set_D:
 179+ 880A 3E 01            ld a,TRUE
 180+ 880C 32 1B 87         ld (keypressed_D),a
 181+ 880F C9               ret
 182+ 8810
 183+ 8810              set_F:
 184+ 8810 3E 01            ld a,TRUE
 185+ 8812 32 1C 87         ld (keypressed_F),a
 186+ 8815 C9               ret
 187+ 8816
 188+ 8816
 189+ 8816              set_F_Held:
 190+ 8816 3E 01            ld a,TRUE
 191+ 8818 32 1D 87         ld (keypressed_F_Held),a
 192+ 881B C9               ret
 193+ 881C
 194+ 881C              reset_F_Held:
 195+ 881C AF               xor a
 196+ 881D 32 1D 87         ld (keypressed_F_Held),a
 197+ 8820 C9               ret
 198+ 8821
 199+ 8821
 200+ 8821
 201+ 8821              set_I:
 202+ 8821 3E 01            ld a,TRUE
 203+ 8823 32 1E 87         ld (keypressed_I),a
 204+ 8826 C9               ret
 205+ 8827
 206+ 8827
 207+ 8827              set_Q:
 208+ 8827 3E 01            ld a,TRUE
 209+ 8829 32 1F 87         ld (keypressed_Q),a
 210+ 882C C9               ret
 211+ 882D
 212+ 882D              set_Q_Held:
 213+ 882D 3E 01            ld a,TRUE
 214+ 882F 32 20 87         ld (keypressed_Q_Held),a
 215+ 8832 C9               ret
 216+ 8833
 217+ 8833              reset_Q_Held:
 218+ 8833 AF               xor a
 219+ 8834 32 20 87         ld (keypressed_Q_Held),a
 220+ 8837 C9               ret
 221+ 8838
 222+ 8838              set_O:
 223+ 8838 3E 01            ld a,TRUE
 224+ 883A 32 21 87         ld (keypressed_O),a
 225+ 883D C9               ret
 226+ 883E
 227+ 883E              set_P:
 228+ 883E 3E 01            ld a,TRUE
 229+ 8840 32 22 87         ld (keypressed_P),a
 230+ 8843 C9               ret
 231+ 8844
 232+ 8844              set_Space:
 233+ 8844 3E 01            ld a,TRUE
 234+ 8846 32 23 87         ld (keypressed_Space),a
 235+ 8849 C9               ret
 236+ 884A              set_Space_Held:
 237+ 884A 3E 01            ld a,TRUE
 238+ 884C 32 24 87         ld (keypressed_Space_Held),a
 239+ 884F C9               ret
 240+ 8850
 241+ 8850              reset_Space_Held:
 242+ 8850 AF               xor a
 243+ 8851 32 24 87         ld (keypressed_Space_Held),a
 244+ 8854 C9               ret
 245+ 8855
# file closed: src/retrotools/keycacher.asm
  48  8855              	include 'retrotools\spritetools.asm'
# file opened: src/retrotools/spritetools.asm
   1+ 8855              VISIBILITY equ %10000000
   2+ 8855              EXTENDED equ %01000000
   3+ 8855              MIRROR_X equ %00001000
   4+ 8855              MIRROR_Y equ %00000100
   5+ 8855
   6+ 8855              ; Sprite Attribute 0
   7+ 8855              ;     X X X X X X X X
   8+ 8855
   9+ 8855              ; Sprite Attribute 1
  10+ 8855              ;     Y Y Y Y Y Y Y Y
  11+ 8855
  12+ 8855              ; Sprite Attribute 2
  13+ 8855              ;     P P P P XM YM R X8/PR
  14+ 8855
  15+ 8855              ; Sprite Attribute 3
  16+ 8855              ;     V E N5 N4 N3 N2 N1 N0 (NNNNN=Pattern ID)
  17+ 8855
  18+ 8855              ; Sprite Attribute 4
  19+ 8855              ; A. Extended Anchor Sprite
  20+ 8855              ;     H N6 T X X Y Y Y8
  21+ 8855              ; B. Relative Sprite, Composite Type
  22+ 8855              ;     0 1 N6 X X Y Y PO
  23+ 8855              ; C. Relative Sprite, Unified Type
  24+ 8855              ;     0 1 N6 0 0 0 0 PO
  25+ 8855
  26+ 8855
  27+ 8855
  28+ 8855              ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  29+ 8855              ;; Upload spritesheet to 16K FPGA Internal Memory
  30+ 8855              ;; Inputs: B=Sprite Count HL=Sprite data Ptr
  31+ 8855              ;; Outputs: none
  32+ 8855              ;; Destroys: A,BC,HL
  33+ 8855              ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  34+ 8855              sprites_init:
  35+ 8855 C5           	push bc
  36+ 8856 3E 00        	ld a,0
  37+ 8858 01 3B 30     	ld bc,$303b
  38+ 885B ED 79        	out (c),a
  39+ 885D C1           	pop bc
  40+ 885E              is_loop:
  41+ 885E C5           	push bc
  42+ 885F 01 5B 00     	ld bc,$005b
  43+ 8862 ED B3        	otir
  44+ 8864 C1           	pop bc
  45+ 8865 10 F7        	djnz is_loop
  46+ 8867 C9           	ret
# file closed: src/retrotools/spritetools.asm
  49  8868              	include 'levels\levels.asm'
# file opened: src/levels/levels.asm
   1+ 8868              ; another way to check solids (if not in order)
   2+ 8868              super_solids:
   3+ 8868 11 13 31         db 17,19,49
   4+ 886B
   5+ 886B              SOLIDS_LENGTH equ 3
   6+ 886B
   7+ 886B              ;INPUTS:
   8+ 886B              ;A=value to test against 'solids' array
   9+ 886B              check_solid:
  10+ 886B 21 68 88         ld hl,super_solids
  11+ 886E 01 03 00         ld bc,SOLIDS_LENGTH
  12+ 8871 ED B1            cpir
  13+ 8873 C9               ret
  14+ 8874
  15+ 8874
  16+ 8874              ;Platform::
  17+ 8874              ;01 03 03 01*
  18+ 8874              ;17 19 19 17*
  19+ 8874              ;02 04 04 02*
  20+ 8874              ;18 20 20 18*
  21+ 8874
  22+ 8874
  23+ 8874
  24+ 8874
  25+ 8874              superlevel:
  26+ 8874 00 00 00 00      db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
  26+ 8878 00 00 00 00
  26+ 887C 00 00 00 00
  26+ 8880 00 00 00 00
  26+ 8884 00 00 00 00
  26+ 8888 00 00 00 00
  26+ 888C 00 00 00 00
  26+ 8890 00 00 00 00
  26+ 8894 00 00 00 00
  26+ 8898 00 00 00 00
  26+ 889C 00 00 00 00
  26+ 88A0 00 00 00 00
  26+ 88A4 00 00 00 00
  26+ 88A8 00 00 00 00
  26+ 88AC 00 00 00 00
  26+ 88B0 00 00 00 00
  26+ 88B4 00 00 00 00
  26+ 88B8 00 00 00 00
  26+ 88BC 00 00 00 00
  26+ 88C0 00 00 00 00
  27+ 88C4 00 00 00 00      db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,01,03,03,03,33,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
  27+ 88C8 00 00 00 00
  27+ 88CC 00 00 00 00
  27+ 88D0 00 00 00 00
  27+ 88D4 00 00 00 00
  27+ 88D8 00 00 00 00
  27+ 88DC 00 00 00 00
  27+ 88E0 00 00 00 00
  27+ 88E4 00 00 00 00
  27+ 88E8 00 00 00 00
  27+ 88EC 00 00 00 00
  27+ 88F0 00 00 00 00
  27+ 88F4 00 00 00 00
  27+ 88F8 00 01 03 03
  27+ 88FC 03 21 00 00
  27+ 8900 00 00 00 00
  27+ 8904 00 00 00 00
  27+ 8908 00 00 00 00
  27+ 890C 00 00 00 00
  27+ 8910 00 00 00 00
  28+ 8914 00 00 00 00      db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,17,19,19,19,49,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
  28+ 8918 00 00 00 00
  28+ 891C 00 00 00 00
  28+ 8920 00 00 00 00
  28+ 8924 00 00 00 00
  28+ 8928 00 00 00 00
  28+ 892C 00 00 00 00
  28+ 8930 00 00 00 00
  28+ 8934 00 00 00 00
  28+ 8938 00 00 00 00
  28+ 893C 00 00 00 00
  28+ 8940 00 00 00 00
  28+ 8944 00 00 00 00
  28+ 8948 00 11 13 13
  28+ 894C 13 31 00 00
  28+ 8950 00 00 00 00
  28+ 8954 00 00 00 00
  28+ 8958 00 00 00 00
  28+ 895C 00 00 00 00
  28+ 8960 00 00 00 00
  29+ 8964 00 00 00 00      db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,01,33,00,00,01,03,03,03,33,00,02,20,20,20,34,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
  29+ 8968 00 00 00 00
  29+ 896C 00 00 00 00
  29+ 8970 00 00 00 00
  29+ 8974 00 00 00 00
  29+ 8978 00 00 00 00
  29+ 897C 00 00 00 00
  29+ 8980 00 00 00 00
  29+ 8984 00 00 00 00
  29+ 8988 00 00 00 00
  29+ 898C 00 00 00 01
  29+ 8990 21 00 00 01
  29+ 8994 03 03 03 21
  29+ 8998 00 02 14 14
  29+ 899C 14 22 00 00
  29+ 89A0 00 00 00 00
  29+ 89A4 00 00 00 00
  29+ 89A8 00 00 00 00
  29+ 89AC 00 00 00 00
  29+ 89B0 00 00 00 00
  30+ 89B4 00 00 00 00      db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,01,03,03,03,03,03,03,03,03,03,03,03,33,00,00,00,00,00,00,00,00,00,00,17,19,00,00,17,19,19,19,49,00,18,19,19,19,50,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
  30+ 89B8 00 00 00 00
  30+ 89BC 00 00 00 00
  30+ 89C0 00 00 00 00
  30+ 89C4 00 00 00 00
  30+ 89C8 01 03 03 03
  30+ 89CC 03 03 03 03
  30+ 89D0 03 03 03 03
  30+ 89D4 21 00 00 00
  30+ 89D8 00 00 00 00
  30+ 89DC 00 00 00 11
  30+ 89E0 13 00 00 11
  30+ 89E4 13 13 13 31
  30+ 89E8 00 12 13 13
  30+ 89EC 13 32 00 00
  30+ 89F0 00 00 00 00
  30+ 89F4 00 00 00 00
  30+ 89F8 00 00 00 00
  30+ 89FC 00 00 00 00
  30+ 8A00 00 00 00 00
  31+ 8A04 00 00 00 00      db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,17,19,19,19,19,19,19,19,19,19,19,19,49,00,00,00,00,00,01,03,03,03,03,02,49,00,00,02,20,20,20,34,00,02,20,20,20,34,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
  31+ 8A08 00 00 00 00
  31+ 8A0C 00 00 00 00
  31+ 8A10 00 00 00 00
  31+ 8A14 00 00 00 00
  31+ 8A18 11 13 13 13
  31+ 8A1C 13 13 13 13
  31+ 8A20 13 13 13 13
  31+ 8A24 31 00 00 00
  31+ 8A28 00 00 01 03
  31+ 8A2C 03 03 03 02
  31+ 8A30 31 00 00 02
  31+ 8A34 14 14 14 22
  31+ 8A38 00 02 14 14
  31+ 8A3C 14 22 00 00
  31+ 8A40 00 00 00 00
  31+ 8A44 00 00 00 00
  31+ 8A48 00 00 00 00
  31+ 8A4C 00 00 00 00
  31+ 8A50 00 00 00 00
  32+ 8A54 00 01 03 03      db 00,01,03,03,03,03,03,33,00,00,01,03,03,03,03,03,03,03,03,33,02,20,20,20,20,20,20,20,20,20,20,20,34,03,03,03,33,00,17,19,19,19,19,19,34,00,00,18,19,19,19,50,00,18,19,19,19,50,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
  32+ 8A58 03 03 03 21
  32+ 8A5C 00 00 01 03
  32+ 8A60 03 03 03 03
  32+ 8A64 03 03 03 21
  32+ 8A68 02 14 14 14
  32+ 8A6C 14 14 14 14
  32+ 8A70 14 14 14 14
  32+ 8A74 22 03 03 03
  32+ 8A78 21 00 11 13
  32+ 8A7C 13 13 13 13
  32+ 8A80 22 00 00 12
  32+ 8A84 13 13 13 32
  32+ 8A88 00 12 13 13
  32+ 8A8C 13 32 00 00
  32+ 8A90 00 00 00 00
  32+ 8A94 00 00 00 00
  32+ 8A98 00 00 00 00
  32+ 8A9C 00 00 00 00
  32+ 8AA0 00 00 00 00
  33+ 8AA4 00 11 13 13      db 00,17,19,19,19,19,19,49,00,00,17,19,19,19,19,19,19,19,19,49,18,19,19,19,19,19,19,19,19,19,19,19,50,19,19,19,49,00,02,20,20,20,20,20,50,00,00,02,20,20,20,34,00,02,20,20,20,34,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
  33+ 8AA8 13 13 13 31
  33+ 8AAC 00 00 11 13
  33+ 8AB0 13 13 13 13
  33+ 8AB4 13 13 13 31
  33+ 8AB8 12 13 13 13
  33+ 8ABC 13 13 13 13
  33+ 8AC0 13 13 13 13
  33+ 8AC4 32 13 13 13
  33+ 8AC8 31 00 02 14
  33+ 8ACC 14 14 14 14
  33+ 8AD0 32 00 00 02
  33+ 8AD4 14 14 14 22
  33+ 8AD8 00 02 14 14
  33+ 8ADC 14 22 00 00
  33+ 8AE0 00 00 00 00
  33+ 8AE4 00 00 00 00
  33+ 8AE8 00 00 00 00
  33+ 8AEC 00 00 00 00
  33+ 8AF0 00 00 00 00
  34+ 8AF4
  35+ 8AF4
  36+ 8AF4              supertiles:
  37+ 8AF4 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR   ;supertile 0
  37+ 8AF8 00 00 00 00
  38+ 8AFC 02 00 03 00      db 2,TILE_ATTR_NOMIRROR,3,TILE_ATTR_NOMIRROR,34,TILE_ATTR_NOMIRROR,35,TILE_ATTR_NOMIRROR ;1
  38+ 8B00 22 00 23 00
  39+ 8B04 04 00 05 00      db 4,TILE_ATTR_NOMIRROR,5,TILE_ATTR_NOMIRROR,36,TILE_ATTR_NOMIRROR,37,TILE_ATTR_NOMIRROR ;2
  39+ 8B08 24 00 25 00
  40+ 8B0C 06 00 07 00      db 6,TILE_ATTR_NOMIRROR,7,TILE_ATTR_NOMIRROR,38,TILE_ATTR_NOMIRROR,39,TILE_ATTR_NOMIRROR ;3
  40+ 8B10 26 00 27 00
  41+ 8B14 08 00 09 00      db 8,TILE_ATTR_NOMIRROR,9,TILE_ATTR_NOMIRROR,40,TILE_ATTR_NOMIRROR,41,TILE_ATTR_NOMIRROR ;4
  41+ 8B18 28 00 29 00
  42+ 8B1C 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  42+ 8B20 00 00 00 00
  43+ 8B24 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  43+ 8B28 00 00 00 00
  44+ 8B2C 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  44+ 8B30 00 00 00 00
  45+ 8B34 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  45+ 8B38 00 00 00 00
  46+ 8B3C 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  46+ 8B40 00 00 00 00
  47+ 8B44 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  47+ 8B48 00 00 00 00
  48+ 8B4C 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  48+ 8B50 00 00 00 00
  49+ 8B54 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  49+ 8B58 00 00 00 00
  50+ 8B5C 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  50+ 8B60 00 00 00 00
  51+ 8B64 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  51+ 8B68 00 00 00 00
  52+ 8B6C 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  52+ 8B70 00 00 00 00
  53+ 8B74 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  53+ 8B78 00 00 00 00
  54+ 8B7C 42 00 43 00      db 66,TILE_ATTR_NOMIRROR,67,TILE_ATTR_NOMIRROR,98,TILE_ATTR_NOMIRROR,99,TILE_ATTR_NOMIRROR ;17
  54+ 8B80 62 00 63 00
  55+ 8B84 44 00 45 00      db 68,TILE_ATTR_NOMIRROR,69,TILE_ATTR_NOMIRROR,100,TILE_ATTR_NOMIRROR,101,TILE_ATTR_NOMIRROR ;18
  55+ 8B88 64 00 65 00
  56+ 8B8C 46 00 47 00      db 70,TILE_ATTR_NOMIRROR,71,TILE_ATTR_NOMIRROR,102,TILE_ATTR_NOMIRROR,103,TILE_ATTR_NOMIRROR ;19
  56+ 8B90 66 00 67 00
  57+ 8B94 48 00 49 00      db 72,TILE_ATTR_NOMIRROR,73,TILE_ATTR_NOMIRROR,104,TILE_ATTR_NOMIRROR,105,TILE_ATTR_NOMIRROR ;20
  57+ 8B98 68 00 69 00
  58+ 8B9C 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  58+ 8BA0 00 00 00 00
  59+ 8BA4 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  59+ 8BA8 00 00 00 00
  60+ 8BAC 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  60+ 8BB0 00 00 00 00
  61+ 8BB4 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  61+ 8BB8 00 00 00 00
  62+ 8BBC 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  62+ 8BC0 00 00 00 00
  63+ 8BC4 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  63+ 8BC8 00 00 00 00
  64+ 8BCC 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  64+ 8BD0 00 00 00 00
  65+ 8BD4 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  65+ 8BD8 00 00 00 00
  66+ 8BDC 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
  66+ 8BE0 00 00 00 00
  67+ 8BE4 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR ;30
  67+ 8BE8 00 00 00 00
  68+ 8BEC 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR ;31 - end of definitions
  68+ 8BF0 00 00 00 00
  69+ 8BF4 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR ;32 0*
  69+ 8BF8 00 08 00 08
  70+ 8BFC 03 08 02 08      db 3,TILE_ATTR_MIRROR,2,TILE_ATTR_MIRROR,35,TILE_ATTR_MIRROR,34,TILE_ATTR_MIRROR ;33 1*
  70+ 8C00 23 08 22 08
  71+ 8C04 05 08 04 08      db 5,TILE_ATTR_MIRROR,4,TILE_ATTR_MIRROR,37,TILE_ATTR_MIRROR,36,TILE_ATTR_MIRROR ;34 2*
  71+ 8C08 25 08 24 08
  72+ 8C0C 07 08 06 08      db 7,TILE_ATTR_MIRROR,6,TILE_ATTR_MIRROR,39,TILE_ATTR_MIRROR,38,TILE_ATTR_MIRROR ;35 3*
  72+ 8C10 27 08 26 08
  73+ 8C14 09 08 08 08      db 9,TILE_ATTR_MIRROR,8,TILE_ATTR_MIRROR,41,TILE_ATTR_MIRROR,40,TILE_ATTR_MIRROR ;36 4*
  73+ 8C18 29 08 28 08
  74+ 8C1C 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  74+ 8C20 00 08 00 08
  75+ 8C24 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  75+ 8C28 00 08 00 08
  76+ 8C2C 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  76+ 8C30 00 08 00 08
  77+ 8C34 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  77+ 8C38 00 08 00 08
  78+ 8C3C 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  78+ 8C40 00 08 00 08
  79+ 8C44 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  79+ 8C48 00 08 00 08
  80+ 8C4C 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  80+ 8C50 00 08 00 08
  81+ 8C54 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  81+ 8C58 00 08 00 08
  82+ 8C5C 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  82+ 8C60 00 08 00 08
  83+ 8C64 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  83+ 8C68 00 08 00 08
  84+ 8C6C 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  84+ 8C70 00 08 00 08
  85+ 8C74 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  85+ 8C78 00 08 00 08
  86+ 8C7C 43 08 42 08      db 67,TILE_ATTR_MIRROR,66,TILE_ATTR_MIRROR,99,TILE_ATTR_MIRROR,98,TILE_ATTR_MIRROR ;49 17*
  86+ 8C80 63 08 62 08
  87+ 8C84 45 08 44 08      db 69,TILE_ATTR_MIRROR,68,TILE_ATTR_MIRROR,101,TILE_ATTR_MIRROR,100,TILE_ATTR_MIRROR ;50 18*
  87+ 8C88 65 08 64 08
  88+ 8C8C 47 08 46 08      db 71,TILE_ATTR_MIRROR,70,TILE_ATTR_MIRROR,103,TILE_ATTR_MIRROR,102,TILE_ATTR_MIRROR ;19*
  88+ 8C90 67 08 66 08
  89+ 8C94 49 08 48 08      db 73,TILE_ATTR_MIRROR,72,TILE_ATTR_MIRROR,105,TILE_ATTR_MIRROR,104,TILE_ATTR_MIRROR ;20*
  89+ 8C98 69 08 68 08
  90+ 8C9C 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  90+ 8CA0 00 08 00 08
  91+ 8CA4 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  91+ 8CA8 00 08 00 08
  92+ 8CAC 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  92+ 8CB0 00 08 00 08
  93+ 8CB4 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  93+ 8CB8 00 08 00 08
  94+ 8CBC 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  94+ 8CC0 00 08 00 08
  95+ 8CC4 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  95+ 8CC8 00 08 00 08
  96+ 8CCC 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  96+ 8CD0 00 08 00 08
  97+ 8CD4 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  97+ 8CD8 00 08 00 08
  98+ 8CDC 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
  98+ 8CE0 00 08 00 08
  99+ 8CE4 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR ;30*
  99+ 8CE8 00 08 00 08
 100+ 8CEC 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR ;31*
 100+ 8CF0 00 08 00 08
 101+ 8CF4                  ;supertile 31 is last
 102+ 8CF4
 103+ 8CF4
 104+ 8CF4
# file closed: src/levels/levels.asm
  50  8CF4              	include 'levels\levelmanager.asm'
# file opened: src/levels/levelmanager.asm
   1+ 8CF4              TILE_DEFINITIONS_SIZE equ 4096
   2+ 8CF4
   3+ 8CF4
   4+ 8CF4              VIEW_WIDTH equ 40
   5+ 8CF4              VIEW_HEIGHT equ 32
   6+ 8CF4
   7+ 8CF4              VIEW_WIDTH_META equ 20
   8+ 8CF4
   9+ 8CF4              LEVEL_START_ADDRESS equ $4500 ;half way down
  10+ 8CF4              LEVEL_WIDTH_META equ 80
  11+ 8CF4              LEVEL_HEIGHT_META equ 8
  12+ 8CF4
  13+ 8CF4              OUT_OF_WORLD equ LEVEL_WIDTH_META+1
  14+ 8CF4
  15+ 8CF4
  16+ 8CF4              TILE_ATTR_NOMIRROR equ %00000000
  17+ 8CF4              TILE_ATTR_MIRROR equ %00001000
  18+ 8CF4
  19+ 8CF4
  20+ 8CF4
  21+ 8CF4 00           current_scroll db 0
  22+ 8CF5 01           scroll_direction db RIGHT
  23+ 8CF6
  24+ 8CF6              LEVEL_START equ 0
  25+ 8CF6
  26+ 8CF6 00           cam_x db LEVEL_START
  27+ 8CF7
  28+ 8CF7 40 01        layer2_scroll dw 320
  29+ 8CF9
  30+ 8CF9
  31+ 8CF9              layer2_init:
  32+ 8CF9                  CLIP_LAYER2 8,151,0,255 ;layer 2 is basically rotated to do 320x256 mode
  32+ 8CF9 3E 08       >		ld a,8
  32+ 8CFB ED 92 18    >		nextreg $18,a
  32+ 8CFE 3E 97       >		ld a,151
  32+ 8D00 ED 92 18    >		nextreg $18,a
  32+ 8D03 3E 00       >		ld a,0
  32+ 8D05 ED 92 18    >		nextreg $18,a
  32+ 8D08 3E FF       >		ld a,255
  32+ 8D0A ED 92 18    >		nextreg $18,a
  32+ 8D0D             >
  33+ 8D0D
  34+ 8D0D ED 91 70 10      nextreg $70, %00010000 ;bit5-4=320x256x8bpp mode
  35+ 8D11 ED 91 69 80      nextreg $69, %10000000 ;bit7=enable layer2
  36+ 8D15 ED 91 12 14  	nextreg $12,20 ;layer2 ram page register
  37+ 8D19 C9               ret
  38+ 8D1A
  39+ 8D1A              tiles_init:
  40+ 8D1A                  CLIPTILES 8,151,0,255
  40+ 8D1A 3E 08       >		ld a,8
  40+ 8D1C ED 92 1B    >		nextreg $1b,a
  40+ 8D1F 3E 97       >		ld a,151
  40+ 8D21 ED 92 1B    >		nextreg $1b,a
  40+ 8D24 3E 00       >		ld a,0
  40+ 8D26 ED 92 1B    >		nextreg $1b,a
  40+ 8D29 3E FF       >		ld a,255
  40+ 8D2B ED 92 1B    >		nextreg $1b,a
  40+ 8D2E             >
  41+ 8D2E CD 7D 8D         call tiles_set_palette
  42+ 8D31
  43+ 8D31                  ;load the tile defs
  44+ 8D31 ED 91 56 10      nextreg $56, 16
  45+ 8D35 21 00 C0         ld hl,$c000
  46+ 8D38 11 00 60         ld de,$6000
  47+ 8D3B 01 00 10         ld bc,TILE_DEFINITIONS_SIZE
  48+ 8D3E ED B0            ldir
  49+ 8D40
  50+ 8D40 ED 91 6B 80      nextreg $6b, %10000000
  51+ 8D44 ED 91 6C 00      nextreg $6c, 0
  52+ 8D48 ED 91 6E 40      nextreg $6e, $40
  53+ 8D4C ED 91 6F 60      nextreg $6f, $60
  54+ 8D50 ED 91 68 80      nextreg $68, %10000000
  55+ 8D54 ED 91 43 30      nextreg $43, %00110000
  56+ 8D58
  57+ 8D58 AF               xor a ;black
  58+ 8D59 ED 92 4C         nextreg $4c,a ;tilemap transparency colour
  59+ 8D5C ED 92 14         nextreg $14,a; global transparency colour
  60+ 8D5F
  61+ 8D5F CD 97 8D         call view_init
  62+ 8D62
  63+ 8D62 C9               ret
  64+ 8D63
  65+ 8D63
  66+ 8D63              layer2_update:
  67+ 8D63 2A F7 8C         ld hl,(layer2_scroll)
  68+ 8D66 7D               ld a,l
  69+ 8D67 ED 92 16         nextreg $16, a
  70+ 8D6A 7C               ld a,h
  71+ 8D6B ED 92 71         nextreg $71, a
  72+ 8D6E 2B               dec hl
  73+ 8D6F 2B               dec hl
  74+ 8D70
  75+ 8D70 22 F7 8C         ld (layer2_scroll),hl
  76+ 8D73 7C               ld a,h
  77+ 8D74 B5               or l
  78+ 8D75 C0               ret nz
  79+ 8D76
  80+ 8D76 21 40 01         ld hl,320
  81+ 8D79 22 F7 8C         ld (layer2_scroll),hl
  82+ 8D7C
  83+ 8D7C C9               ret
  84+ 8D7D
  85+ 8D7D
  86+ 8D7D
  87+ 8D7D
  88+ 8D7D              tiles_set_palette:
  89+ 8D7D 21 8F 91         ld hl,caveman_palette
  90+ 8D80 ED 91 43 30      nextreg $43,%00110000
  91+ 8D84 AF               xor a
  92+ 8D85 06 10            ld b,16
  93+ 8D87 ED 92 40         nextreg $40,a
  94+ 8D8A              uploadpal:
  95+ 8D8A 7E               ld a,(hl)
  96+ 8D8B ED 92 44         nextreg $44,a
  97+ 8D8E 23               inc hl
  98+ 8D8F 7E               ld a,(hl)
  99+ 8D90 ED 92 44         nextreg $44,a
 100+ 8D93 23               inc hl
 101+ 8D94 10 F4            djnz uploadpal
 102+ 8D96 C9               ret
 103+ 8D97
 104+ 8D97
 105+ 8D97              ;does 2 passes per 'map' line, due to 2 rows within each supertile
 106+ 8D97              view_init:
 107+ 8D97 DD 21 74 88      ld ix,superlevel ;point at level 'map' (in super tiles)
 108+ 8D9B 11 00 45         ld de,$4500 ;
 109+ 8D9E 0E 00            ld c,0
 110+ 8DA0              view_init_screen:
 111+ 8DA0 06 14            ld b,VIEW_WIDTH_META
 112+ 8DA2              view_init_line_pass1:
 113+ 8DA2 21 F4 8A         ld hl,supertiles
 114+ 8DA5 DD 7E 00         ld a,(ix)
 115+ 8DA8 87               add a,a
 116+ 8DA9 87               add a,a ;A*4 (supertile size)
 117+ 8DAA ED 31            add hl,a
 118+ 8DAC ED 31            add hl,a ;add twice to hl because supertile elements are 2 bytes each
 119+ 8DAE 7E               ld a,(hl)
 120+ 8DAF 12               ld (de),a
 121+ 8DB0 23               inc hl
 122+ 8DB1 13               inc de
 123+ 8DB2 7E               ld a,(hl)
 124+ 8DB3 12               ld (de),a
 125+ 8DB4 23               inc hl
 126+ 8DB5 13               inc de
 127+ 8DB6 7E               ld a,(hl)
 128+ 8DB7 12               ld (de),a
 129+ 8DB8 23               inc hl
 130+ 8DB9 13               inc de
 131+ 8DBA 7E               ld a,(hl)
 132+ 8DBB 12               ld (de),a
 133+ 8DBC 13               inc de
 134+ 8DBD DD 23            inc ix
 135+ 8DBF 10 E1            djnz view_init_line_pass1
 136+ 8DC1 06 14            ld b,VIEW_WIDTH_META
 137+ 8DC3              view_init_golineback:
 138+ 8DC3 DD 2B            dec ix
 139+ 8DC5 10 FC            djnz view_init_golineback
 140+ 8DC7 06 14            ld b,VIEW_WIDTH_META
 141+ 8DC9              view_init_line_pass2:
 142+ 8DC9 21 F4 8A         ld hl,supertiles
 143+ 8DCC DD 7E 00         ld a,(ix)
 144+ 8DCF 87               add a,a
 145+ 8DD0 87               add a,a ;A*4 (supertile size)
 146+ 8DD1 ED 31            add hl,a
 147+ 8DD3 ED 31            add hl,a
 148+ 8DD5 3E 04            ld a,4
 149+ 8DD7 ED 31            add hl,a
 150+ 8DD9 7E               ld a,(hl)
 151+ 8DDA 12               ld (de),a
 152+ 8DDB 23               inc hl
 153+ 8DDC 13               inc de
 154+ 8DDD 7E               ld a,(hl)
 155+ 8DDE 12               ld (de),a
 156+ 8DDF 23               inc hl
 157+ 8DE0 13               inc de
 158+ 8DE1 7E               ld a,(hl)
 159+ 8DE2 12               ld (de),a
 160+ 8DE3 23               inc hl
 161+ 8DE4 13               inc de
 162+ 8DE5 7E               ld a,(hl)
 163+ 8DE6 12               ld (de),a
 164+ 8DE7 13               inc de
 165+ 8DE8 DD 23            inc ix
 166+ 8DEA 10 DD            djnz view_init_line_pass2
 167+ 8DEC
 168+ 8DEC D5               push de
 169+ 8DED 11 3C 00         ld de,LEVEL_WIDTH_META-VIEW_WIDTH_META
 170+ 8DF0 DD 19            add ix,de
 171+ 8DF2 D1               pop de
 172+ 8DF3 0C               inc c
 173+ 8DF4 79               ld a,c
 174+ 8DF5 FE 08            cp LEVEL_HEIGHT_META
 175+ 8DF7 DA A0 8D         jp c,view_init_screen
 176+ 8DFA C9               ret
 177+ 8DFB
 178+ 8DFB
 179+ 8DFB              MAX_SCROLL equ 16
 180+ 8DFB
 181+ 8DFB
 182+ 8DFB              scroll_left:
 183+ 8DFB 3A F5 8C         ld a,(scroll_direction)
 184+ 8DFE FE 00            cp LEFT
 185+ 8E00 CA 08 8E         jp z,do_scroll_left
 186+ 8E03
 187+ 8E03 3E 00            ld a,LEFT
 188+ 8E05 32 F5 8C         ld (scroll_direction),a
 189+ 8E08              do_scroll_left:
 190+ 8E08 3A F6 8C         ld a,(cam_x)
 191+ 8E0B FE 00            cp 0
 192+ 8E0D CA 8F 83         jp z,p_move_left
 193+ 8E10
 194+ 8E10 3A F4 8C         ld a,(current_scroll)
 195+ 8E13 3D               dec a
 196+ 8E14 32 F4 8C         ld (current_scroll),a
 197+ 8E17 FE FF            cp $ff
 198+ 8E19 CC 23 8E         call z,sl_scrollmax
 199+ 8E1C 3A F4 8C         ld a,(current_scroll)
 200+ 8E1F ED 92 30         nextreg $30,a
 201+ 8E22 C9               ret
 202+ 8E23              sl_scrollmax:
 203+ 8E23 21 FC 49         ld hl,$4a00-4
 204+ 8E26 11 00 4A         ld de,$4a00
 205+ 8E29 01 00 05         ld bc,20*32*2
 206+ 8E2C ED B8            lddr
 207+ 8E2E
 208+ 8E2E 3A F6 8C         ld a,(cam_x)
 209+ 8E31 3D               dec a
 210+ 8E32 32 F6 8C         ld (cam_x),a
 211+ 8E35
 212+ 8E35 21 74 88         ld hl,superlevel
 213+ 8E38 3A F6 8C         ld a,(cam_x)
 214+ 8E3B ED 31            add hl,a
 215+ 8E3D 11 00 45         ld de,LEVEL_START_ADDRESS
 216+ 8E40 06 08            ld b,LEVEL_HEIGHT_META
 217+ 8E42 CD 9E 8E         call putsupercolumn
 218+ 8E45
 219+ 8E45 3E 0F            ld a,MAX_SCROLL-1
 220+ 8E47 32 F4 8C         ld (current_scroll),a
 221+ 8E4A
 222+ 8E4A C9               ret
 223+ 8E4B
 224+ 8E4B
 225+ 8E4B
 226+ 8E4B              scroll_right:
 227+ 8E4B 3A F5 8C         ld a,(scroll_direction)
 228+ 8E4E FE 01            cp RIGHT
 229+ 8E50 CA 58 8E         jp z,do_scroll_right
 230+ 8E53
 231+ 8E53 3E 01            ld a,RIGHT
 232+ 8E55 32 F5 8C         ld (scroll_direction),a
 233+ 8E58
 234+ 8E58              do_scroll_right:
 235+ 8E58 3A F6 8C         ld a,(cam_x)
 236+ 8E5B C6 14            add a,VIEW_WIDTH_META
 237+ 8E5D FE 50            cp LEVEL_WIDTH_META
 238+ 8E5F D2 D4 83         jp nc, p_move_right
 239+ 8E62
 240+ 8E62 3A F4 8C         ld a,(current_scroll)
 241+ 8E65 3C               inc a
 242+ 8E66 32 F4 8C         ld (current_scroll),a
 243+ 8E69 FE 10            cp MAX_SCROLL
 244+ 8E6B CC 75 8E         call z,sr_scrollmax
 245+ 8E6E 3A F4 8C         ld a,(current_scroll)
 246+ 8E71 ED 92 30         nextreg $30,a
 247+ 8E74 C9               ret
 248+ 8E75
 249+ 8E75              sr_scrollmax:
 250+ 8E75 21 04 45         ld hl,LEVEL_START_ADDRESS+4
 251+ 8E78 11 00 45         ld de,LEVEL_START_ADDRESS
 252+ 8E7B 01 00 05         ld bc,20*32*2
 253+ 8E7E ED B0            ldir
 254+ 8E80
 255+ 8E80 21 74 88         ld hl,superlevel
 256+ 8E83 3A F6 8C         ld a,(cam_x)
 257+ 8E86 C6 14            add a,VIEW_WIDTH_META
 258+ 8E88 ED 31            add hl,a
 259+ 8E8A 11 4C 45         ld de,LEVEL_START_ADDRESS+76
 260+ 8E8D 06 08            ld b,LEVEL_HEIGHT_META
 261+ 8E8F CD 9E 8E         call putsupercolumn
 262+ 8E92
 263+ 8E92 AF               xor a
 264+ 8E93 32 F4 8C         ld (current_scroll),a
 265+ 8E96
 266+ 8E96 3A F6 8C         ld a,(cam_x)
 267+ 8E99 3C               inc a
 268+ 8E9A 32 F6 8C         ld (cam_x),a
 269+ 8E9D
 270+ 8E9D C9               ret
 271+ 8E9E
 272+ 8E9E
 273+ 8E9E
 274+ 8E9E              ;puts super tiles column from superlevel (map) to screen tile memory
 275+ 8E9E              ;supertile description (2x2 cells; 2bytes per cell):
 276+ 8E9E              ;AB
 277+ 8E9E              ;CD
 278+ 8E9E              ;2 bytes per cell
 279+ 8E9E              ;Inputs:
 280+ 8E9E              ;B=level height in supertiles
 281+ 8E9E              ;DE=top tile in column (screen memory)
 282+ 8E9E              ;HL=top tile in superlevel column
 283+ 8E9E              putsupercolumn:
 284+ 8E9E 7E               ld a,(hl) ;get supertile id
 285+ 8E9F 87               add a,a
 286+ 8EA0 87               add a,a
 287+ 8EA1 E5               push hl ;HL=supertiles again
 288+ 8EA2 21 F4 8A         ld hl,supertiles
 289+ 8EA5 ED 31            add hl,a
 290+ 8EA7 ED 31            add hl,a ;hl=supertiles+=(8*supertile ID)
 291+ 8EA9 7E               ld a,(hl)
 292+ 8EAA 12               ld (de),a ;tile Aa
 293+ 8EAB 23               inc hl
 294+ 8EAC 13               inc de
 295+ 8EAD 7E               ld a,(hl)
 296+ 8EAE 12               ld (de),a ;tile Ab
 297+ 8EAF 23               inc hl
 298+ 8EB0 13               inc de
 299+ 8EB1 7E               ld a,(hl)
 300+ 8EB2 12               ld (de),a ;tile Ba
 301+ 8EB3 23               inc hl
 302+ 8EB4 13               inc de
 303+ 8EB5 7E               ld a,(hl)
 304+ 8EB6 12               ld (de),a ;tile Bb
 305+ 8EB7 23               inc hl
 306+ 8EB8 ED 35 4D 00      add de,(VIEW_WIDTH*2)-3 ;down one line of screen tiles (2bytes per tile)
 307+ 8EBC 7E               ld a,(hl)
 308+ 8EBD 12               ld (de),a ;tile Ca
 309+ 8EBE 23               inc hl
 310+ 8EBF 13               inc de
 311+ 8EC0 7E               ld a,(hl)
 312+ 8EC1 12               ld (de),a ;tile Cb
 313+ 8EC2 23               inc hl
 314+ 8EC3 13               inc de
 315+ 8EC4 7E               ld a,(hl)
 316+ 8EC5 12               ld (de),a ;tile Da
 317+ 8EC6 23               inc hl
 318+ 8EC7 13               inc de
 319+ 8EC8 7E               ld a,(hl)
 320+ 8EC9 12               ld (de),a ;tile Db
 321+ 8ECA E1               pop hl
 322+ 8ECB ED 35 4D 00      add de,(VIEW_WIDTH*2)-3
 323+ 8ECF ED 34 50 00      add hl,LEVEL_WIDTH_META
 324+ 8ED3 10 C9            djnz putsupercolumn
 325+ 8ED5 C9               ret
 326+ 8ED6
 327+ 8ED6
 328+ 8ED6
 329+ 8ED6
 330+ 8ED6
 331+ 8ED6
 332+ 8ED6
 333+ 8ED6
 334+ 8ED6
# file closed: src/levels/levelmanager.asm
  51  8ED6              	include 'projectiles.asm'
# file opened: src/projectiles.asm
   1+ 8ED6
   2+ 8ED6
   3+ 8ED6              ;0=wX
   4+ 8ED6              ;1=wY
   5+ 8ED6              ;2,3=xx
   6+ 8ED6              ;4=y
   7+ 8ED6              ;5=attr2
   8+ 8ED6              ;6=attr3
   9+ 8ED6              ;7=slot_ID
  10+ 8ED6              ;8=vy
  11+ 8ED6              ;9=y direction
  12+ 8ED6              ;10=vTimer
  13+ 8ED6              ;11=x pixel offset (yes this elements need rearranging)
  14+ 8ED6              ;12=x direction
  15+ 8ED6              projectiles:
  16+ 8ED6 51 00            db OUT_OF_WORLD,0
  16+ 8ED8 00 00          dw 0
  16+ 8EDA 00 00 24 14    db 0, %00000000, %00100100, 20,0,UP,0,0,0
  16+ 8EDE 00 02 00 00
  16+ 8EE2 00
  17+ 8EE3 51 00            db OUT_OF_WORLD,0
  17+ 8EE5 00 00          dw 0
  17+ 8EE7 00 00 24 15    db 0, %00000000, %00100100, 21,0,UP,0,0,0
  17+ 8EEB 00 02 00 00
  17+ 8EEF 00
  18+ 8EF0 51 00            db OUT_OF_WORLD,0
  18+ 8EF2 00 00          dw 0
  18+ 8EF4 00 00 24 16    db 0, %00000000, %00100100, 22,0,UP,0,0,0
  18+ 8EF8 00 02 00 00
  18+ 8EFC 00
  19+ 8EFD 51 00            db OUT_OF_WORLD,0
  19+ 8EFF 00 00          dw 0
  19+ 8F01 00 00 24 16    db 0, %00000000, %00100100, 22,0,UP,0,0,0
  19+ 8F05 00 02 00 00
  19+ 8F09 00
  20+ 8F0A FF               db END_OF_ARRAY
  21+ 8F0B              PROJECTILES_DATA_LENGTH equ 13
  22+ 8F0B
  23+ 8F0B
  24+ 8F0B
  25+ 8F0B              PROJECTILE_MAX_VELOCITY equ 4
  26+ 8F0B              PROJECTILE_MIN_VELOCITY equ 0
  27+ 8F0B
  28+ 8F0B              PROJECTILE_X_VELOCITY equ 4
  29+ 8F0B
  30+ 8F0B              PROJECTILE_VELOCITY_DELAY equ 8
  31+ 8F0B
  32+ 8F0B              PROJECTILE_MAX_DISTANCE equ 127
  33+ 8F0B
  34+ 8F0B
  35+ 8F0B              projectiles_init:
  36+ 8F0B
  37+ 8F0B C9               ret
  38+ 8F0C
  39+ 8F0C
  40+ 8F0C
  41+ 8F0C
  42+ 8F0C
  43+ 8F0C
  44+ 8F0C
  45+ 8F0C              projectiles_spawn:
  46+ 8F0C DD 21 D6 8E      ld ix,projectiles
  47+ 8F10              proj_spwn_start:
  48+ 8F10 DD 7E 00         ld a,(ix)
  49+ 8F13 FE FF            cp END_OF_ARRAY
  50+ 8F15 C8               ret z
  51+ 8F16
  52+ 8F16 DD 7E 06         ld a,(ix+6)
  53+ 8F19 CB 7F            bit 7,a
  54+ 8F1B C2 49 8F         jp nz,proj_spwn_next
  55+ 8F1E
  56+ 8F1E CB FF            set 7,a
  57+ 8F20 DD 77 06         ld (ix+6),a
  58+ 8F23
  59+ 8F23
  60+ 8F23
  61+ 8F23                  ;spawn one here...
  62+ 8F23 3A 93 80         ld a,(player_world_x)
  63+ 8F26 DD 77 00         ld (ix),a
  64+ 8F29
  65+ 8F29 AF               xor a ;py offset
  66+ 8F2A DD 77 04         ld (ix+4),a
  67+ 8F2D
  68+ 8F2D 3A 94 80         ld a,(player_world_y)
  69+ 8F30 DD 77 01         ld (ix+1),a
  70+ 8F33
  71+ 8F33 DD 36 08 04      ld (ix+8),PROJECTILE_MAX_VELOCITY
  72+ 8F37
  73+ 8F37 DD 36 09 02      ld (ix+9),UP
  74+ 8F3B
  75+ 8F3B AF               xor a
  76+ 8F3C DD 77 0A         ld (ix+10),a
  77+ 8F3F DD 77 0B         ld (ix+11),a
  78+ 8F42
  79+ 8F42 3A A4 80         ld a,(player_walk_direction)
  80+ 8F45 DD 77 0C         ld (ix+12),a
  81+ 8F48
  82+ 8F48
  83+ 8F48 C9               ret
  84+ 8F49              proj_spwn_next:
  85+ 8F49 11 0D 00         ld de,PROJECTILES_DATA_LENGTH
  86+ 8F4C DD 19            add ix,de
  87+ 8F4E C3 10 8F         jp proj_spwn_start
  88+ 8F51
  89+ 8F51
  90+ 8F51
  91+ 8F51              projectiles_update:
  92+ 8F51 DD 21 D6 8E      ld ix,projectiles
  93+ 8F55              proj_upd_start:
  94+ 8F55 DD 7E 00         ld a,(ix)
  95+ 8F58 FE FF            cp END_OF_ARRAY
  96+ 8F5A C8               ret z
  97+ 8F5B
  98+ 8F5B CD 05 90         call projectile_update
  99+ 8F5E
 100+ 8F5E              proj_upd_next:
 101+ 8F5E 11 0D 00         ld de,PROJECTILES_DATA_LENGTH
 102+ 8F61 DD 19            add ix,de
 103+ 8F63 C3 55 8F         jp proj_upd_start
 104+ 8F66
 105+ 8F66
 106+ 8F66
 107+ 8F66              projectiles_draw:
 108+ 8F66 DD 21 D6 8E      ld ix,projectiles
 109+ 8F6A              proj_drw_start:
 110+ 8F6A DD 7E 00         ld a,(ix)
 111+ 8F6D FE FF            cp END_OF_ARRAY
 112+ 8F6F C8               ret z
 113+ 8F70
 114+ 8F70
 115+ 8F70 DD 7E 06         ld a,(ix+6)
 116+ 8F73 CB 7F            bit 7,a
 117+ 8F75 CA 7B 8F         jp z,proj_drw_next
 118+ 8F78
 119+ 8F78 CD 83 8F         call projectile_draw
 120+ 8F7B
 121+ 8F7B              proj_drw_next:
 122+ 8F7B 11 0D 00         ld de,PROJECTILES_DATA_LENGTH
 123+ 8F7E DD 19            add ix,de
 124+ 8F80 C3 6A 8F         jp proj_drw_start
 125+ 8F83
 126+ 8F83
 127+ 8F83
 128+ 8F83
 129+ 8F83
 130+ 8F83              projectile_draw:
 131+ 8F83 DD 7E 07         ld a,(ix+7)
 132+ 8F86 ED 92 34         nextreg $34,a
 133+ 8F89
 134+ 8F89 DD 7E 0C         ld a,(ix+12)
 135+ 8F8C FE 00            cp LEFT
 136+ 8F8E CA DB 8F         jp z,proj_draw_left
 137+ 8F91
 138+ 8F91 DD 7E 02         ld a,(ix+2)
 139+ 8F94 6F               ld l,a
 140+ 8F95 DD 7E 03         ld a,(ix+3)
 141+ 8F98 67               ld h,a
 142+ 8F99 DD 7E 0B         ld a,(ix+11)
 143+ 8F9C E5               push hl ;save hl to restore further down
 144+ 8F9D ED 31            add hl,a ;add pixelx offset
 145+ 8F9F DD 75 02         ld (ix+2),l
 146+ 8FA2 DD 74 03         ld (ix+3),h
 147+ 8FA5              proj_draw:
 148+ 8FA5                  ;attr 0 (x lsb)
 149+ 8FA5 DD 7E 02         ld a,(ix+2)
 150+ 8FA8 ED 92 35         nextreg $35,a
 151+ 8FAB
 152+ 8FAB                  ;attr 1 (y)
 153+ 8FAB DD 7E 09         ld a,(ix+9)
 154+ 8FAE FE 03            cp DOWN
 155+ 8FB0 CA F3 8F         jp z,proj_draw_down
 156+ 8FB3
 157+ 8FB3 DD 7E 04         ld a,(ix+4)
 158+ 8FB6 47               ld b,a
 159+ 8FB7 DD 7E 01         ld a,(ix+1)
 160+ 8FBA 87               add a,a
 161+ 8FBB 87               add a,a
 162+ 8FBC 87               add a,a
 163+ 8FBD 87               add a,a
 164+ 8FBE 90               sub b
 165+ 8FBF ED 92 36         nextreg $36,a
 166+ 8FC2              proj_drw_attr2:
 167+ 8FC2                  ;attr 2
 168+ 8FC2 DD 7E 05         ld a,(ix+5)
 169+ 8FC5 47               ld b,a
 170+ 8FC6 DD 7E 03         ld a,(ix+3) ;X8 (msb)
 171+ 8FC9 B0               or b
 172+ 8FCA ED 92 37         nextreg $37,a
 173+ 8FCD
 174+ 8FCD                  ;attr 3
 175+ 8FCD DD 7E 06         ld a,(ix+6)
 176+ 8FD0 ED 92 38         nextreg $38,a
 177+ 8FD3
 178+ 8FD3                  ;draw routine ends here...
 179+ 8FD3 E1               pop hl
 180+ 8FD4 DD 75 02         ld (ix+2),l
 181+ 8FD7 DD 74 03         ld (ix+3),h
 182+ 8FDA
 183+ 8FDA C9               ret
 184+ 8FDB
 185+ 8FDB              proj_draw_left:
 186+ 8FDB DD 7E 02         ld a,(ix+2)
 187+ 8FDE 6F               ld l,a
 188+ 8FDF DD 7E 03         ld a,(ix+3)
 189+ 8FE2 67               ld h,a
 190+ 8FE3 DD 7E 0B         ld a,(ix+11)
 191+ 8FE6 47               ld b,a
 192+ 8FE7 7D               ld a,l
 193+ 8FE8 90               sub b
 194+ 8FE9
 195+ 8FE9 E5               push hl ;save hl to restore further down
 196+ 8FEA                  ; neg : add hl,a ;add pixelx offset
 197+ 8FEA DD 77 02         ld (ix+2),a
 198+ 8FED DD 74 03         ld (ix+3),h
 199+ 8FF0
 200+ 8FF0 C3 A5 8F         jp proj_draw
 201+ 8FF3              proj_draw_down:
 202+ 8FF3 DD 7E 04         ld a,(ix+4)
 203+ 8FF6 47               ld b,a
 204+ 8FF7 DD 7E 01         ld a,(ix+1)
 205+ 8FFA 87               add a,a
 206+ 8FFB 87               add a,a
 207+ 8FFC 87               add a,a
 208+ 8FFD 87               add a,a
 209+ 8FFE 80               add a,b
 210+ 8FFF ED 92 36         nextreg $36,a
 211+ 9002 C3 C2 8F         jp proj_drw_attr2
 212+ 9005
 213+ 9005
 214+ 9005
 215+ 9005
 216+ 9005
 217+ 9005              projectile_update:
 218+ 9005 CD 61 91         call projectile_check_in_view
 219+ 9008 CD 11 91         call projectile_calculate_screen_pos
 220+ 900B
 221+ 900B 3A D2 86         ld a,(frame_counter)
 222+ 900E E6 03            and %00000011
 223+ 9010 CC FA 90         call z,projectile_rotate
 224+ 9013
 225+ 9013 DD 7E 06         ld a,(ix+6)
 226+ 9016 CB 7F            bit 7,a
 227+ 9018 C8               ret z
 228+ 9019
 229+ 9019 CD 49 90         call proj_move_sideways
 230+ 901C
 231+ 901C DD 7E 0A         ld a,(ix+10)
 232+ 901F 3C               inc a
 233+ 9020 DD 77 0A         ld (ix+10),a
 234+ 9023
 235+ 9023
 236+ 9023 DD 7E 09         ld a,(ix+9)
 237+ 9026 FE 03            cp DOWN
 238+ 9028 CA 3A 90         jp z,p_upd_dwn
 239+ 902B                  ;move projectile up
 240+ 902B DD 7E 04         ld a,(ix+4) ;y pixel offset
 241+ 902E DD 86 08         add a,(ix+8) ;y Vel
 242+ 9031 DD 77 04         ld (ix+4),a
 243+ 9034 FE 10            cp MAX_SCROLL
 244+ 9036 CC AB 90         call z,proj_up_one
 245+ 9039 C9               ret
 246+ 903A              p_upd_dwn:
 247+ 903A                  ;move projectile down
 248+ 903A DD 7E 04         ld a,(ix+4) ;y scroll
 249+ 903D DD 86 08         add a,(ix+8) ;y Vel
 250+ 9040 DD 77 04         ld (ix+4),a
 251+ 9043 FE 10            cp MAX_SCROLL
 252+ 9045 CC D5 90         call z,proj_down_one
 253+ 9048 C9               ret
 254+ 9049
 255+ 9049
 256+ 9049
 257+ 9049              proj_move_sideways:
 258+ 9049 DD 7E 0C         ld a,(ix+12)
 259+ 904C FE 00            cp LEFT
 260+ 904E F5               push af
 261+ 904F CC 58 90         call z,proj_move_left
 262+ 9052 F1               pop af
 263+ 9053 C8               ret z
 264+ 9054
 265+ 9054 CD 82 90         call proj_move_right
 266+ 9057 C9               ret
 267+ 9058              proj_move_left:
 268+ 9058
 269+ 9058 DD 7E 0B         ld a,(ix+11)
 270+ 905B DD 86 08         add a,(ix+8)
 271+ 905E DD 77 0B         ld (ix+11),a
 272+ 9061
 273+ 9061 DD 7E 0B         ld a,(ix+11)
 274+ 9064 FE 7F            cp 127
 275+ 9066 D4 05 91         call nc, projectile_kill
 276+ 9069
 277+ 9069
 278+ 9069 DD 7E 02         ld a,(ix+2)
 279+ 906C 6F               ld l,a
 280+ 906D DD 7E 03         ld a,(ix+3)
 281+ 9070 67               ld h,a
 282+ 9071 DD 7E 0B         ld a,(ix+11)
 283+ 9074                  SUB_HL_A ;see macros
 283+ 9074 ED 44       >	neg
 283+ 9076 ED 31       >  add hl,a
 284+ 9078
 285+ 9078 7C               ld a,h
 286+ 9079 CB 47            bit 0,a
 287+ 907B C0               ret nz
 288+ 907C
 289+ 907C 7D               ld a,l
 290+ 907D B7               or a
 291+ 907E FC 05 91         call m, projectile_kill
 292+ 9081                  ;TODO: study M flag
 293+ 9081
 294+ 9081 C9               ret
 295+ 9082
 296+ 9082              proj_move_right:
 297+ 9082 DD 7E 0B         ld a,(ix+11)
 298+ 9085 DD 86 08         add a,(ix+8)
 299+ 9088 DD 77 0B         ld (ix+11),a
 300+ 908B
 301+ 908B DD 7E 0B         ld a,(ix+11)
 302+ 908E FE 7F            cp 127
 303+ 9090 D4 05 91         call nc, projectile_kill
 304+ 9093
 305+ 9093 DD 7E 02         ld a,(ix+2)
 306+ 9096 6F               ld l,a
 307+ 9097 DD 7E 03         ld a,(ix+3)
 308+ 909A 67               ld h,a
 309+ 909B DD 7E 0B         ld a,(ix+11)
 310+ 909E ED 31            add hl,a
 311+ 90A0
 312+ 90A0 7C               ld a,h
 313+ 90A1 CB 47            bit 0,a
 314+ 90A3 C8               ret z
 315+ 90A4
 316+ 90A4 7D               ld a,l
 317+ 90A5 FE 40            cp LOW 320
 318+ 90A7 D4 05 91         call nc, projectile_kill
 319+ 90AA
 320+ 90AA
 321+ 90AA C9               ret
 322+ 90AB
 323+ 90AB
 324+ 90AB
 325+ 90AB
 326+ 90AB
 327+ 90AB              proj_up_one:
 328+ 90AB DD 7E 01         ld a,(ix+1)
 329+ 90AE 3D               dec a
 330+ 90AF DD 77 01         ld (ix+1),a
 331+ 90B2 DD 36 04 00      ld (ix+4),0
 332+ 90B6 FE 00            cp 0
 333+ 90B8 CC 05 91         call z,projectile_kill ;kill it if top of screen
 334+ 90BB
 335+ 90BB DD 7E 0A         ld a,(ix+10)
 336+ 90BE FE 08            cp PROJECTILE_VELOCITY_DELAY
 337+ 90C0 D8               ret c
 338+ 90C1
 339+ 90C1 DD 7E 08         ld a,(ix+8)
 340+ 90C4 E6 FE            and %11111110
 341+ 90C6 0F               rrca
 342+ 90C7 DD 77 08         ld (ix+8),a
 343+ 90CA FE 00            cp 0
 344+ 90CC DD 36 09 03      ld (ix+9),DOWN
 345+ 90D0
 346+ 90D0 AF               xor a
 347+ 90D1 DD 77 0A         ld (ix+10),a
 348+ 90D4
 349+ 90D4 C9               ret
 350+ 90D5
 351+ 90D5              proj_down_one:
 352+ 90D5 DD 7E 01         ld a,(ix+1)
 353+ 90D8 3C               inc a
 354+ 90D9 DD 77 01         ld (ix+1),a
 355+ 90DC DD 36 04 00      ld (ix+4),0
 356+ 90E0 FE 0F            cp 15
 357+ 90E2 CC 05 91         call z,projectile_kill ;kill it if top of screen
 358+ 90E5
 359+ 90E5 DD 7E 0A         ld a,(ix+10)
 360+ 90E8 FE 08            cp PROJECTILE_VELOCITY_DELAY
 361+ 90EA D8               ret c
 362+ 90EB
 363+ 90EB DD 7E 08         ld a,(ix+8)
 364+ 90EE FE 04            cp PROJECTILE_MAX_VELOCITY
 365+ 90F0 C8               ret z
 366+ 90F1 87               add a,a
 367+ 90F2 DD 77 08         ld (ix+8),a
 368+ 90F5
 369+ 90F5 AF               xor a
 370+ 90F6 DD 77 0A         ld (ix+10),a
 371+ 90F9
 372+ 90F9
 373+ 90F9 C9               ret
 374+ 90FA
 375+ 90FA
 376+ 90FA
 377+ 90FA
 378+ 90FA
 379+ 90FA
 380+ 90FA
 381+ 90FA
 382+ 90FA
 383+ 90FA
 384+ 90FA
 385+ 90FA              projectile_rotate:
 386+ 90FA DD 7E 05         ld a,(ix+5)
 387+ 90FD C6 02            add a,2
 388+ 90FF E6 0E            and %00001110
 389+ 9101 DD 77 05         ld (ix+5),a
 390+ 9104 C9               ret
 391+ 9105
 392+ 9105
 393+ 9105
 394+ 9105              projectile_kill:
 395+ 9105 DD CB 06 BE      res 7,(ix+6)
 396+ 9109 CD 83 8F         call projectile_draw
 397+ 910C
 398+ 910C DD 36 00 51      ld (ix),OUT_OF_WORLD
 399+ 9110
 400+ 9110
 401+ 9110 C9               ret
 402+ 9111
 403+ 9111
 404+ 9111
 405+ 9111              projectile_calculate_screen_pos:
 406+ 9111 3A F5 8C         ld a,(scroll_direction)
 407+ 9114 FE 00            cp LEFT
 408+ 9116 CA 1F 91         jp z,proj_screen_moving_left
 409+ 9119 FE 01            cp RIGHT
 410+ 911B CA 40 91         jp z,proj_screen_moving_right
 411+ 911E
 412+ 911E C9               ret
 413+ 911F
 414+ 911F
 415+ 911F              proj_screen_moving_left:
 416+ 911F                  ;X (scroll left)
 417+ 911F 3A F6 8C         ld a,(cam_x)
 418+ 9122 47               ld b,a
 419+ 9123 DD 7E 00         ld a,(ix+0) ;wX
 420+ 9126 90               sub b ;wX-camX
 421+ 9127 21 00 00         ld hl,0
 422+ 912A ED 31            add hl,a
 423+ 912C 29               add hl,hl
 424+ 912D 29               add hl,hl
 425+ 912E 29               add hl,hl
 426+ 912F 29               add hl,hl
 427+ 9130 3A F4 8C         ld a,(current_scroll)
 428+ 9133 47               ld b,a
 429+ 9134 3E 10            ld a,16
 430+ 9136 90               sub b
 431+ 9137 ED 31            add hl,a
 432+ 9139 DD 75 02         ld (ix+2),l
 433+ 913C DD 74 03         ld (ix+3),h ;X8
 434+ 913F C9               ret
 435+ 9140
 436+ 9140              proj_screen_moving_right:
 437+ 9140                  ;X (scroll left)
 438+ 9140 3A F6 8C         ld a,(cam_x)
 439+ 9143 47               ld b,a
 440+ 9144 DD 7E 00         ld a,(ix) ;wX
 441+ 9147 90               sub b ;wX-camX
 442+ 9148 21 00 00         ld hl,0
 443+ 914B ED 31            add hl,a
 444+ 914D 29               add hl,hl
 445+ 914E 29               add hl,hl
 446+ 914F 29               add hl,hl
 447+ 9150 29               add hl,hl
 448+ 9151 3A F4 8C         ld a,(current_scroll)
 449+ 9154 47               ld b,a
 450+ 9155 3E 10            ld a,16
 451+ 9157 90               sub b
 452+ 9158 ED 31            add hl,a
 453+ 915A DD 75 02         ld (ix+2),l
 454+ 915D DD 74 03         ld (ix+3),h ;X8
 455+ 9160
 456+ 9160 C9               ret
 457+ 9161
 458+ 9161
 459+ 9161
 460+ 9161              projectile_check_in_view:
 461+ 9161 DD 7E 00         ld a,(ix)
 462+ 9164 47               ld b,a
 463+ 9165 3A F6 8C         ld a,(cam_x)
 464+ 9168 C6 14            add a,VIEW_WIDTH_META
 465+ 916A B8               cp b
 466+ 916B DA 7E 91         jp c, proj_set_not_inview
 467+ 916E
 468+ 916E 3A F6 8C         ld a,(cam_x)
 469+ 9171 47               ld b,a
 470+ 9172 DD 7E 00         ld a,(ix)
 471+ 9175 B8               cp b
 472+ 9176 DA 7E 91         jp c, proj_set_not_inview
 473+ 9179
 474+ 9179
 475+ 9179                  ; set to inview=yes
 476+ 9179 DD CB 06 FE      set 7,(ix+6)
 477+ 917D
 478+ 917D C9               ret
 479+ 917E
 480+ 917E              proj_set_not_inview:
 481+ 917E DD 36 00 51      ld (ix),OUT_OF_WORLD
 482+ 9182 DD CB 06 7E      bit 7,(ix+6)
 483+ 9186 C8               ret z
 484+ 9187
 485+ 9187 DD CB 06 BE      res 7,(ix+6)
 486+ 918B CD 83 8F         call projectile_draw
 487+ 918E
 488+ 918E
 489+ 918E C9               ret
 490+ 918F
# file closed: src/projectiles.asm
  52  918F
  53  918F              	include 'loadbins.asm'
# file opened: src/loadbins.asm
   1+ 918F
   2+ 918F
   3+ 918F              ;;;;;Tiles
   4+ 918F
   5+ 918F
   6+ 918F
   7+ 918F
   8+ 918F
   9+ 918F              caveman_palette:
  10+ 918F                  incbin 'assets/cavetiles2.nxp',0
  11+ 91AB
  12+ 91AB                  MMU 6,16
  13+ 91AB                  org $c000
  14+ C000
  15+ C000                  incbin 'assets/cavetiles2.til',0,TILE_DEFINITIONS_SIZE
  16+ D000
  17+ D000
  18+ D000              ; 	;courtesy of ped7g:
  19+ D000              ;     ; patch tile gfx with grid gfx
  20+ D000              ; tileN=1
  21+ D000              ;     DUP 128-tileN
  22+ D000              ;         ORG $C000 + tileN*32
  23+ D000              ;         DB $FF
  24+ D000              ;         DB {b $ } | $F0
  25+ D000              ;         ORG $C000 + tileN*32 + 1*4
  26+ D000              ;         DB {b $ } | $F0
  27+ D000              ;         ORG $C000 + tileN*32 + 2*4
  28+ D000              ;         DB {b $ } | $F0
  29+ D000              ;         ORG $C000 + tileN*32 + 6*4 + 3
  30+ D000              ;         DB {b $ } | $0F
  31+ D000              ;         ORG $C000 + tileN*32 + 7*4 + 3
  32+ D000              ;         DB $FF
  33+ D000              ; tileN=tileN+1
  34+ D000              ;     EDUP
  35+ D000
  36+ D000
  37+ D000
  38+ D000              ;;
  39+ D000              ;;Caveman Walk Animation:
  40+ D000              ; A>B>C>D>A>B>C>D
  41+ D000
  42+ D000              ;;;sprites
  43+ D000              ;WBOY SPRITES:
  44+ D000              ;Idle = A,B
  45+ D000              ;Walk = C,D,E,F
  46+ D000
  47+ D000
  48+ D000              ;size (in patterns) for the head and body parts
  49+ D000              WBOY_HEAD_SIZE equ 2
  50+ D000              WBOY_BODY_SIZE equ 2
  51+ D000
  52+ D000              ;animation 'first A' values:
  53+ D000              WBOY_FIRST_IDLE equ 2
  54+ D000              WBOY_FIRST_WALK equ 6
  55+ D000              WBOY_FIRST_JUMP equ 12 ;the jump animation is just one frame, and is same as walk4
  56+ D000
  57+ D000              ;animation 'fiNAL A' values:
  58+ D000              WBOY_FINAL_IDLE equ 4
  59+ D000              WBOY_FINAL_WALK equ 12
  60+ D000
  61+ D000              ;4-pattern animations...
  62+ D000              WBOY_THROW_A equ 14
  63+ D000              WBOY_THROW_B equ 18
  64+ D000
  65+ D000              WBOY_PATTERN_COUNT equ 22
  66+ D000
  67+ D000
  68+ D000                  MMU 6,14
  69+ D000                  org $c000
  70+ C000
  71+ C000
  72+ C000              wBoy_Head1: ;0
  73+ C000 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $D5, $FC, $E3, $E3, $E3, $FC, $FC, $FC;
  73+ C004 E3 E3 E3 E3
  73+ C008 D5 FC E3 E3
  73+ C00C E3 FC FC FC
  74+ C010 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $FC, $FC, $FC, $D5, $AD, $FC, $FC, $FC, $FC, $FC;
  74+ C014 E3 E3 FC FC
  74+ C018 FC D5 AD FC
  74+ C01C FC FC FC FC
  75+ C020 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $D5, $AD, $FC, $FC, $D5, $FC, $FC, $FC;
  75+ C024 E3 E3 E3 E3
  75+ C028 D5 AD FC FC
  75+ C02C D5 FC FC FC
  76+ C030 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $FC, $FC, $FC, $FC, $D5, $FC, $D5, $D5, $FC;
  76+ C034 E3 E3 E3 FC
  76+ C038 FC FC FC D5
  76+ C03C FC D5 D5 FC
  77+ C040 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $D5, $FC, $FC;
  77+ C044 E3 E3 E3 E3
  77+ C048 E3 20 D5 D5
  77+ C04C D5 D5 FC FC
  78+ C050 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $D5, $FC, $FC;
  78+ C054 E3 E3 E3 E3
  78+ C058 E3 20 D5 D5
  78+ C05C D5 D5 FC FC
  79+ C060 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $D5, $FC, $FC, $FC;
  79+ C064 E3 E3 E3 E3
  79+ C068 20 D5 D5 D5
  79+ C06C D5 FC FC FC
  80+ C070 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $FC, $FC, $AC, $FC;
  80+ C074 E3 E3 E3 E3
  80+ C078 20 D5 D5 D5
  80+ C07C FC FC AC FC
  81+ C080 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $FC, $FC, $FC, $AD, $FC;
  81+ C084 E3 E3 E3 E3
  81+ C088 20 D5 D5 FC
  81+ C08C FC FC AD FC
  82+ C090 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $FC, $FC, $FC, $AD, $AD;
  82+ C094 E3 E3 E3 E3
  82+ C098 20 D5 D5 FC
  82+ C09C FC FC AD AD
  83+ C0A0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $F6, $AD, $FC, $AD, $AD;
  83+ C0A4 E3 E3 E3 E3
  83+ C0A8 20 D5 D5 F6
  83+ C0AC AD FC AD AD
  84+ C0B0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $F6, $AD, $FC, $AD, $F6;
  84+ C0B4 E3 E3 E3 E3
  84+ C0B8 20 D5 D5 F6
  84+ C0BC AD FC AD F6
  85+ C0C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $FC, $AC, $AD, $AD;
  85+ C0C4 E3 E3 E3 E3
  85+ C0C8 E3 20 D5 D5
  85+ C0CC FC AC AD AD
  86+ C0D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $FC, $FC, $AC, $AD;
  86+ C0D4 E3 E3 E3 E3
  86+ C0D8 E3 20 D5 D5
  86+ C0DC FC FC AC AD
  87+ C0E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $FC, $FC, $AC, $AD;
  87+ C0E4 E3 E3 E3 E3
  87+ C0E8 E3 20 D5 D5
  87+ C0EC FC FC AC AD
  88+ C0F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $FC, $FC, $AC;
  88+ C0F4 E3 E3 E3 E3
  88+ C0F8 E3 E3 20 D5
  88+ C0FC D5 FC FC AC
  89+ C100
  90+ C100
  91+ C100
  92+ C100              wBoy_Head2: ;1
  93+ C100 FC FC E3 E3  	db  $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
  93+ C104 E3 E3 E3 E3
  93+ C108 E3 E3 E3 E3
  93+ C10C E3 E3 E3 E3
  94+ C110 FF FF FC FC  	db  $FF, $FF, $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
  94+ C114 E3 E3 E3 E3
  94+ C118 E3 E3 E3 E3
  94+ C11C E3 E3 E3 E3
  95+ C120 FC FC FF FF  	db  $FC, $FC, $FF, $FF, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
  95+ C124 FC E3 E3 E3
  95+ C128 E3 E3 E3 E3
  95+ C12C E3 E3 E3 E3
  96+ C130 FC FC FC FF  	db  $FC, $FC, $FC, $FF, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
  96+ C134 FC E3 E3 E3
  96+ C138 E3 E3 E3 E3
  96+ C13C E3 E3 E3 E3
  97+ C140 FC FC FC FC  	db  $FC, $FC, $FC, $FC, $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
  97+ C144 FC FC E3 E3
  97+ C148 E3 E3 E3 E3
  97+ C14C E3 E3 E3 E3
  98+ C150 FF FC FC FC  	db  $FF, $FC, $FC, $FC, $FF, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
  98+ C154 FF FC E3 E3
  98+ C158 E3 E3 E3 E3
  98+ C15C E3 E3 E3 E3
  99+ C160 FF AC FC FC  	db  $FF, $AC, $FC, $FC, $AC, $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
  99+ C164 AC FC FC E3
  99+ C168 E3 E3 E3 E3
  99+ C16C E3 E3 E3 E3
 100+ C170 FC AD FC AD  	db  $FC, $AD, $FC, $AD, $AD, $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 100+ C174 AD FC FC E3
 100+ C178 E3 E3 E3 E3
 100+ C17C E3 E3 E3 E3
 101+ C180 AD AD F6 F6  	db  $AD, $AD, $F6, $F6, $F6, $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 101+ C184 F6 AD FC E3
 101+ C188 E3 E3 E3 E3
 101+ C18C E3 E3 E3 E3
 102+ C190 F6 FF FF F6  	db  $F6, $FF, $FF, $F6, $FF, $F6, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 102+ C194 FF F6 FC E3
 102+ C198 E3 E3 E3 E3
 102+ C19C E3 E3 E3 E3
 103+ C1A0 FF FF 20 F6  	db  $FF, $FF, $20, $F6, $20, $FF, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 103+ C1A4 20 FF FC E3
 103+ C1A8 E3 E3 E3 E3
 103+ C1AC E3 E3 E3 E3
 104+ C1B0 FF FF 20 F6  	db  $FF, $FF, $20, $F6, $20, $FF, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 104+ C1B4 20 FF FC E3
 104+ C1B8 E3 E3 E3 E3
 104+ C1BC E3 E3 E3 E3
 105+ C1C0 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $F6, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 105+ C1C4 F6 F6 FC E3
 105+ C1C8 E3 E3 E3 E3
 105+ C1CC E3 E3 E3 E3
 106+ C1D0 F6 F6 F6 FF  	db  $F6, $F6, $F6, $FF, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 106+ C1D4 F6 F6 E3 E3
 106+ C1D8 E3 E3 E3 E3
 106+ C1DC E3 E3 E3 E3
 107+ C1E0 F6 F6 F6 E1  	db  $F6, $F6, $F6, $E1, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 107+ C1E4 F6 F6 E3 E3
 107+ C1E8 E3 E3 E3 E3
 107+ C1EC E3 E3 E3 E3
 108+ C1F0 AD F6 F6 F6  	db  $AD, $F6, $F6, $F6, $F6, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 108+ C1F4 F6 FC E3 E3
 108+ C1F8 E3 E3 E3 E3
 108+ C1FC E3 E3 E3 E3
 109+ C200
 110+ C200
 111+ C200              ;bodies:
 112+ C200
 113+ C200              ;IDLE ANIMATION: 1,2
 114+ C200              idle1_A: ;2
 115+ C200 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6;
 115+ C204 E3 E3 E3 E3
 115+ C208 E3 E3 E3 20
 115+ C20C F6 F6 F6 F6
 116+ C210 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $AD, $AD;
 116+ C214 E3 E3 E3 E3
 116+ C218 E3 E3 20 F6
 116+ C21C F6 F6 AD AD
 117+ C220 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $AC, $F6, $F6;
 117+ C224 E3 E3 E3 E3
 117+ C228 E3 20 F6 F6
 117+ C22C F6 AC F6 F6
 118+ C230 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $F6;
 118+ C234 E3 E3 E3 E3
 118+ C238 E3 20 F6 F6
 118+ C23C F6 F6 F6 F6
 119+ C240 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $AD;
 119+ C244 E3 E3 E3 E3
 119+ C248 E3 20 F6 F6
 119+ C24C F6 F6 F6 AD
 120+ C250 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $AD, $F6;
 120+ C254 E3 E3 E3 E3
 120+ C258 E3 E3 20 F6
 120+ C25C F6 F6 AD F6
 121+ C260 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $AD, $AD, $F6;
 121+ C264 E3 E3 E3 E3
 121+ C268 E3 E3 E3 20
 121+ C26C 10 AD AD F6
 122+ C270 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $AD, $AD, $F6;
 122+ C274 E3 E3 E3 E3
 122+ C278 E3 E3 20 10
 122+ C27C 10 AD AD F6
 123+ C280 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $AD, $AD, $F6;
 123+ C284 E3 E3 E3 E3
 123+ C288 E3 E3 20 10
 123+ C28C 10 AD AD F6
 124+ C290 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $20, $20, $AD, $AD;
 124+ C294 E3 E3 E3 E3
 124+ C298 E3 20 10 10
 124+ C29C 20 20 AD AD
 125+ C2A0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $E3, $E3, $20, $20;
 125+ C2A4 E3 E3 E3 E3
 125+ C2A8 E3 E3 20 20
 125+ C2AC E3 E3 20 20
 126+ C2B0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20;
 126+ C2B4 E3 E3 E3 E3
 126+ C2B8 E3 E3 E3 E3
 126+ C2BC E3 E3 E3 20
 127+ C2C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20;
 127+ C2C4 E3 E3 E3 E3
 127+ C2C8 E3 E3 E3 E3
 127+ C2CC E3 E3 E3 20
 128+ C2D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20;
 128+ C2D4 E3 E3 E3 E3
 128+ C2D8 E3 E3 E3 E3
 128+ C2DC E3 E3 E3 20
 129+ C2E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 129+ C2E4 E3 E3 E3 E3
 129+ C2E8 E3 E3 E3 E3
 129+ C2EC E3 E3 E3 E3
 130+ C2F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 130+ C2F4 E3 E3 E3 E3
 130+ C2F8 E3 E3 E3 E3
 130+ C2FC E3 E3 E3 E3
 131+ C300              idle1_B: ;3
 132+ C300 AC AD AD AD  	db  $AC, $AD, $AD, $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 132+ C304 FC E3 E3 E3
 132+ C308 E3 E3 E3 E3
 132+ C30C E3 E3 E3 E3
 133+ C310 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 133+ C314 F6 E3 E3 E3
 133+ C318 E3 E3 E3 E3
 133+ C31C E3 E3 E3 E3
 134+ C320 AD F6 F6 F6  	db  $AD, $F6, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 134+ C324 F6 AD F6 E3
 134+ C328 E3 E3 E3 E3
 134+ C32C E3 E3 E3 E3
 135+ C330 AD AD F6 F6  	db  $AD, $AD, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 135+ C334 F6 AD F6 E3
 135+ C338 E3 E3 E3 E3
 135+ C33C E3 E3 E3 E3
 136+ C340 F6 F6 AD F6  	db  $F6, $F6, $AD, $F6, $F6, $AC, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 136+ C344 F6 AC F6 E3
 136+ C348 E3 E3 E3 E3
 136+ C34C E3 E3 E3 E3
 137+ C350 F6 F6 AD F6  	db  $F6, $F6, $AD, $F6, $AD, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 137+ C354 AD E3 E3 E3
 137+ C358 E3 E3 E3 E3
 137+ C35C E3 E3 E3 E3
 138+ C360 F6 F6 10 10  	db  $F6, $F6, $10, $10, $10, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 138+ C364 10 E3 E3 E3
 138+ C368 E3 E3 E3 E3
 138+ C36C E3 E3 E3 E3
 139+ C370 F6 F6 10 10  	db  $F6, $F6, $10, $10, $10, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 139+ C374 10 E3 E3 E3
 139+ C378 E3 E3 E3 E3
 139+ C37C E3 E3 E3 E3
 140+ C380 F6 F6 F6 10  	db  $F6, $F6, $F6, $10, $10, $10, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 140+ C384 10 10 E3 E3
 140+ C388 E3 E3 E3 E3
 140+ C38C E3 E3 E3 E3
 141+ C390 F6 F6 F6 AD  	db  $F6, $F6, $F6, $AD, $20, $10, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 141+ C394 20 10 E3 E3
 141+ C398 E3 E3 E3 E3
 141+ C39C E3 E3 E3 E3
 142+ C3A0 AC AC AD F6  	db  $AC, $AC, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 142+ C3A4 E3 E3 E3 E3
 142+ C3A8 E3 E3 E3 E3
 142+ C3AC E3 E3 E3 E3
 143+ C3B0 AD AD F6 F6  	db  $AD, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 143+ C3B4 E3 E3 E3 E3
 143+ C3B8 E3 E3 E3 E3
 143+ C3BC E3 E3 E3 E3
 144+ C3C0 AD AD F6 F6  	db  $AD, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 144+ C3C4 E3 E3 E3 E3
 144+ C3C8 E3 E3 E3 E3
 144+ C3CC E3 E3 E3 E3
 145+ C3D0 AD AD F6 F6  	db  $AD, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 145+ C3D4 F6 E3 E3 E3
 145+ C3D8 E3 E3 E3 E3
 145+ C3DC E3 E3 E3 E3
 146+ C3E0 20 AD AD F6  	db  $20, $AD, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 146+ C3E4 F6 E3 E3 E3
 146+ C3E8 E3 E3 E3 E3
 146+ C3EC E3 E3 E3 E3
 147+ C3F0 E3 20 20 20  	db  $E3, $20, $20, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 147+ C3F4 E3 E3 E3 E3
 147+ C3F8 E3 E3 E3 E3
 147+ C3FC E3 E3 E3 E3
 148+ C400
 149+ C400              idle2_A: ;4
 150+ C400 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6;
 150+ C404 E3 E3 E3 E3
 150+ C408 E3 E3 E3 20
 150+ C40C F6 F6 F6 F6
 151+ C410 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $AD, $AD;
 151+ C414 E3 E3 E3 E3
 151+ C418 E3 E3 20 F6
 151+ C41C F6 F6 AD AD
 152+ C420 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $AC, $F6, $F6;
 152+ C424 E3 E3 E3 E3
 152+ C428 E3 20 F6 F6
 152+ C42C F6 AC F6 F6
 153+ C430 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $F6;
 153+ C434 E3 E3 E3 E3
 153+ C438 E3 20 F6 F6
 153+ C43C F6 F6 F6 F6
 154+ C440 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $F6;
 154+ C444 E3 E3 E3 E3
 154+ C448 E3 20 F6 F6
 154+ C44C F6 F6 F6 F6
 155+ C450 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6;
 155+ C454 E3 E3 E3 E3
 155+ C458 E3 E3 20 F6
 155+ C45C F6 F6 F6 F6
 156+ C460 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $14, $14, $14;
 156+ C464 E3 E3 E3 E3
 156+ C468 E3 E3 E3 20
 156+ C46C 10 14 14 14
 157+ C470 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $14, $14;
 157+ C474 E3 E3 E3 E3
 157+ C478 E3 E3 20 10
 157+ C47C 10 10 14 14
 158+ C480 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $AD, $F6, $14;
 158+ C484 E3 E3 E3 E3
 158+ C488 E3 20 10 10
 158+ C48C 10 AD F6 14
 159+ C490 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $AD, $F6, $F6, $F6;
 159+ C494 E3 E3 E3 E3
 159+ C498 E3 E3 20 10
 159+ C49C AD F6 F6 F6
 160+ C4A0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $F6;
 160+ C4A4 E3 E3 E3 E3
 160+ C4A8 E3 E3 E3 20
 160+ C4AC AD F6 F6 F6
 161+ C4B0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $F6;
 161+ C4B4 E3 E3 E3 E3
 161+ C4B8 E3 E3 E3 20
 161+ C4BC AD F6 F6 F6
 162+ C4C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $F6;
 162+ C4C4 E3 E3 E3 E3
 162+ C4C8 E3 E3 E3 20
 162+ C4CC AD F6 F6 F6
 163+ C4D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6, $F6;
 163+ C4D4 E3 E3 E3 E3
 163+ C4D8 E3 E3 E3 20
 163+ C4DC AD AD F6 F6
 164+ C4E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6;
 164+ C4E4 E3 E3 E3 E3
 164+ C4E8 E3 E3 E3 E3
 164+ C4EC 20 AD AD F6
 165+ C4F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20;
 165+ C4F4 E3 E3 E3 E3
 165+ C4F8 E3 E3 E3 E3
 165+ C4FC E3 20 20 20
 166+ C500              idle2_B: ;5
 167+ C500 AC AD AD AD  	db  $AC, $AD, $AD, $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 167+ C504 FC E3 E3 E3
 167+ C508 E3 E3 E3 E3
 167+ C50C E3 E3 E3 E3
 168+ C510 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 168+ C514 F6 E3 E3 E3
 168+ C518 E3 E3 E3 E3
 168+ C51C E3 E3 E3 E3
 169+ C520 AD F6 F6 F6  	db  $AD, $F6, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 169+ C524 F6 AD F6 E3
 169+ C528 E3 E3 E3 E3
 169+ C52C E3 E3 E3 E3
 170+ C530 F6 AD F6 F6  	db  $F6, $AD, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 170+ C534 F6 AD F6 E3
 170+ C538 E3 E3 E3 E3
 170+ C53C E3 E3 E3 E3
 171+ C540 F6 AD F6 F6  	db  $F6, $AD, $F6, $F6, $AD, $AC, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 171+ C544 AD AC F6 E3
 171+ C548 E3 E3 E3 E3
 171+ C54C E3 E3 E3 E3
 172+ C550 AD F6 F6 AD  	db  $AD, $F6, $F6, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 172+ C554 F6 F6 E3 E3
 172+ C558 E3 E3 E3 E3
 172+ C55C E3 E3 E3 E3
 173+ C560 AC AD AD AD  	db  $AC, $AD, $AD, $AD, $F6, $F6, $10, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 173+ C564 F6 F6 10 E3
 173+ C568 E3 E3 E3 E3
 173+ C56C E3 E3 E3 E3
 174+ C570 10 10 AD AD  	db  $10, $10, $AD, $AD, $F6, $F6, $10, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 174+ C574 F6 F6 10 E3
 174+ C578 E3 E3 E3 E3
 174+ C57C E3 E3 E3 E3
 175+ C580 14 10 AD AD  	db  $14, $10, $AD, $AD, $F6, $F6, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 175+ C584 F6 F6 20 E3
 175+ C588 E3 E3 E3 E3
 175+ C58C E3 E3 E3 E3
 176+ C590 14 14 AD AD  	db  $14, $14, $AD, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 176+ C594 F6 F6 F6 E3
 176+ C598 E3 E3 E3 E3
 176+ C59C E3 E3 E3 E3
 177+ C5A0 20 14 20 AD  	db  $20, $14, $20, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 177+ C5A4 F6 F6 F6 E3
 177+ C5A8 E3 E3 E3 E3
 177+ C5AC E3 E3 E3 E3
 178+ C5B0 E3 20 E3 20  	db  $E3, $20, $E3, $20, $20, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 178+ C5B4 20 20 E3 E3
 178+ C5B8 E3 E3 E3 E3
 178+ C5BC E3 E3 E3 E3
 179+ C5C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 179+ C5C4 E3 E3 E3 E3
 179+ C5C8 E3 E3 E3 E3
 179+ C5CC E3 E3 E3 E3
 180+ C5D0 F6 E3 E3 E3  	db  $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 180+ C5D4 E3 E3 E3 E3
 180+ C5D8 E3 E3 E3 E3
 180+ C5DC E3 E3 E3 E3
 181+ C5E0 F6 E3 E3 E3  	db  $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 181+ C5E4 E3 E3 E3 E3
 181+ C5E8 E3 E3 E3 E3
 181+ C5EC E3 E3 E3 E3
 182+ C5F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 182+ C5F4 E3 E3 E3 E3
 182+ C5F8 E3 E3 E3 E3
 182+ C5FC E3 E3 E3 E3
 183+ C600
 184+ C600
 185+ C600
 186+ C600
 187+ C600              ;WALK ANIMATION 1,2,3,4
 188+ C600              walk1_a: ;6
 189+ C600 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $AC;
 189+ C604 E3 E3 E3 E3
 189+ C608 E3 E3 20 F6
 189+ C60C F6 F6 F6 AC
 190+ C610 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $F6;
 190+ C614 E3 E3 E3 E3
 190+ C618 E3 20 F6 F6
 190+ C61C F6 F6 F6 F6
 191+ C620 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $AD, $F6, $F6;
 191+ C624 E3 E3 E3 E3
 191+ C628 20 F6 F6 F6
 191+ C62C F6 AD F6 F6
 192+ C630 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $AC, $AD, $F6;
 192+ C634 E3 E3 E3 E3
 192+ C638 20 F6 F6 F6
 192+ C63C F6 AC AD F6
 193+ C640 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $F6, $AC;
 193+ C644 E3 E3 E3 E3
 193+ C648 20 F6 F6 F6
 193+ C64C F6 F6 F6 AC
 194+ C650 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $F6;
 194+ C654 E3 E3 E3 E3
 194+ C658 E3 20 F6 F6
 194+ C65C F6 F6 F6 F6
 195+ C660 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $F6, $F6, $AD, $AD;
 195+ C664 E3 E3 E3 E3
 195+ C668 E3 E3 20 20
 195+ C66C F6 F6 AD AD
 196+ C670 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $F6, $F6;
 196+ C674 E3 E3 E3 E3
 196+ C678 E3 E3 20 10
 196+ C67C 10 10 F6 F6
 197+ C680 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $AC, $F6, $F6, $F6;
 197+ C684 E3 E3 E3 E3
 197+ C688 E3 20 10 10
 197+ C68C AC F6 F6 F6
 198+ C690 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $AD, $AD, $F6, $F6;
 198+ C694 E3 E3 E3 E3
 198+ C698 20 10 10 10
 198+ C69C AD AD F6 F6
 199+ C6A0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20, $AD, $AD, $F6, $F6;
 199+ C6A4 E3 E3 E3 E3
 199+ C6A8 E3 20 20 20
 199+ C6AC AD AD F6 F6
 200+ C6B0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6;
 200+ C6B4 E3 E3 E3 E3
 200+ C6B8 E3 E3 E3 E3
 200+ C6BC 20 AD F6 F6
 201+ C6C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6;
 201+ C6C4 E3 E3 E3 E3
 201+ C6C8 E3 E3 E3 E3
 201+ C6CC 20 AD AD F6
 202+ C6D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6;
 202+ C6D4 E3 E3 E3 E3
 202+ C6D8 E3 E3 E3 E3
 202+ C6DC 20 AD AD F6
 203+ C6E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD;
 203+ C6E4 E3 E3 E3 E3
 203+ C6E8 E3 E3 E3 E3
 203+ C6EC E3 20 AD AD
 204+ C6F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20;
 204+ C6F4 E3 E3 E3 E3
 204+ C6F8 E3 E3 E3 E3
 204+ C6FC E3 E3 20 20
 205+ C700              walk1_b: ;7
 206+ C700 AD AD AD FC  	db  $AD, $AD, $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 206+ C704 E3 E3 E3 E3
 206+ C708 E3 E3 E3 E3
 206+ C70C E3 E3 E3 E3
 207+ C710 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 207+ C714 E3 E3 E3 E3
 207+ C718 E3 E3 E3 E3
 207+ C71C E3 E3 E3 E3
 208+ C720 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 208+ C724 F6 E3 E3 E3
 208+ C728 E3 E3 E3 E3
 208+ C72C E3 E3 E3 E3
 209+ C730 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 209+ C734 AD F6 E3 E3
 209+ C738 E3 E3 E3 E3
 209+ C73C E3 E3 E3 E3
 210+ C740 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 210+ C744 AD F6 E3 E3
 210+ C748 E3 E3 E3 E3
 210+ C74C E3 E3 E3 E3
 211+ C750 AC AD AD F6  	db  $AC, $AD, $AD, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 211+ C754 AD F6 E3 E3
 211+ C758 E3 E3 E3 E3
 211+ C75C E3 E3 E3 E3
 212+ C760 10 14 14 14  	db  $10, $14, $14, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 212+ C764 E3 E3 E3 E3
 212+ C768 E3 E3 E3 E3
 212+ C76C E3 E3 E3 E3
 213+ C770 10 14 14 10  	db  $10, $14, $14, $10, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 213+ C774 14 E3 E3 E3
 213+ C778 E3 E3 E3 E3
 213+ C77C E3 E3 E3 E3
 214+ C780 F6 10 14 10  	db  $F6, $10, $14, $10, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 214+ C784 14 E3 E3 E3
 214+ C788 E3 E3 E3 E3
 214+ C78C E3 E3 E3 E3
 215+ C790 F6 20 AD 14  	db  $F6, $20, $AD, $14, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 215+ C794 14 E3 E3 E3
 215+ C798 E3 E3 E3 E3
 215+ C79C E3 E3 E3 E3
 216+ C7A0 F6 AC AD F6  	db  $F6, $AC, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 216+ C7A4 E3 E3 E3 E3
 216+ C7A8 E3 E3 E3 E3
 216+ C7AC E3 E3 E3 E3
 217+ C7B0 F6 AC F6 E3  	db  $F6, $AC, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 217+ C7B4 E3 E3 E3 E3
 217+ C7B8 E3 E3 E3 E3
 217+ C7BC E3 E3 E3 E3
 218+ C7C0 F6 E3 E3 E3  	db  $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 218+ C7C4 E3 E3 E3 E3
 218+ C7C8 E3 E3 E3 E3
 218+ C7CC E3 E3 E3 E3
 219+ C7D0 F6 F6 E3 E3  	db  $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 219+ C7D4 E3 E3 E3 E3
 219+ C7D8 E3 E3 E3 E3
 219+ C7DC E3 E3 E3 E3
 220+ C7E0 F6 F6 E3 E3  	db  $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 220+ C7E4 E3 E3 E3 E3
 220+ C7E8 E3 E3 E3 E3
 220+ C7EC E3 E3 E3 E3
 221+ C7F0 20 E3 E3 E3  	db  $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 221+ C7F4 E3 E3 E3 E3
 221+ C7F8 E3 E3 E3 E3
 221+ C7FC E3 E3 E3 E3
 222+ C800
 223+ C800
 224+ C800
 225+ C800              walk2_a: ;8
 226+ C800 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6;
 226+ C804 E3 E3 E3 E3
 226+ C808 E3 E3 E3 E3
 226+ C80C 20 F6 F6 F6
 227+ C810 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6;
 227+ C814 E3 E3 E3 E3
 227+ C818 E3 E3 E3 20
 227+ C81C F6 F6 F6 F6
 228+ C820 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $AD;
 228+ C824 E3 E3 E3 E3
 228+ C828 E3 E3 20 F6
 228+ C82C F6 F6 F6 AD
 229+ C830 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $AC;
 229+ C834 E3 E3 E3 E3
 229+ C838 E3 E3 20 F6
 229+ C83C F6 F6 F6 AC
 230+ C840 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6;
 230+ C844 E3 E3 E3 E3
 230+ C848 E3 E3 20 F6
 230+ C84C F6 F6 F6 F6
 231+ C850 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6;
 231+ C854 E3 E3 E3 E3
 231+ C858 E3 E3 E3 20
 231+ C85C F6 F6 F6 F6
 232+ C860 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $F6, $F6;
 232+ C864 E3 E3 E3 E3
 232+ C868 E3 E3 E3 E3
 232+ C86C 20 20 F6 F6
 233+ C870 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20, $10, $10, $10;
 233+ C874 E3 E3 E3 E3
 233+ C878 E3 E3 20 20
 233+ C87C 20 10 10 10
 234+ C880 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $AD, $AD, $10, $10;
 234+ C884 E3 E3 E3 E3
 234+ C888 E3 20 AD AD
 234+ C88C AD AD 10 10
 235+ C890 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $AD, $AD, $AD, $10;
 235+ C894 E3 E3 E3 E3
 235+ C898 E3 20 AD AD
 235+ C89C AD AD AD 10
 236+ C8A0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $AC, $AC, $20;
 236+ C8A4 E3 E3 E3 E3
 236+ C8A8 E3 20 AD F6
 236+ C8AC F6 AC AC 20
 237+ C8B0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $20, $20, $E3;
 237+ C8B4 E3 E3 E3 E3
 237+ C8B8 E3 20 AD F6
 237+ C8BC F6 20 20 E3
 238+ C8C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $20, $E3, $E3, $E3;
 238+ C8C4 E3 E3 E3 E3
 238+ C8C8 E3 20 AD F6
 238+ C8CC 20 E3 E3 E3
 239+ C8D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $E3, $E3, $E3, $E3;
 239+ C8D4 E3 E3 E3 E3
 239+ C8D8 E3 E3 20 20
 239+ C8DC E3 E3 E3 E3
 240+ C8E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 240+ C8E4 E3 E3 E3 E3
 240+ C8E8 E3 E3 E3 E3
 240+ C8EC E3 E3 E3 E3
 241+ C8F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 241+ C8F4 E3 E3 E3 E3
 241+ C8F8 E3 E3 E3 E3
 241+ C8FC E3 E3 E3 E3
 242+ C900              walk2_b: ;9
 243+ C900 F6 AC AD AD  	db  $F6, $AC, $AD, $AD, $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 243+ C904 AD FC E3 E3
 243+ C908 E3 E3 E3 E3
 243+ C90C E3 E3 E3 E3
 244+ C910 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 244+ C914 F6 E3 E3 E3
 244+ C918 E3 E3 E3 E3
 244+ C91C E3 E3 E3 E3
 245+ C920 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 245+ C924 F6 F6 E3 E3
 245+ C928 E3 E3 E3 E3
 245+ C92C E3 E3 E3 E3
 246+ C930 AD F6 F6 F6  	db  $AD, $F6, $F6, $F6, $F6, $F6, $AC, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 246+ C934 F6 F6 AC F6
 246+ C938 E3 E3 E3 E3
 246+ C93C E3 E3 E3 E3
 247+ C940 F6 AD F6 F6  	db  $F6, $AD, $F6, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 247+ C944 F6 F6 AD F6
 247+ C948 E3 E3 E3 E3
 247+ C94C E3 E3 E3 E3
 248+ C950 F6 F6 AC AD  	db  $F6, $F6, $AC, $AD, $AD, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 248+ C954 AD F6 AD F6
 248+ C958 E3 E3 E3 E3
 248+ C95C E3 E3 E3 E3
 249+ C960 AD F6 F6 F6  	db  $AD, $F6, $F6, $F6, $F6, $10, $AC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 249+ C964 F6 10 AC E3
 249+ C968 E3 E3 E3 E3
 249+ C96C E3 E3 E3 E3
 250+ C970 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $F6, $10, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 250+ C974 F6 F6 10 E3
 250+ C978 E3 E3 E3 E3
 250+ C97C E3 E3 E3 E3
 251+ C980 10 AD AD F6  	db  $10, $AD, $AD, $F6, $F6, $F6, $F6, $E3, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3;
 251+ C984 F6 F6 F6 E3
 251+ C988 F6 F6 E3 E3
 251+ C98C E3 E3 E3 E3
 252+ C990 10 20 10 AD  	db  $10, $20, $10, $AD, $AD, $F6, $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3;
 252+ C994 AD F6 F6 F6
 252+ C998 F6 F6 F6 E3
 252+ C99C E3 E3 E3 E3
 253+ C9A0 10 20 20 20  	db  $10, $20, $20, $20, $AD, $AD, $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3;
 253+ C9A4 AD AD F6 F6
 253+ C9A8 F6 F6 F6 E3
 253+ C9AC E3 E3 E3 E3
 254+ C9B0 20 E3 E3 E3  	db  $20, $E3, $E3, $E3, $20, $AD, $AD, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3;
 254+ C9B4 20 AD AD AD
 254+ C9B8 F6 F6 E3 E3
 254+ C9BC E3 E3 E3 E3
 255+ C9C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $AD, $20, $E3, $E3, $E3, $E3, $E3, $E3;
 255+ C9C4 E3 20 AD AD
 255+ C9C8 AD 20 E3 E3
 255+ C9CC E3 E3 E3 E3
 256+ C9D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 256+ C9D4 E3 E3 20 20
 256+ C9D8 20 E3 E3 E3
 256+ C9DC E3 E3 E3 E3
 257+ C9E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 257+ C9E4 E3 E3 E3 E3
 257+ C9E8 E3 E3 E3 E3
 257+ C9EC E3 E3 E3 E3
 258+ C9F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 258+ C9F4 E3 E3 E3 E3
 258+ C9F8 E3 E3 E3 E3
 258+ C9FC E3 E3 E3 E3
 259+ CA00
 260+ CA00
 261+ CA00
 262+ CA00              walk3_a: ;10
 263+ CA00 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6;
 263+ CA04 E3 E3 E3 E3
 263+ CA08 E3 E3 E3 20
 263+ CA0C F6 F6 F6 F6
 264+ CA10 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6;
 264+ CA14 E3 E3 E3 E3
 264+ CA18 E3 E3 20 F6
 264+ CA1C F6 F6 F6 F6
 265+ CA20 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $AC, $F6;
 265+ CA24 E3 E3 E3 E3
 265+ CA28 E3 20 F6 F6
 265+ CA2C F6 F6 AC F6
 266+ CA30 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $AD, $AC;
 266+ CA34 E3 E3 E3 E3
 266+ CA38 E3 20 F6 F6
 266+ CA3C F6 F6 AD AC
 267+ CA40 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $F6;
 267+ CA44 E3 E3 E3 E3
 267+ CA48 E3 20 F6 F6
 267+ CA4C F6 F6 F6 F6
 268+ CA50 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6;
 268+ CA54 E3 E3 E3 E3
 268+ CA58 E3 E3 20 F6
 268+ CA5C F6 F6 F6 F6
 269+ CA60 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20, $20, $F6, $F6, $F6;
 269+ CA64 E3 E3 E3 E3
 269+ CA68 E3 20 20 20
 269+ CA6C 20 F6 F6 F6
 270+ CA70 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $10, $14, $F6, $F6;
 270+ CA74 E3 E3 E3 E3
 270+ CA78 20 10 10 10
 270+ CA7C 10 14 F6 F6
 271+ CA80 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $10, $10, $14;
 271+ CA84 E3 E3 E3 E3
 271+ CA88 E3 20 10 10
 271+ CA8C 10 10 10 14
 272+ CA90 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $AD, $10, $10, $10;
 272+ CA94 E3 E3 E3 E3
 272+ CA98 E3 E3 20 10
 272+ CA9C AD 10 10 10
 273+ CAA0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6, $10, $10;
 273+ CAA4 E3 E3 E3 E3
 273+ CAA8 E3 E3 20 AD
 273+ CAAC AD F6 10 10
 274+ CAB0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6, $F6, $F6;
 274+ CAB4 E3 E3 E3 E3
 274+ CAB8 E3 E3 20 AD
 274+ CABC AD F6 F6 F6
 275+ CAC0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $20;
 275+ CAC4 E3 E3 E3 E3
 275+ CAC8 E3 E3 E3 20
 275+ CACC AD F6 F6 20
 276+ CAD0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20, $E3;
 276+ CAD4 E3 E3 E3 E3
 276+ CAD8 E3 E3 E3 E3
 276+ CADC 20 20 20 E3
 277+ CAE0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 277+ CAE4 E3 E3 E3 E3
 277+ CAE8 E3 E3 E3 E3
 277+ CAEC E3 E3 E3 E3
 278+ CAF0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 278+ CAF4 E3 E3 E3 E3
 278+ CAF8 E3 E3 E3 E3
 278+ CAFC E3 E3 E3 E3
 279+ CB00
 280+ CB00
 281+ CB00
 282+ CB00              walk3_b: ;11
 283+ CB00 AC AD AD AD  	db  $AC, $AD, $AD, $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 283+ CB04 FC E3 E3 E3
 283+ CB08 E3 E3 E3 E3
 283+ CB0C E3 E3 E3 E3
 284+ CB10 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 284+ CB14 E3 E3 E3 E3
 284+ CB18 E3 E3 E3 E3
 284+ CB1C E3 E3 E3 E3
 285+ CB20 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 285+ CB24 F6 E3 E3 E3
 285+ CB28 E3 E3 E3 E3
 285+ CB2C E3 E3 E3 E3
 286+ CB30 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 286+ CB34 F6 E3 E3 E3
 286+ CB38 E3 E3 E3 E3
 286+ CB3C E3 E3 E3 E3
 287+ CB40 AD F6 F6 F6  	db  $AD, $F6, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 287+ CB44 F6 AD F6 E3
 287+ CB48 E3 E3 E3 E3
 287+ CB4C E3 E3 E3 E3
 288+ CB50 F6 AD F6 F6  	db  $F6, $AD, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 288+ CB54 F6 AD F6 E3
 288+ CB58 E3 E3 E3 E3
 288+ CB5C E3 E3 E3 E3
 289+ CB60 F6 AD F6 F6  	db  $F6, $AD, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 289+ CB64 F6 AD F6 E3
 289+ CB68 E3 E3 E3 E3
 289+ CB6C E3 E3 E3 E3
 290+ CB70 AD AD AD AD  	db  $AD, $AD, $AD, $AD, $14, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 290+ CB74 14 14 E3 E3
 290+ CB78 E3 E3 E3 E3
 290+ CB7C E3 E3 E3 E3
 291+ CB80 14 14 14 14  	db  $14, $14, $14, $14, $14, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 291+ CB84 14 14 E3 E3
 291+ CB88 E3 E3 E3 E3
 291+ CB8C E3 E3 E3 E3
 292+ CB90 10 14 14 F6  	db  $10, $14, $14, $F6, $F6, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 292+ CB94 F6 14 E3 E3
 292+ CB98 E3 E3 E3 E3
 292+ CB9C E3 E3 E3 E3
 293+ CBA0 10 10 AD F6  	db  $10, $10, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 293+ CBA4 F6 F6 E3 E3
 293+ CBA8 E3 E3 E3 E3
 293+ CBAC E3 E3 E3 E3
 294+ CBB0 20 10 AD F6  	db  $20, $10, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 294+ CBB4 F6 F6 E3 E3
 294+ CBB8 E3 E3 E3 E3
 294+ CBBC E3 E3 E3 E3
 295+ CBC0 E3 20 AD F6  	db  $E3, $20, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 295+ CBC4 F6 F6 E3 E3
 295+ CBC8 E3 E3 E3 E3
 295+ CBCC E3 E3 E3 E3
 296+ CBD0 E3 20 AD AD  	db  $E3, $20, $AD, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 296+ CBD4 F6 F6 F6 E3
 296+ CBD8 E3 E3 E3 E3
 296+ CBDC E3 E3 E3 E3
 297+ CBE0 E3 E3 20 AD  	db  $E3, $E3, $20, $AD, $AD, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 297+ CBE4 AD AD F6 E3
 297+ CBE8 E3 E3 E3 E3
 297+ CBEC E3 E3 E3 E3
 298+ CBF0 E3 E3 E3 20  	db  $E3, $E3, $E3, $20, $20, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 298+ CBF4 20 20 E3 E3
 298+ CBF8 E3 E3 E3 E3
 298+ CBFC E3 E3 E3 E3
 299+ CC00
 300+ CC00
 301+ CC00
 302+ CC00              walk4_a: ;12
 303+ CC00 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $F6;
 303+ CC04 E3 E3 E3 E3
 303+ CC08 E3 E3 E3 E3
 303+ CC0C E3 20 20 F6
 304+ CC10 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6;
 304+ CC14 E3 E3 E3 E3
 304+ CC18 E3 E3 E3 E3
 304+ CC1C E3 20 F6 F6
 305+ CC20 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6;
 305+ CC24 E3 E3 E3 E3
 305+ CC28 E3 E3 E3 E3
 305+ CC2C 20 F6 F6 F6
 306+ CC30 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6;
 306+ CC34 E3 E3 E3 E3
 306+ CC38 E3 E3 E3 E3
 306+ CC3C 20 F6 F6 F6
 307+ CC40 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6;
 307+ CC44 E3 E3 E3 E3
 307+ CC48 E3 E3 E3 E3
 307+ CC4C 20 F6 F6 F6
 308+ CC50 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $10, $10, $F6, $F6;
 308+ CC54 E3 E3 E3 E3
 308+ CC58 E3 E3 20 20
 308+ CC5C 10 10 F6 F6
 309+ CC60 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $10, $10, $10;
 309+ CC64 E3 E3 E3 E3
 309+ CC68 E3 20 10 10
 309+ CC6C 10 10 10 10
 310+ CC70 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $10, $10;
 310+ CC74 E3 E3 E3 E3
 310+ CC78 E3 E3 20 10
 310+ CC7C 10 10 10 10
 311+ CC80 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $20, $10, $10, $10, $14;
 311+ CC84 E3 E3 E3 E3
 311+ CC88 E3 20 10 20
 311+ CC8C 10 10 10 14
 312+ CC90 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $10, $10, $10, $10;
 312+ CC94 E3 E3 E3 E3
 312+ CC98 E3 E3 20 AD
 312+ CC9C 10 10 10 10
 313+ CCA0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $10, $10, $F6, $F6;
 313+ CCA4 E3 E3 E3 E3
 313+ CCA8 E3 20 AD AD
 313+ CCAC 10 10 F6 F6
 314+ CCB0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6, $F6, $F6, $E3;
 314+ CCB4 E3 E3 E3 E3
 314+ CCB8 E3 20 AD AD
 314+ CCBC F6 F6 F6 E3
 315+ CCC0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $F6, $E3, $E3;
 315+ CCC4 E3 E3 E3 E3
 315+ CCC8 E3 20 AD F6
 315+ CCCC F6 F6 E3 E3
 316+ CCD0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $E3, $E3;
 316+ CCD4 E3 E3 E3 E3
 316+ CCD8 E3 E3 20 F6
 316+ CCDC F6 F6 E3 E3
 317+ CCE0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $E3, $E3, $E3;
 317+ CCE4 E3 E3 E3 E3
 317+ CCE8 E3 E3 E3 20
 317+ CCEC 20 E3 E3 E3
 318+ CCF0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 318+ CCF4 E3 E3 E3 E3
 318+ CCF8 E3 E3 E3 E3
 318+ CCFC E3 E3 E3 E3
 319+ CD00
 320+ CD00
 321+ CD00
 322+ CD00              walk4_b: ;13
 323+ CD00 F6 F6 AC AD  	db  $F6, $F6, $AC, $AD, $AD, $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 323+ CD04 AD AD FC E3
 323+ CD08 E3 E3 E3 E3
 323+ CD0C E3 E3 E3 E3
 324+ CD10 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 324+ CD14 F6 F6 E3 E3
 324+ CD18 E3 E3 E3 E3
 324+ CD1C E3 E3 E3 E3
 325+ CD20 F6 AD F6 F6  	db  $F6, $AD, $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 325+ CD24 F6 F6 F6 E3
 325+ CD28 E3 E3 E3 E3
 325+ CD2C E3 E3 E3 E3
 326+ CD30 F6 AC AD F6  	db  $F6, $AC, $AD, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 326+ CD34 F6 F6 F6 E3
 326+ CD38 E3 E3 E3 E3
 326+ CD3C E3 E3 E3 E3
 327+ CD40 F6 F6 F6 AD  	db  $F6, $F6, $F6, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 327+ CD44 F6 F6 F6 E3
 327+ CD48 E3 E3 E3 E3
 327+ CD4C E3 E3 E3 E3
 328+ CD50 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 328+ CD54 AD F6 F6 E3
 328+ CD58 E3 E3 E3 E3
 328+ CD5C E3 E3 E3 E3
 329+ CD60 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $AD, $14, $14, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 329+ CD64 AD 14 14 F6
 329+ CD68 F6 E3 E3 E3
 329+ CD6C E3 E3 E3 E3
 330+ CD70 10 F6 F6 14  	db  $10, $F6, $F6, $14, $14, $F6, $F6, $F6, $F6, $F6, $E3, $F6, $F6, $E3, $E3, $E3;
 330+ CD74 14 F6 F6 F6
 330+ CD78 F6 F6 E3 F6
 330+ CD7C F6 E3 E3 E3
 331+ CD80 14 14 14 14  	db  $14, $14, $14, $14, $14, $AD, $F6, $F6, $F6, $F6, $F6, $F6, $F6, $F6, $E3, $E3;
 331+ CD84 14 AD F6 F6
 331+ CD88 F6 F6 F6 F6
 331+ CD8C F6 F6 E3 E3
 332+ CD90 10 10 14 14  	db  $10, $10, $14, $14, $AD, $AD, $AD, $AD, $AD, $F6, $F6, $F6, $F6, $F6, $E3, $E3;
 332+ CD94 AD AD AD AD
 332+ CD98 AD F6 F6 F6
 332+ CD9C F6 F6 E3 E3
 333+ CDA0 20 14 20 20  	db  $20, $14, $20, $20, $20, $20, $20, $20, $AD, $AD, $F6, $F6, $F6, $20, $E3, $E3;
 333+ CDA4 20 20 20 20
 333+ CDA8 AD AD F6 F6
 333+ CDAC F6 20 E3 E3
 334+ CDB0 E3 20 E3 E3  	db  $E3, $20, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $AD, $20, $E3, $E3, $E3;
 334+ CDB4 E3 E3 E3 E3
 334+ CDB8 20 AD AD AD
 334+ CDBC 20 E3 E3 E3
 335+ CDC0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20, $E3, $E3, $E3, $E3;
 335+ CDC4 E3 E3 E3 E3
 335+ CDC8 E3 20 20 20
 335+ CDCC E3 E3 E3 E3
 336+ CDD0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 336+ CDD4 E3 E3 E3 E3
 336+ CDD8 E3 E3 E3 E3
 336+ CDDC E3 E3 E3 E3
 337+ CDE0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 337+ CDE4 E3 E3 E3 E3
 337+ CDE8 E3 E3 E3 E3
 337+ CDEC E3 E3 E3 E3
 338+ CDF0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 338+ CDF4 E3 E3 E3 E3
 338+ CDF8 E3 E3 E3 E3
 338+ CDFC E3 E3 E3 E3
 339+ CE00
 340+ CE00
 341+ CE00
 342+ CE00
 343+ CE00
 344+ CE00
 345+ CE00
 346+ CE00
 347+ CE00
 348+ CE00
 349+ CE00
 350+ CE00              throw1_a: ;14
 351+ CE00 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 351+ CE04 E3 E3 E3 E3
 351+ CE08 E3 E3 E3 E3
 351+ CE0C E3 E3 E3 E3
 352+ CE10 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 352+ CE14 E3 E3 E3 E3
 352+ CE18 E3 E3 E3 E3
 352+ CE1C E3 E3 E3 E3
 353+ CE20 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $FC, $E3, $FC, $E3, $D5, $FC, $FC, $FC, $E3, $E3, $E3;
 353+ CE24 E3 FC E3 FC
 353+ CE28 E3 D5 FC FC
 353+ CE2C FC E3 E3 E3
 354+ CE30 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $D5, $FC, $FC, $FC, $FC, $FC, $FC, $FC, $FC, $FC, $E3;
 354+ CE34 E3 D5 FC FC
 354+ CE38 FC FC FC FC
 354+ CE3C FC FC FC E3
 355+ CE40 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $FC, $D5, $FC, $FC, $FC, $FC, $FC, $FC, $FC, $FC, $FC, $FC;
 355+ CE44 FC D5 FC FC
 355+ CE48 FC FC FC FC
 355+ CE4C FC FC FC FC
 356+ CE50 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $FC, $D5, $FC, $FC, $D5, $D5, $FC, $FC, $FC, $FC, $FC;
 356+ CE54 E3 FC D5 FC
 356+ CE58 FC D5 D5 FC
 356+ CE5C FC FC FC FC
 357+ CE60 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $D5, $FC, $D5, $D5, $FC, $FC, $D5, $FC, $FC, $FC;
 357+ CE64 E3 E3 D5 FC
 357+ CE68 D5 D5 FC FC
 357+ CE6C D5 FC FC FC
 358+ CE70 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $D4, $D5, $FC, $D5, $FC, $FC, $FC, $D5, $AC, $FC, $FC;
 358+ CE74 E3 D4 D5 FC
 358+ CE78 D5 FC FC FC
 358+ CE7C D5 AC FC FC
 359+ CE80 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $D4, $D4, $D5, $FC, $FC, $FC, $FC, $AC, $AD, $FC, $AD;
 359+ CE84 E3 D4 D4 D5
 359+ CE88 FC FC FC FC
 359+ CE8C AC AD FC AD
 360+ CE90 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $B0, $D4, $D4, $FC, $D5, $FC, $AD, $AD, $AD, $AD, $F6;
 360+ CE94 E3 B0 D4 D4
 360+ CE98 FC D5 FC AD
 360+ CE9C AD AD AD F6
 361+ CEA0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $B0, $B0, $D4, $D4, $AD, $AD, $AD, $FF, $FF, $F6, $FF;
 361+ CEA4 E3 B0 B0 D4
 361+ CEA8 D4 AD AD AD
 361+ CEAC FF FF F6 FF
 362+ CEB0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $20, $20, $B0, $B0, $D4, $AD, $AD, $FF, $FF, $20, $F6, $20;
 362+ CEB4 20 20 B0 B0
 362+ CEB8 D4 AD AD FF
 362+ CEBC FF 20 F6 20
 363+ CEC0 E3 E3 E3 20  	db  $E3, $E3, $E3, $20, $AD, $D5, $20, $B0, $FC, $AD, $AD, $FF, $FF, $20, $F6, $20;
 363+ CEC4 AD D5 20 B0
 363+ CEC8 FC AD AD FF
 363+ CECC FF 20 F6 20
 364+ CED0 E3 E3 E3 20  	db  $E3, $E3, $E3, $20, $AD, $D5, $D5, $FC, $F6, $AD, $AD, $F6, $F6, $F6, $F6, $F6;
 364+ CED4 AD D5 D5 FC
 364+ CED8 F6 AD AD F6
 364+ CEDC F6 F6 F6 F6
 365+ CEE0 E3 E3 E3 20  	db  $E3, $E3, $E3, $20, $AD, $F6, $F6, $D5, $F6, $FC, $AD, $AD, $F6, $F6, $FF, $F6;
 365+ CEE4 AD F6 F6 D5
 365+ CEE8 F6 FC AD AD
 365+ CEEC F6 F6 FF F6
 366+ CEF0 E3 E3 E3 20  	db  $E3, $E3, $E3, $20, $AD, $F6, $F6, $F6, $F6, $FC, $AD, $AD, $F6, $F6, $E1, $F6;
 366+ CEF4 AD F6 F6 F6
 366+ CEF8 F6 FC AD AD
 366+ CEFC F6 F6 E1 F6
 367+ CF00
 368+ CF00
 369+ CF00
 370+ CF00              throw1_b: ;15
 371+ CF00 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 371+ CF04 E3 E3 E3 E3
 371+ CF08 E3 E3 E3 E3
 371+ CF0C E3 E3 E3 E3
 372+ CF10 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 372+ CF14 E3 E3 E3 E3
 372+ CF18 E3 E3 E3 E3
 372+ CF1C E3 E3 E3 E3
 373+ CF20 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 373+ CF24 E3 E3 E3 E3
 373+ CF28 E3 E3 E3 E3
 373+ CF2C E3 E3 E3 E3
 374+ CF30 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 374+ CF34 E3 E3 E3 E3
 374+ CF38 E3 E3 E3 E3
 374+ CF3C E3 E3 E3 E3
 375+ CF40 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 375+ CF44 E3 E3 E3 E3
 375+ CF48 E3 E3 E3 E3
 375+ CF4C E3 E3 E3 E3
 376+ CF50 FC E3 E3 E3  	db  $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 376+ CF54 E3 E3 E3 E3
 376+ CF58 E3 E3 E3 E3
 376+ CF5C E3 E3 E3 E3
 377+ CF60 FC E3 E3 E3  	db  $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 377+ CF64 E3 E3 E3 E3
 377+ CF68 E3 E3 E3 E3
 377+ CF6C E3 E3 E3 E3
 378+ CF70 FC FC E3 E3  	db  $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 378+ CF74 E3 E3 E3 E3
 378+ CF78 E3 E3 E3 E3
 378+ CF7C E3 E3 E3 E3
 379+ CF80 FC FC E3 E3  	db  $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 379+ CF84 E3 E3 E3 E3
 379+ CF88 E3 E3 E3 E3
 379+ CF8C E3 E3 E3 E3
 380+ CF90 AD FC E3 E3  	db  $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 380+ CF94 E3 E3 E3 E3
 380+ CF98 E3 E3 E3 E3
 380+ CF9C E3 E3 E3 E3
 381+ CFA0 F6 FC E3 E3  	db  $F6, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 381+ CFA4 E3 E3 E3 E3
 381+ CFA8 E3 E3 E3 E3
 381+ CFAC E3 E3 E3 E3
 382+ CFB0 FF E3 E3 E3  	db  $FF, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 382+ CFB4 E3 E3 E3 E3
 382+ CFB8 E3 E3 E3 E3
 382+ CFBC E3 E3 E3 E3
 383+ CFC0 FF E3 E3 E3  	db  $FF, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 383+ CFC4 E3 E3 E3 E3
 383+ CFC8 E3 E3 E3 E3
 383+ CFCC E3 E3 E3 E3
 384+ CFD0 F6 E3 E3 E3  	db  $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 384+ CFD4 E3 E3 E3 E3
 384+ CFD8 E3 E3 E3 E3
 384+ CFDC E3 E3 E3 E3
 385+ CFE0 F6 E3 E3 E3  	db  $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 385+ CFE4 E3 E3 E3 E3
 385+ CFE8 E3 E3 E3 E3
 385+ CFEC E3 E3 E3 E3
 386+ CFF0 F6 E3 E3 E3  	db  $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 386+ CFF4 E3 E3 E3 E3
 386+ CFF8 E3 E3 E3 E3
 386+ CFFC E3 E3 E3 E3
 387+ D000
 388+ D000
 389+ D000
 390+ D000              throw1_c: ;16
 391+ D000 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $F6, $F6, $F6, $AD, $AD, $F6, $F6, $F6;
 391+ D004 20 AD F6 F6
 391+ D008 F6 F6 F6 AD
 391+ D00C AD F6 F6 F6
 392+ D010 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $F6, $F6, $F6, $F6, $F6, $AD, $AD, $AD;
 392+ D014 20 AD F6 F6
 392+ D018 F6 F6 F6 F6
 392+ D01C F6 AD AD AD
 393+ D020 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $AD, $F6, $F6, $F6, $F6, $F6, $F6;
 393+ D024 E3 20 AD F6
 393+ D028 F6 AD F6 F6
 393+ D02C F6 F6 F6 F6
 394+ D030 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $AD, $AD, $F6, $F6, $F6, $F6, $F6;
 394+ D034 E3 E3 20 AD
 394+ D038 AD AD AD F6
 394+ D03C F6 F6 F6 F6
 395+ D040 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $AC, $AD, $AD, $F6, $F6, $F6, $F6;
 395+ D044 E3 E3 E3 20
 395+ D048 20 AC AD AD
 395+ D04C F6 F6 F6 F6
 396+ D050 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AC, $AD, $AD, $AD, $F6, $F6;
 396+ D054 E3 E3 E3 E3
 396+ D058 E3 20 AC AD
 396+ D05C AD AD F6 F6
 397+ D060 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $14, $14, $14, $14;
 397+ D064 E3 E3 E3 E3
 397+ D068 20 10 10 10
 397+ D06C 14 14 14 14
 398+ D070 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $10, $10, $14, $14, $14;
 398+ D074 E3 E3 E3 20
 398+ D078 10 10 10 10
 398+ D07C 10 14 14 14
 399+ D080 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $F6, $F6, $10, $14, $14;
 399+ D084 E3 E3 E3 20
 399+ D088 10 10 10 F6
 399+ D08C F6 10 14 14
 400+ D090 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $20, $AD, $F6, $F6, $F6, $10, $14;
 400+ D094 E3 E3 E3 20
 400+ D098 10 20 AD F6
 400+ D09C F6 F6 10 14
 401+ D0A0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $AD, $F6, $F6, $F6, $20, $10;
 401+ D0A4 E3 E3 E3 E3
 401+ D0A8 20 20 AD F6
 401+ D0AC F6 F6 20 10
 402+ D0B0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $F6, $F6, $E3, $20;
 402+ D0B4 E3 E3 E3 E3
 402+ D0B8 20 AD F6 F6
 402+ D0BC F6 F6 E3 20
 403+ D0C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6, $F6, $F6, $E3, $E3, $E3;
 403+ D0C4 E3 E3 E3 20
 403+ D0C8 AD AD F6 F6
 403+ D0CC F6 E3 E3 E3
 404+ D0D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6, $F6, $F6, $F6, $E3, $E3;
 404+ D0D4 E3 E3 E3 20
 404+ D0D8 AD AD F6 F6
 404+ D0DC F6 F6 E3 E3
 405+ D0E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $AD, $F6, $F6, $E3, $E3;
 405+ D0E4 E3 E3 E3 E3
 405+ D0E8 20 AD AD AD
 405+ D0EC F6 F6 E3 E3
 406+ D0F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20, $20, $E3, $E3, $E3;
 406+ D0F4 E3 E3 E3 E3
 406+ D0F8 E3 20 20 20
 406+ D0FC 20 E3 E3 E3
 407+ D100
 408+ D100
 409+ D100
 410+ D100              throw1_d: ;17
 411+ D100 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 411+ D104 E3 E3 E3 E3
 411+ D108 E3 E3 E3 E3
 411+ D10C E3 E3 E3 E3
 412+ D110 F6 E3 E3 E3  	db  $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 412+ D114 E3 E3 E3 E3
 412+ D118 E3 E3 E3 E3
 412+ D11C E3 E3 E3 E3
 413+ D120 AD F6 F6 E3  	db  $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 413+ D124 E3 E3 E3 E3
 413+ D128 E3 E3 E3 E3
 413+ D12C E3 E3 E3 E3
 414+ D130 F6 AD F6 F6  	db  $F6, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 414+ D134 F6 E3 E3 E3
 414+ D138 E3 E3 E3 E3
 414+ D13C E3 E3 E3 E3
 415+ D140 F6 AD F6 F6  	db  $F6, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 415+ D144 E3 E3 E3 E3
 415+ D148 E3 E3 E3 E3
 415+ D14C E3 E3 E3 E3
 416+ D150 14 14 20 E3  	db  $14, $14, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 416+ D154 E3 E3 E3 E3
 416+ D158 E3 E3 E3 E3
 416+ D15C E3 E3 E3 E3
 417+ D160 14 14 F6 F6  	db  $14, $14, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 417+ D164 F6 E3 E3 E3
 417+ D168 E3 E3 E3 E3
 417+ D16C E3 E3 E3 E3
 418+ D170 14 14 AD F6  	db  $14, $14, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 418+ D174 F6 F6 E3 E3
 418+ D178 E3 E3 E3 E3
 418+ D17C E3 E3 E3 E3
 419+ D180 14 AD AD F6  	db  $14, $AD, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 419+ D184 F6 F6 E3 E3
 419+ D188 E3 E3 E3 E3
 419+ D18C E3 E3 E3 E3
 420+ D190 14 20 AD AD  	db  $14, $20, $AD, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 420+ D194 F6 F6 F6 E3
 420+ D198 E3 E3 E3 E3
 420+ D19C E3 E3 E3 E3
 421+ D1A0 14 E3 20 AD  	db  $14, $E3, $20, $AD, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 421+ D1A4 AD F6 F6 E3
 421+ D1A8 E3 E3 E3 E3
 421+ D1AC E3 E3 E3 E3
 422+ D1B0 E3 E3 E3 20  	db  $E3, $E3, $E3, $20, $20, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 422+ D1B4 20 20 E3 E3
 422+ D1B8 E3 E3 E3 E3
 422+ D1BC E3 E3 E3 E3
 423+ D1C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 423+ D1C4 E3 E3 E3 E3
 423+ D1C8 E3 E3 E3 E3
 423+ D1CC E3 E3 E3 E3
 424+ D1D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 424+ D1D4 E3 E3 E3 E3
 424+ D1D8 E3 E3 E3 E3
 424+ D1DC E3 E3 E3 E3
 425+ D1E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 425+ D1E4 E3 E3 E3 E3
 425+ D1E8 E3 E3 E3 E3
 425+ D1EC E3 E3 E3 E3
 426+ D1F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 426+ D1F4 E3 E3 E3 E3
 426+ D1F8 E3 E3 E3 E3
 426+ D1FC E3 E3 E3 E3
 427+ D200
 428+ D200
 429+ D200
 430+ D200
 431+ D200
 432+ D200
 433+ D200
 434+ D200              throw2_a: ;18
 435+ D200 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 435+ D204 E3 E3 E3 E3
 435+ D208 E3 E3 E3 E3
 435+ D20C E3 E3 E3 E3
 436+ D210 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 436+ D214 E3 E3 E3 E3
 436+ D218 E3 E3 E3 E3
 436+ D21C E3 E3 E3 E3
 437+ D220 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 437+ D224 E3 E3 E3 E3
 437+ D228 E3 E3 E3 E3
 437+ D22C E3 E3 E3 E3
 438+ D230 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $FC, $E3, $E3, $E3, $E3;
 438+ D234 E3 E3 E3 E3
 438+ D238 E3 E3 E3 FC
 438+ D23C E3 E3 E3 E3
 439+ D240 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $FC, $FC, $E3, $FC, $E3, $E3, $FC, $FC;
 439+ D244 E3 E3 E3 E3
 439+ D248 FC FC E3 FC
 439+ D24C E3 E3 FC FC
 440+ D250 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $FC, $FC, $D5, $FC, $D5, $D5, $FC;
 440+ D254 E3 E3 E3 E3
 440+ D258 E3 FC FC D5
 440+ D25C FC D5 D5 FC
 441+ D260 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $FC, $FC, $D5, $D5, $FC, $D5, $D5, $D5;
 441+ D264 E3 E3 E3 E3
 441+ D268 FC FC D5 D5
 441+ D26C FC D5 D5 D5
 442+ D270 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $FC, $D5, $D5, $D5, $D5;
 442+ D274 E3 E3 E3 E3
 442+ D278 E3 20 D5 FC
 442+ D27C D5 D5 D5 D5
 443+ D280 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $D5, $D5, $D5, $D5;
 443+ D284 E3 E3 E3 E3
 443+ D288 20 D5 D5 D5
 443+ D28C D5 D5 D5 D5
 444+ D290 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $D5, $D5, $D5, $D5;
 444+ D294 E3 E3 E3 E3
 444+ D298 20 D5 D5 D5
 444+ D29C D5 D5 D5 D5
 445+ D2A0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $D5, $D5, $D5, $D5;
 445+ D2A4 E3 E3 E3 E3
 445+ D2A8 20 D5 D5 D5
 445+ D2AC D5 D5 D5 D5
 446+ D2B0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $D5, $D5, $D5, $D5;
 446+ D2B4 E3 E3 E3 E3
 446+ D2B8 20 D5 D5 D5
 446+ D2BC D5 D5 D5 D5
 447+ D2C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $D5, $D5, $D5, $D5;
 447+ D2C4 E3 E3 E3 E3
 447+ D2C8 20 D5 D5 D5
 447+ D2CC D5 D5 D5 D5
 448+ D2D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $D5, $D5, $D5, $D5;
 448+ D2D4 E3 E3 E3 E3
 448+ D2D8 20 D5 D5 D5
 448+ D2DC D5 D5 D5 D5
 449+ D2E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $D5, $D5, $D5;
 449+ D2E4 E3 E3 E3 E3
 449+ D2E8 E3 20 D5 D5
 449+ D2EC D5 D5 D5 D5
 450+ D2F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $D5, $AD, $F6;
 450+ D2F4 E3 E3 E3 E3
 450+ D2F8 E3 20 D5 D5
 450+ D2FC D5 D5 AD F6
 451+ D300
 452+ D300
 453+ D300
 454+ D300              throw2_b: ;19
 455+ D300 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 455+ D304 E3 E3 E3 E3
 455+ D308 E3 E3 E3 E3
 455+ D30C E3 E3 E3 E3
 456+ D310 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 456+ D314 E3 E3 E3 E3
 456+ D318 E3 E3 E3 E3
 456+ D31C E3 E3 E3 E3
 457+ D320 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 457+ D324 E3 E3 E3 E3
 457+ D328 E3 E3 E3 E3
 457+ D32C E3 E3 E3 E3
 458+ D330 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 458+ D334 E3 E3 E3 E3
 458+ D338 E3 E3 E3 E3
 458+ D33C E3 E3 E3 E3
 459+ D340 FC E3 E3 E3  	db  $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 459+ D344 E3 E3 E3 E3
 459+ D348 E3 E3 E3 E3
 459+ D34C E3 E3 E3 E3
 460+ D350 FC FC FC FC  	db  $FC, $FC, $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 460+ D354 E3 E3 E3 E3
 460+ D358 E3 E3 E3 E3
 460+ D35C E3 E3 E3 E3
 461+ D360 D5 FC FC FC  	db  $D5, $FC, $FC, $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 461+ D364 FC E3 E3 E3
 461+ D368 E3 E3 E3 E3
 461+ D36C E3 E3 E3 E3
 462+ D370 D5 FC FC FC  	db  $D5, $FC, $FC, $FC, $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 462+ D374 FC FC E3 E3
 462+ D378 E3 E3 E3 E3
 462+ D37C E3 E3 E3 E3
 463+ D380 D5 D5 FC FC  	db  $D5, $D5, $FC, $FC, $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 463+ D384 FC FC E3 E3
 463+ D388 E3 E3 E3 E3
 463+ D38C E3 E3 E3 E3
 464+ D390 D5 D5 FC FC  	db  $D5, $D5, $FC, $FC, $FC, $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 464+ D394 FC FC FC E3
 464+ D398 E3 E3 E3 E3
 464+ D39C E3 E3 E3 E3
 465+ D3A0 D5 D5 FC D5  	db  $D5, $D5, $FC, $D5, $FC, $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 465+ D3A4 FC FC FC E3
 465+ D3A8 E3 E3 E3 E3
 465+ D3AC E3 E3 E3 E3
 466+ D3B0 D5 D5 FC D5  	db  $D5, $D5, $FC, $D5, $FC, $FC, $AD, $E3, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 466+ D3B4 FC FC AD E3
 466+ D3B8 F6 E3 E3 E3
 466+ D3BC E3 E3 E3 E3
 467+ D3C0 D5 D5 D5 D5  	db  $D5, $D5, $D5, $D5, $AD, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 467+ D3C4 AD AD F6 F6
 467+ D3C8 F6 E3 E3 E3
 467+ D3CC E3 E3 E3 E3
 468+ D3D0 D5 D5 D5 AD  	db  $D5, $D5, $D5, $AD, $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 468+ D3D4 F6 F6 F6 F6
 468+ D3D8 F6 E3 E3 E3
 468+ D3DC E3 E3 E3 E3
 469+ D3E0 AD F6 F6 F6  	db  $AD, $F6, $F6, $F6, $F6, $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3;
 469+ D3E4 F6 F6 F6 F6
 469+ D3E8 F6 F6 E3 E3
 469+ D3EC E3 E3 E3 E3
 470+ D3F0 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $F6, $F6, $F6, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 470+ D3F4 F6 F6 F6 F6
 470+ D3F8 20 E3 E3 E3
 470+ D3FC E3 E3 E3 E3
 471+ D400
 472+ D400
 473+ D400
 474+ D400              throw2_c: ;20
 475+ D400 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $D5, $D5, $AD, $AD, $F6;
 475+ D404 E3 E3 E3 E3
 475+ D408 E3 20 AD D5
 475+ D40C D5 AD AD F6
 476+ D410 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $AD, $AD, $AD, $AD, $AD, $AD;
 476+ D414 E3 E3 E3 E3
 476+ D418 E3 E3 AD AD
 476+ D41C AD AD AD AD
 477+ D420 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $F6, $AD, $AD, $AD, $AD, $AD, $AD;
 477+ D424 E3 E3 E3 E3
 477+ D428 E3 F6 AD AD
 477+ D42C AD AD AD AD
 478+ D430 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $F6, $AD, $10, $10, $AD, $AD, $AD, $AD;
 478+ D434 E3 E3 E3 E3
 478+ D438 F6 AD 10 10
 478+ D43C AD AD AD AD
 479+ D440 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $AD, $10, $10, $10, $10, $14, $14, $AD;
 479+ D444 E3 E3 E3 E3
 479+ D448 AD 10 10 10
 479+ D44C 10 14 14 AD
 480+ D450 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $14, $14, $10, $10, $10;
 480+ D454 E3 E3 E3 20
 480+ D458 10 10 10 14
 480+ D45C 14 10 10 10
 481+ D460 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $20, $20, $AD, $AD, $10, $10, $10, $10, $14, $14, $14;
 481+ D464 E3 20 20 AD
 481+ D468 AD 10 10 10
 481+ D46C 10 14 14 14
 482+ D470 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $20, $AD, $AD, $AD, $AD, $10, $F6, $10, $10, $10, $10, $10;
 482+ D474 20 AD AD AD
 482+ D478 AD 10 F6 10
 482+ D47C 10 10 10 10
 483+ D480 E3 E3 E3 20  	db  $E3, $E3, $E3, $20, $AD, $AD, $AD, $AD, $F6, $F6, $F6, $F6, $10, $10, $10, $14;
 483+ D484 AD AD AD AD
 483+ D488 F6 F6 F6 F6
 483+ D48C 10 10 10 14
 484+ D490 E3 E3 E3 20  	db  $E3, $E3, $E3, $20, $AD, $AD, $F6, $F6, $F6, $F6, $F6, $20, $20, $20, $10, $14;
 484+ D494 AD AD F6 F6
 484+ D498 F6 F6 F6 20
 484+ D49C 20 20 10 14
 485+ D4A0 E3 E3 E3 20  	db  $E3, $E3, $E3, $20, $AD, $AD, $F6, $F6, $20, $20, $20, $E3, $E3, $E3, $20, $AD;
 485+ D4A4 AD AD F6 F6
 485+ D4A8 20 20 20 E3
 485+ D4AC E3 E3 20 AD
 486+ D4B0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $20, $F6, $F6, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20;
 486+ D4B4 20 F6 F6 20
 486+ D4B8 E3 E3 E3 E3
 486+ D4BC E3 E3 E3 20
 487+ D4C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $20, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20;
 487+ D4C4 E3 20 20 E3
 487+ D4C8 E3 E3 E3 E3
 487+ D4CC E3 E3 E3 20
 488+ D4D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 488+ D4D4 E3 E3 E3 E3
 488+ D4D8 E3 E3 E3 E3
 488+ D4DC E3 E3 E3 E3
 489+ D4E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 489+ D4E4 E3 E3 E3 E3
 489+ D4E8 E3 E3 E3 E3
 489+ D4EC E3 E3 E3 E3
 490+ D4F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 490+ D4F4 E3 E3 E3 E3
 490+ D4F8 E3 E3 E3 E3
 490+ D4FC E3 E3 E3 E3
 491+ D500
 492+ D500
 493+ D500
 494+ D500              throw2_d: ;21
 495+ D500 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $F6, $20, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 495+ D504 F6 F6 20 20
 495+ D508 E3 E3 E3 E3
 495+ D50C E3 E3 E3 E3
 496+ D510 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $20, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 496+ D514 20 20 E3 E3
 496+ D518 E3 E3 E3 E3
 496+ D51C E3 E3 E3 E3
 497+ D520 AD F6 F6 20  	db  $AD, $F6, $F6, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 497+ D524 E3 E3 E3 E3
 497+ D528 E3 E3 E3 E3
 497+ D52C E3 E3 E3 E3
 498+ D530 AD F6 F6 E3  	db  $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 498+ D534 E3 E3 E3 E3
 498+ D538 E3 E3 E3 E3
 498+ D53C E3 E3 E3 E3
 499+ D540 AD F6 F6 E3  	db  $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 499+ D544 E3 E3 E3 E3
 499+ D548 E3 E3 E3 E3
 499+ D54C E3 E3 E3 E3
 500+ D550 14 14 14 14  	db  $14, $14, $14, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 500+ D554 E3 E3 E3 E3
 500+ D558 E3 E3 E3 E3
 500+ D55C E3 E3 E3 E3
 501+ D560 14 14 14 14  	db  $14, $14, $14, $14, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 501+ D564 14 E3 E3 E3
 501+ D568 E3 E3 E3 E3
 501+ D56C E3 E3 E3 E3
 502+ D570 14 14 AD 14  	db  $14, $14, $AD, $14, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 502+ D574 14 E3 E3 E3
 502+ D578 E3 E3 E3 E3
 502+ D57C E3 E3 E3 E3
 503+ D580 14 AD F6 F6  	db  $14, $AD, $F6, $F6, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 503+ D584 14 E3 E3 E3
 503+ D588 E3 E3 E3 E3
 503+ D58C E3 E3 E3 E3
 504+ D590 AD AD F6 F6  	db  $AD, $AD, $F6, $F6, $E3, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 504+ D594 E3 14 E3 E3
 504+ D598 E3 E3 E3 E3
 504+ D59C E3 E3 E3 E3
 505+ D5A0 AD AD F6 F6  	db  $AD, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 505+ D5A4 E3 E3 E3 E3
 505+ D5A8 E3 E3 E3 E3
 505+ D5AC E3 E3 E3 E3
 506+ D5B0 AD AD AD F6  	db  $AD, $AD, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 506+ D5B4 F6 E3 E3 E3
 506+ D5B8 E3 E3 E3 E3
 506+ D5BC E3 E3 E3 E3
 507+ D5C0 AD AD AD F6  	db  $AD, $AD, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 507+ D5C4 F6 E3 E3 E3
 507+ D5C8 E3 E3 E3 E3
 507+ D5CC E3 E3 E3 E3
 508+ D5D0 20 AD AD AD  	db  $20, $AD, $AD, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 508+ D5D4 F6 E3 E3 E3
 508+ D5D8 E3 E3 E3 E3
 508+ D5DC E3 E3 E3 E3
 509+ D5E0 E3 20 AD AD  	db  $E3, $20, $AD, $AD, $AD, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 509+ D5E4 AD E3 E3 E3
 509+ D5E8 E3 E3 E3 E3
 509+ D5EC E3 E3 E3 E3
 510+ D5F0 E3 E3 20 20  	db  $E3, $E3, $20, $20, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 510+ D5F4 20 E3 E3 E3
 510+ D5F8 E3 E3 E3 E3
 510+ D5FC E3 E3 E3 E3
 511+ D600
 512+ D600
 513+ D600
 514+ D600
 515+ D600
 516+ D600
 517+ D600
 518+ D600              ;;;;;;Fonts
 519+ D600
 520+ D600                  MMU 6,17
 521+ D600              	org 0xC000
 522+ C000
 523+ C000 00 00 00...  	ds 64,0
 524+ C040              	incbin "fonts/font7.spr"
 525+ D040
 526+ D040
 527+ D040              ;; Layer2
 528+ D040
 529+ D040              	MMU 7 n,40
 530+ D040              	org $e000
 531+ E000              	incbin "assets/skybigrotated.bmp", 1078
# file closed: src/loadbins.asm
  54  E000
  55  E000
  56  E000
  57  E000              	SAVENEX OPEN "main.nex", start , stack_top
  58  E000                  SAVENEX CORE 3, 0, 0
  59  E000                  SAVENEX CFG 0, 0
  60  E000              	SAVENEX AUTO
  61  E000                  SAVENEX CLOSE
  62  E000
  63  E000
  64  E000
# file closed: src/main.asm
