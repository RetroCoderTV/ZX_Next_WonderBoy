# file opened: src/main.asm
  1   0000                  OPT --syntax=abfw     ; recommended sub-syntax of current sjasmplus
  2   0000                  ; "a" - multi-arguments for instructions require double-comma, i.e. `push hl,,de,,bc`
  3   0000                  ;     - this helps to avoid common pitfalls like `sub a,a` becoming 2x `sub a` in default syntax
  4   0000                  ;     - making it single "sub a from a" and enabling non-Zilog syntax `sub a,...`
  5   0000                  ; "b" - whole expression parentheses are legal for memory access only
  6   0000                  ;     - things like "ld b,(variable)" will become errors, as there's only ld b,immediate
  7   0000                  ;     - for regular expression parentheses you can disambiguate `ld b,+(1+2+3)` by unary +
  8   0000                  ; "f" - warn about fake instructions of sjasmplus (if used by accident)
  9   0000                  ;     - to use them intentionally, use comment to suppress warning: `ld hl,de ; fake`
 10   0000                  ;     - one extra warning from this class is Z80N extension `mul`, requiring explicit argument `mul de` or `mul d,e`
 11   0000                  ; "w" - report warnings as errors
 12   0000
 13   0000                  org 0x8000
 14   8000
 15   8000                  DEVICE ZXSPECTRUMNEXT
 16   8000              	CSPECTMAP main.map
 17   8000
 18   8000
 19   8000              start:
 20   8000              	; di
 21   8000 31 FE 7F     	ld sp,0x7FFE
 22   8003 ED 91 07 03  	nextreg $7,3 ;set Mhz mode (3=28mhz)
 23   8007 ED 91 15 0B  	nextreg $15,%00001011 ;sprites/layers system register
 24   800B CD 53 86     	call game_init
 25   800E C3 11 80     	jp main_loop
 26   8011
 27   8011              main_loop:
 28   8011 F3           	di
 29   8012 CD 6C 86     	call game_update
 30   8015 CD 8B 86     	call game_draw
 31   8018 FB           	ei
 32   8019 C3 11 80     	jp main_loop
 33   801C
 34   801C
 35   801C
 36   801C
 37   801C              STACK_SIZE equ 20
 38   801C 00 00 00...  stack_bottom ds STACK_SIZE, 0
 39   8030 00           stack_top db 0
 40   8031
 41   8031              	include 'retrotools\constants.asm'
# file opened: src/retrotools/constants.asm
  1+  8031              FALSE equ 0
  2+  8031              TRUE equ 1
  3+  8031
  4+  8031              DEAD equ 0
  5+  8031              ALIVE equ 1
  6+  8031
  7+  8031              NOT_VISIBLE equ 0
  8+  8031              VISIBLE equ 1
  9+  8031
 10+  8031              NOT_ENABLED equ 0
 11+  8031              ENABLED equ 1
 12+  8031
 13+  8031
 14+  8031              ;DIRECTIONS:
 15+  8031              LEFT equ 0
 16+  8031              RIGHT equ 1
 17+  8031              UP equ 2
 18+  8031              DOWN equ 3
 19+  8031
 20+  8031
 21+  8031              ;48k Screen
 22+  8031              SCREEN_WIDTH_CELLS equ 32
 23+  8031              SCREEN_HEIGHT_CELLS equ 24
 24+  8031
 25+  8031
 26+  8031
 27+  8031              ;Next Screen
 28+  8031              GUTTER equ 32
 29+  8031
 30+  8031
 31+  8031
 32+  8031
 33+  8031              END_OF_ARRAY equ 255
 34+  8031
 35+  8031
 36+  8031
 37+  8031
 38+  8031
 39+  8031
 40+  8031
 41+  8031
 42+  8031
 43+  8031
# file closed: src/retrotools/constants.asm
 42   8031              	include 'retrotools\tools.asm'
# file opened: src/retrotools/tools.asm
  1+  8031              ;MACROS
  2+  8031              	MACRO BREAKPOINT
  3+  8031 ~            		DW $01DD
  4+  8031              	ENDM
  5+  8031
  6+  8031              	MACRO CLIPTILES x1,y1,x2,y2
  7+  8031 ~            		ld a,x1
  8+  8031 ~            		nextreg $1b,a
  9+  8031 ~            		ld a,y1
 10+  8031 ~            		nextreg $1b,a
 11+  8031 ~            		ld a,x2
 12+  8031 ~            		nextreg $1b,a
 13+  8031 ~            		ld a,y2
 14+  8031 ~            		nextreg $1b,a
 15+  8031 ~
 16+  8031              	ENDM
 17+  8031
 18+  8031              	MACRO CLIP_LAYER2 x1,x2,y1,y2
 19+  8031 ~            		ld a,x1
 20+  8031 ~            		nextreg $18,a
 21+  8031 ~            		ld a,x2
 22+  8031 ~            		nextreg $18,a
 23+  8031 ~            		ld a,y1
 24+  8031 ~            		nextreg $18,a
 25+  8031 ~            		ld a,y2
 26+  8031 ~            		nextreg $18,a
 27+  8031 ~
 28+  8031              	ENDM
 29+  8031
 30+  8031
 31+  8031              	MACRO SUB_HL_A
 32+  8031 ~            	neg
 32+  8031 ~              add hl,a
 33+  8031              	ENDM
 34+  8031
 35+  8031
 36+  8031              ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 37+  8031              ;; Wait for n clock cycles
 38+  8031              ;; Inputs: BC=n
 39+  8031              ;; Outputs: none
 40+  8031              ;; Destroys: A,BC
 41+  8031              ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 42+  8031              wait:
 43+  8031 0B           	dec bc
 44+  8032 78           	ld a,b
 45+  8033 FE 00        	cp 0
 46+  8035 C2 31 80     	jp nz, wait
 47+  8038 C9           	ret
 48+  8039
 49+  8039
 50+  8039
 51+  8039              ;;;em00k wrote this;;;;
 52+  8039              ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 53+  8039              ;; Wait for vertical blank
 54+  8039              ;; Inputs: B=frames delay count
 55+  8039              ;; Outputs:
 56+  8039              ;; Destroys:
 57+  8039              ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 58+  8039              WaitRasterLine:
 59+  8039 CD 3F 80     	call RastererWait
 60+  803C 10 FB        	djnz WaitRasterLine
 61+  803E C9           	ret
 62+  803F              RastererWait:
 63+  803F C5           	push bc
 64+  8040 1E 10        	ld e,16
 64+  8042 3E 1F          ld a,$1f
 64+  8044 01 3B 24       ld bc,$243b
 64+  8047 ED 79          out (c),a
 64+  8049 04             inc b
 65+  804A              WaitForLinea:
 66+  804A ED 78        	in a,(c)
 66+  804C BB             cp e
 66+  804D 20 FB          jr nz,WaitForLinea
 67+  804F C1           	pop bc
 68+  8050 C9           	ret
 69+  8051
 70+  8051
 71+  8051
 72+  8051
 73+  8051
 74+  8051
 75+  8051
 76+  8051
 77+  8051
 78+  8051
 79+  8051
 80+  8051              LAYER2_ACCESS_PORT	EQU 	$123B
 81+  8051
 82+  8051              		;----------------
 83+  8051              		; Original code by Michael Ware adjustd to work with ZXB
 84+  8051              		; Plot tile to layer 2 (needs to accept > 256 tiles)
 85+  8051              		; in - hl = y/x tile coordinate (0-17, 0-31)
 86+  8051              		; in - a = number of tile to display
 87+  8051              		;----------------
 88+  8051              PlotTile8:
 89+  8051 ED 91 56 11  		nextreg $56,17
 90+  8055
 91+  8055 16 40        		ld d,64
 92+  8057 5F           		ld e,a					; 11
 93+  8058 ED 30        		mul de
 94+  805A
 95+  805A 3E C0        		ld a,%11000000 			; this points to $c000
 96+  805C B2           		or d		 			; 8
 97+  805D EB           		ex de,hl				; 4			; cannot avoid an ex (de now = yx)
 98+  805E 67           		ld h,a					; 4
 99+  805F 7B           		ld a,e
100+  8060 07           		rlca
101+  8061 07           		rlca
102+  8062 07           		rlca
103+  8063 5F           		ld e,a					; 4+4+4+4+4 = 20	; mul x,8
104+  8064 7A           		ld a,d
105+  8065 07           		rlca
106+  8066 07           		rlca
107+  8067 07           		rlca
108+  8068 57           		ld d,a					; 4+4+4+4+4 = 20	; mul y,8
109+  8069 E6 C0        		and 192
110+  806B F6 03        		or 3					; or 3 to keep layer on				; 8
111+  806D 01 3B 12     		ld bc,LAYER2_ACCESS_PORT
112+  8070 ED 79        		out (c),a      ; 21			; select bank
113+  8072
114+  8072 7A           		ld a,d
115+  8073 E6 3F        		and 63
116+  8075 57           		ld d,a					; clear top 2 bits of y (dest) (4+4+4 = 12)
117+  8076              		; T96 here
118+  8076 3E 08        		ld a,8					; 7
119+  8078              .plotTilesLoop2:
120+  8078 D5           		push de					; 11
121+  8079 ED A0        		ldi
122+  807B ED A0        		ldi
123+  807D ED A0        		ldi
124+  807F ED A0        		ldi
125+  8081 ED A0        		ldi
126+  8083 ED A0        		ldi
127+  8085 ED A0        		ldi
128+  8087 ED A0        		ldi					; 8 * 16 = 128
129+  8089
130+  8089 D1           		pop de					; 11
131+  808A 14           		inc d					; 4 add 256 for next line down
132+  808B 3D           		dec a					; 4
133+  808C 20 EA        		jr nz,.plotTilesLoop2			; 12/7
134+  808E
135+  808E ED 91 56 0E  		nextreg $56,14 ;$0e
136+  8092 C9           		ret
137+  8093
138+  8093
139+  8093
140+  8093
141+  8093
142+  8093
143+  8093              ; ;HL=mem address start yx
144+  8093              ; ;DE=message address
145+  8093              ; display_string:
146+  8093              ;     ld a,(de)
147+  8093              ;     cp 0
148+  8093              ;     ret z
149+  8093              ;     cp ' '
150+  8093              ;     jp nz,disp_char_next
151+  8093              ; 	inc a
152+  8093              ; disp_char_next:
153+  8093              ;     sub FONT_ASCII_OFFSET
154+  8093              ;     push de
155+  8093              ;     push hl
156+  8093              ;     call PlotTile8
157+  8093              ;     pop hl
158+  8093              ;     pop de
159+  8093
160+  8093              ;     inc de
161+  8093              ;     inc l
162+  8093              ;     jp display_string
163+  8093
164+  8093
165+  8093              ; display_numbers:
166+  8093              ;     ld c,-100
167+  8093              ;     call dispnums_add_offset
168+  8093              ;     ld c,-10
169+  8093              ;     call dispnums_add_offset
170+  8093              ;     ld c,-1
171+  8093              ; dispnums_add_offset:
172+  8093              ;     ld b,FONT_START
173+  8093              ; dispnums_inc:
174+  8093              ;     inc b
175+  8093              ;     add a,c
176+  8093              ;     jr c, dispnums_inc
177+  8093              ;     sub c ;actually adding (its holding minus number)
178+  8093              ;     push af
179+  8093              ;     ld a,b
180+  8093              ;     push hl
181+  8093              ;     call PlotTile8
182+  8093              ;     pop hl
183+  8093              ;     inc l
184+  8093              ;     pop af
185+  8093              ;     ret
186+  8093
187+  8093
188+  8093
189+  8093
# file closed: src/retrotools/tools.asm
 43   8093
 44   8093              	include 'player.asm'
# file opened: src/player.asm
  1+  8093
  2+  8093
  3+  8093
  4+  8093
  5+  8093
  6+  8093              PLAYER_SLOT equ 50
  7+  8093
  8+  8093              PLAYER_DEFAULT_ATTR3 equ %11000000
  9+  8093
 10+  8093              PLAYER_HEIGHT equ 32
 11+  8093
 12+  8093              SCROLL_MARKER_X equ 320/2
 13+  8093
 14+  8093              PLAYER_WALK_SPEED equ 1
 15+  8093
 16+  8093
 17+  8093
 18+  8093 00           player_world_x db 0 ;in cells
 19+  8094 00           player_world_y db 0
 20+  8095
 21+  8095 30 00        px dw 48
 22+  8097 00           py db 0
 23+  8098 00           player_attr_2 db %00000000
 24+  8099 C0           player_attr_3 db PLAYER_DEFAULT_ATTR3
 25+  809A 20           player_attr_4 db %00100000
 26+  809B
 27+  809B C2           legsA_attr_3 db %11000010
 28+  809C C3           legsB_attr_3 db %11000011
 29+  809D
 30+  809D
 31+  809D 00           player_animation_timer db 0
 32+  809E              PLAYER_ANIMATION_DELAY equ 4
 33+  809E
 34+  809E
 35+  809E              ;movement states:
 36+  809E              IDLE equ 0x0
 37+  809E              WALKING equ 0xA
 38+  809E              JUMPING equ 0xB
 39+  809E              ATTACKING equ 0xC
 40+  809E              CLIMBING equ 0xD
 41+  809E
 42+  809E 0B           player_animation_state db JUMPING
 43+  809F
 44+  809F
 45+  809F 00 00        vy dw 0
 46+  80A1
 47+  80A1              DOWN_FORCE equ 32
 48+  80A1              UP_FORCE equ 64
 49+  80A1
 50+  80A1              MAX_DOWN_SPEED equ 7
 51+  80A1              MAX_UP_SPEED equ 5
 52+  80A1
 53+  80A1
 54+  80A1
 55+  80A1 00           player_collided_solid db FALSE
 56+  80A2
 57+  80A2
 58+  80A2
 59+  80A2 01           player_walk_direction db RIGHT
 60+  80A3 03           player_jump_direction db DOWN
 61+  80A4 D0           player_jump_point db 208
 62+  80A5              PLAYER_JUMP_HEIGHT equ 15
 63+  80A5              PLAYER_JUMP_ATTR3 equ %11001001
 64+  80A5 00           player_grounded db FALSE
 65+  80A6
 66+  80A6
 67+  80A6              player_init:
 68+  80A6 CD AB 80         call player_init_sprites
 69+  80A9
 70+  80A9 C9               ret
 71+  80AA
 72+  80AA
 73+  80AA              draw_debug_sprite:
 74+  80AA
 75+  80AA C9               ret
 76+  80AB
 77+  80AB              player_init_sprites:
 78+  80AB 3E 32            ld a,PLAYER_SLOT
 79+  80AD ED 92 34         nextreg $34,a
 80+  80B0
 81+  80B0                  ;Ax
 82+  80B0                  ;xx
 83+  80B0
 84+  80B0                  ;attr 0
 85+  80B0 3A 95 80         ld a,(px)
 86+  80B3 ED 92 35         nextreg $35,a
 87+  80B6
 88+  80B6                  ;attr 1
 89+  80B6 3A 97 80         ld a,(py)
 90+  80B9 ED 92 36         nextreg $36,a
 91+  80BC
 92+  80BC                  ;attr 2
 93+  80BC 3A 98 80         ld a,(player_attr_2)
 94+  80BF 47               ld b,a
 95+  80C0 2A 95 80         ld hl,(px)
 96+  80C3 7C               ld a,h
 97+  80C4 B0               or b
 98+  80C5 ED 92 37         nextreg $37,a
 99+  80C8
100+  80C8                  ;attr 3
101+  80C8 3A 99 80         ld a,(player_attr_3)
102+  80CB ED 92 38         nextreg $38,a
103+  80CE
104+  80CE                  ;attr 4
105+  80CE 3A 9A 80         ld a,(player_attr_4)
106+  80D1 ED 92 39         nextreg $39,a
107+  80D4
108+  80D4                  ;relative sprites...
109+  80D4
110+  80D4                  ;r1:
111+  80D4                  ;AR
112+  80D4                  ;xx
113+  80D4
114+  80D4
115+  80D4 3E 33            ld a,PLAYER_SLOT+1
116+  80D6 ED 92 34         nextreg $34,a
117+  80D9
118+  80D9                  ;a0
119+  80D9 3E 10            ld a,16
120+  80DB ED 92 35         nextreg $35,a
121+  80DE
122+  80DE                  ;a1
123+  80DE 3E 00            ld a,0
124+  80E0 ED 92 36         nextreg $36,a
125+  80E3
126+  80E3                  ;a2
127+  80E3 3E 01            ld a,%00000001
128+  80E5 ED 92 37         nextreg $37,a
129+  80E8
130+  80E8                  ;a3
131+  80E8 3E C1            ld a,%11000001
132+  80EA ED 92 38         nextreg $38,a
133+  80ED
134+  80ED                  ;a4
135+  80ED 3E 41            ld a,%01000001
136+  80EF ED 92 39         nextreg $39,a
137+  80F2
138+  80F2                  ;r2:
139+  80F2                  ;Ax
140+  80F2                  ;Rx
141+  80F2 3E 34            ld a,PLAYER_SLOT+2
142+  80F4 ED 92 34         nextreg $34,a
143+  80F7
144+  80F7                  ;a0
145+  80F7 3E 00            ld a,0
146+  80F9 ED 92 35         nextreg $35,a
147+  80FC
148+  80FC                  ;a1
149+  80FC 3E 10            ld a,16
150+  80FE ED 92 36         nextreg $36,a
151+  8101
152+  8101                  ;a2
153+  8101 3E 01            ld a,%00000001
154+  8103 ED 92 37         nextreg $37,a
155+  8106
156+  8106                  ;a3
157+  8106 3A 9B 80         ld a,(legsA_attr_3)
158+  8109 ED 92 38         nextreg $38,a
159+  810C
160+  810C                  ;a4
161+  810C 3E 41            ld a,%01000001
162+  810E ED 92 39         nextreg $39,a
163+  8111
164+  8111                  ;r3:
165+  8111                  ;Ax
166+  8111                  ;xR
167+  8111
168+  8111 3E 35            ld a,PLAYER_SLOT+3
169+  8113 ED 92 34         nextreg $34,a
170+  8116
171+  8116                  ;a0
172+  8116 3E 10            ld a,16
173+  8118 ED 92 35         nextreg $35,a
174+  811B
175+  811B                  ;a1
176+  811B 3E 10            ld a,16
177+  811D ED 92 36         nextreg $36,a
178+  8120
179+  8120                  ;a2
180+  8120 3E 01            ld a,%00000001
181+  8122 ED 92 37         nextreg $37,a
182+  8125
183+  8125                  ;a3
184+  8125 3A 9C 80         ld a,(legsB_attr_3)
185+  8128 ED 92 38         nextreg $38,a
186+  812B
187+  812B                  ;a4
188+  812B 3E 41            ld a,%01000001
189+  812D ED 92 39         nextreg $39,a
190+  8130
191+  8130 C9               ret
192+  8131              ;
193+  8131
194+  8131
195+  8131              player_draw:
196+  8131 3E 32               ld a,PLAYER_SLOT
197+  8133 ED 92 34         nextreg $34,a
198+  8136
199+  8136                  ;Ax
200+  8136                  ;xx
201+  8136
202+  8136                  ;attr 0
203+  8136 3A 95 80         ld a,(px)
204+  8139 ED 92 35         nextreg $35,a
205+  813C
206+  813C                  ;attr 1
207+  813C 3A 97 80         ld a,(py)
208+  813F ED 92 36         nextreg $36,a
209+  8142
210+  8142                  ;attr 2
211+  8142 3A 98 80         ld a,(player_attr_2)
212+  8145 47               ld b,a
213+  8146 2A 95 80         ld hl,(px)
214+  8149 7C               ld a,h
215+  814A B0               or b
216+  814B ED 92 37         nextreg $37,a
217+  814E
218+  814E                  ;attr 3
219+  814E 3A 99 80         ld a,(player_attr_3)
220+  8151 ED 92 38         nextreg $38,a
221+  8154
222+  8154                  ;attr 4
223+  8154 3A 9A 80         ld a,(player_attr_4)
224+  8157 ED 92 39         nextreg $39,a
225+  815A
226+  815A                  ;relative sprites...
227+  815A
228+  815A                  ;r1:
229+  815A                  ;AR
230+  815A                  ;xx
231+  815A
232+  815A
233+  815A 3E 33            ld a,PLAYER_SLOT+1
234+  815C ED 92 34         nextreg $34,a
235+  815F
236+  815F                  ;a0
237+  815F 3E 10            ld a,16
238+  8161 ED 92 35         nextreg $35,a
239+  8164
240+  8164                  ;a1
241+  8164 3E 00            ld a,0
242+  8166 ED 92 36         nextreg $36,a
243+  8169
244+  8169                  ;a2
245+  8169 3E 01            ld a,%00000001
246+  816B ED 92 37         nextreg $37,a
247+  816E
248+  816E                  ;a3
249+  816E 3E C1            ld a,%11000001
250+  8170 ED 92 38         nextreg $38,a
251+  8173
252+  8173                  ;a4
253+  8173 3E 41            ld a,%01000001
254+  8175 ED 92 39         nextreg $39,a
255+  8178
256+  8178                  ;r2:
257+  8178                  ;Ax
258+  8178                  ;Rx
259+  8178 3E 34            ld a,PLAYER_SLOT+2
260+  817A ED 92 34         nextreg $34,a
261+  817D
262+  817D                  ;a0
263+  817D 3E 00            ld a,0
264+  817F ED 92 35         nextreg $35,a
265+  8182
266+  8182                  ;a1
267+  8182 3E 10            ld a,16
268+  8184 ED 92 36         nextreg $36,a
269+  8187
270+  8187                  ;a2
271+  8187 3E 01            ld a,%00000001
272+  8189 ED 92 37         nextreg $37,a
273+  818C
274+  818C                  ;a3
275+  818C 3A 9B 80         ld a,(legsA_attr_3)
276+  818F ED 92 38         nextreg $38,a
277+  8192
278+  8192                  ;a4
279+  8192 3E 41            ld a,%01000001
280+  8194 ED 92 39         nextreg $39,a
281+  8197
282+  8197                  ;r3:
283+  8197                  ;Ax
284+  8197                  ;xR
285+  8197
286+  8197 3E 35            ld a,PLAYER_SLOT+3
287+  8199 ED 92 34         nextreg $34,a
288+  819C
289+  819C                  ;a0
290+  819C 3E 10            ld a,16
291+  819E ED 92 35         nextreg $35,a
292+  81A1
293+  81A1                  ;a1
294+  81A1 3E 10            ld a,16
295+  81A3 ED 92 36         nextreg $36,a
296+  81A6
297+  81A6                  ;a2
298+  81A6 3E 01            ld a,%00000001
299+  81A8 ED 92 37         nextreg $37,a
300+  81AB
301+  81AB                  ;a3
302+  81AB 3A 9C 80         ld a,(legsB_attr_3)
303+  81AE ED 92 38         nextreg $38,a
304+  81B1
305+  81B1                  ;a4
306+  81B1 3E 41            ld a,%01000001
307+  81B3 ED 92 39         nextreg $39,a
308+  81B6
309+  81B6 C9               ret
310+  81B7
311+  81B7
312+  81B7
313+  81B7              player_update:
314+  81B7 3A 9D 80         ld a,(player_animation_timer)
315+  81BA 3C               inc a
316+  81BB 32 9D 80         ld (player_animation_timer),a
317+  81BE
318+  81BE
319+  81BE
320+  81BE
321+  81BE 3A 9F 86         ld a,(keypressed_Q)
322+  81C1 FE 01            cp TRUE
323+  81C3 CC 8F 84         call z,throw_hammer
324+  81C6
325+  81C6 3A 9E 80         ld a,(player_animation_state)
326+  81C9 FE 0A            cp WALKING
327+  81CB CA 1B 82         jp z, player_update_walking
328+  81CE FE 0B            cp JUMPING
329+  81D0 CA 63 82         jp z, player_update_jumping
330+  81D3 FE 00            cp IDLE
331+  81D5 CA D9 81         jp z,player_update_idle
332+  81D8
333+  81D8
334+  81D8 C9               ret
335+  81D9
336+  81D9              player_update_idle:
337+  81D9 3E 00            ld a,IDLE
338+  81DB 32 9E 80         ld (player_animation_state),a
339+  81DE 3A 9D 80         ld a,(player_animation_timer)
340+  81E1 FE 0F            cp 15 ;frame time
341+  81E3 D4 5C 83         call nc, player_animate_idle
342+  81E6
343+  81E6
344+  81E6 3A A3 86         ld a,(keypressed_Space)
345+  81E9 FE 01            cp TRUE
346+  81EB 28 4F            jr z,player_jump_start
347+  81ED
348+  81ED 3A 97 86         ld a,(keypressed_A)
349+  81F0 FE 01            cp TRUE
350+  81F2 28 08            jr z,.set_state_walking
351+  81F4
352+  81F4 3A 9B 86         ld a,(keypressed_D)
353+  81F7 FE 01            cp TRUE
354+  81F9 28 01            jr z,.set_state_walking
355+  81FB
356+  81FB C9               ret
357+  81FC              .set_state_walking:
358+  81FC 3E 0A            ld a,WALKING
359+  81FE 32 9E 80         ld (player_animation_state),a
360+  8201 C9               ret
361+  8202
362+  8202
363+  8202
364+  8202              player_walking_start:
365+  8202 3A 9E 80         ld a,(player_animation_state)
366+  8205 FE 0A            cp WALKING
367+  8207 CA 1B 82         jp z,player_update_walking
368+  820A
369+  820A 21 00 00         ld hl,0
370+  820D 22 9F 80         ld (vy),hl
371+  8210
372+  8210 3E 0A            ld a,WALKING
373+  8212 32 9E 80         ld (player_animation_state),a
374+  8215
375+  8215 3E C0            ld a,PLAYER_DEFAULT_ATTR3
376+  8217 32 99 80         ld (player_attr_3),a
377+  821A
378+  821A C9               ret
379+  821B              player_update_walking:
380+  821B CD 56 84         call check_grounded
381+  821E
382+  821E 3A A3 86         ld a,(keypressed_Space)
383+  8221 FE 01            cp TRUE
384+  8223 CC 3C 82         call z,player_jump_start
385+  8226
386+  8226 3A 97 86         ld a,(keypressed_A)
387+  8229 FE 01            cp TRUE
388+  822B CA CC 82         jp z,plyr_move_left_start
389+  822E
390+  822E 3A 9B 86         ld a,(keypressed_D)
391+  8231 FE 01            cp TRUE
392+  8233 CA 17 83         jp z,plyr_move_right_start
393+  8236
394+  8236                  ;else idle walking state...
395+  8236 3E 00            ld a,IDLE
396+  8238 32 9E 80         ld (player_animation_state),a
397+  823B
398+  823B C9               ret
399+  823C
400+  823C              player_jump_start:
401+  823C 3A A4 86         ld a,(keypressed_Space_Held)
402+  823F FE 01            cp TRUE
403+  8241 C8               ret z
404+  8242
405+  8242 3A 9E 80         ld a,(player_animation_state)
406+  8245 FE 0B            cp JUMPING
407+  8247 C8               ret z
408+  8248
409+  8248 3E 0C            ld a,WBOY_FIRST_JUMP
410+  824A C6 C0            add a,PLAYER_DEFAULT_ATTR3
411+  824C 32 9B 80         ld (legsA_attr_3),a
412+  824F 3C               inc a
413+  8250 32 9C 80         ld (legsB_attr_3),a
414+  8253
415+  8253 3E 0B            ld a,JUMPING
416+  8255 32 9E 80         ld (player_animation_state),a
417+  8258
418+  8258 3A 97 80         ld a,(py)
419+  825B 32 A4 80         ld (player_jump_point),a
420+  825E
421+  825E 3E 02            ld a,UP
422+  8260 32 A3 80         ld (player_jump_direction),a
423+  8263              player_update_jumping:
424+  8263 3A 97 86         ld a,(keypressed_A)
425+  8266 FE 01            cp TRUE
426+  8268 CC CC 82         call z,plyr_move_left_start
427+  826B
428+  826B 3A 9B 86         ld a,(keypressed_D)
429+  826E FE 01            cp TRUE
430+  8270 CC 17 83         call z,plyr_move_right_start
431+  8273
432+  8273 CD B3 83         call player_calculate_world_position
433+  8276
434+  8276 CD F5 83         call check_collision_jumping
435+  8279
436+  8279 3A A4 80         ld a,(player_jump_point)
437+  827C D6 0F            sub PLAYER_JUMP_HEIGHT
438+  827E 47               ld b,a
439+  827F 3A 97 80         ld a,(py)
440+  8282 B8               cp b
441+  8283 DC 9B 82         call c,plyr_set_jump_down
442+  8286
443+  8286
444+  8286 3A A3 80         ld a,(player_jump_direction)
445+  8289 FE 02            cp UP
446+  828B F5               push af
447+  828C CC A1 82         call z, apply_force_up
448+  828F F1               pop af
449+  8290 FE 03            cp DOWN
450+  8292 F5               push af
451+  8293 CC B0 82         call z, apply_force_down
452+  8296 F1               pop af
453+  8297
454+  8297
455+  8297
456+  8297 CD BF 82         call apply_velocity
457+  829A
458+  829A
459+  829A C9               ret
460+  829B
461+  829B
462+  829B
463+  829B
464+  829B              plyr_set_jump_down:
465+  829B 3E 03            ld a,DOWN
466+  829D 32 A3 80         ld (player_jump_direction),a
467+  82A0 C9               ret
468+  82A1
469+  82A1              apply_force_up:
470+  82A1 2A 9F 80         ld hl,(vy)
471+  82A4 7C               ld a,h
472+  82A5 FE FB            cp -MAX_UP_SPEED
473+  82A7 C8               ret z
474+  82A8
475+  82A8 ED 34 80 FF      add hl,-UP_FORCE*2
476+  82AC 22 9F 80         ld (vy),hl
477+  82AF C9               ret
478+  82B0              apply_force_down:
479+  82B0 2A 9F 80         ld hl,(vy)
480+  82B3 7C               ld a,h
481+  82B4 FE 07            cp MAX_DOWN_SPEED
482+  82B6 C8               ret z
483+  82B7 ED 34 20 00      add hl,DOWN_FORCE
484+  82BB 22 9F 80         ld (vy),hl
485+  82BE C9               ret
486+  82BF
487+  82BF              apply_velocity:
488+  82BF 21 97 80         ld hl,py
489+  82C2 46               ld b,(hl)
490+  82C3 2A 9F 80         ld hl,(vy)
491+  82C6 7C               ld a,h
492+  82C7 80               add a,b
493+  82C8 32 97 80         ld (py),a
494+  82CB C9               ret
495+  82CC
496+  82CC
497+  82CC
498+  82CC              plyr_move_left_start:
499+  82CC 3E 00            ld a,LEFT
500+  82CE 32 A2 80         ld (player_walk_direction),a
501+  82D1
502+  82D1 3A 98 80         ld a,(player_attr_2)
503+  82D4 CB 5F            bit 3,a
504+  82D6 C2 EC 82         jp nz,plyr_move_left
505+  82D9
506+  82D9 3A 98 80         ld a,(player_attr_2)
507+  82DC CB DF            set 3,a
508+  82DE 32 98 80         ld (player_attr_2),a
509+  82E1
510+  82E1 2A 95 80         ld hl,(px)
511+  82E4 ED 34 20 00      add hl,32 ;2 relatives width (plus anchor)
512+  82E8 22 95 80         ld (px),hl
513+  82EB
514+  82EB C9               ret
515+  82EC              plyr_move_left:
516+  82EC
517+  82EC CD B3 83         call player_calculate_world_position
518+  82EF                  ; ; ; ; ; ; ; ; call check_collision_left
519+  82EF
520+  82EF 3A A1 80         ld a,(player_collided_solid)
521+  82F2 FE 01            cp TRUE
522+  82F4 C8               ret z
523+  82F5
524+  82F5 3A 9D 80         ld a,(player_animation_timer)
525+  82F8 FE 04            cp PLAYER_ANIMATION_DELAY
526+  82FA D4 87 83         call nc, player_animate_walk
527+  82FD
528+  82FD 2A 95 80         ld hl,(px)
529+  8300 7C               ld a,h
530+  8301 FE 00            cp 0
531+  8303 C2 0F 83         jp nz,p_move_left
532+  8306 7D               ld a,l
533+  8307 FE B0            cp SCROLL_MARKER_X+16
534+  8309 DA 7B 8D         jp c,scroll_left
535+  830C D2 0F 83         jp nc,p_move_left
536+  830F
537+  830F              p_move_left:
538+  830F ED 34 FF FF      add hl,-PLAYER_WALK_SPEED
539+  8313 22 95 80         ld (px),hl
540+  8316 C9               ret
541+  8317
542+  8317
543+  8317              plyr_move_right_start:
544+  8317 3E 01            ld a,RIGHT
545+  8319 32 A2 80         ld (player_walk_direction),a
546+  831C
547+  831C 3A 98 80         ld a,(player_attr_2)
548+  831F CB 5F            bit 3,a
549+  8321 CA 37 83         jp z,plyr_move_right
550+  8324
551+  8324 3A 98 80         ld a,(player_attr_2)
552+  8327 CB 9F            res 3,a
553+  8329 32 98 80         ld (player_attr_2),a
554+  832C
555+  832C 2A 95 80         ld hl,(px)
556+  832F ED 34 E0 FF      add hl,-32
557+  8333 22 95 80         ld (px),hl
558+  8336 C9               ret
559+  8337              plyr_move_right:
560+  8337 CD B3 83         call player_calculate_world_position
561+  833A                  ; ; ; ; ; ; ; ; ; ; call check_collision_right
562+  833A
563+  833A 3A A1 80         ld a,(player_collided_solid)
564+  833D FE 01            cp TRUE
565+  833F C8               ret z
566+  8340
567+  8340 3A 9D 80         ld a,(player_animation_timer)
568+  8343 FE 04            cp PLAYER_ANIMATION_DELAY
569+  8345 D4 87 83         call nc, player_animate_walk
570+  8348
571+  8348 2A 95 80         ld hl,(px)
572+  834B 7D               ld a,l
573+  834C FE 90            cp SCROLL_MARKER_X-16
574+  834E D2 CB 8D         jp nc,scroll_right
575+  8351 DA 54 83         jp c,p_move_right
576+  8354
577+  8354              p_move_right
578+  8354 ED 34 01 00      add hl,PLAYER_WALK_SPEED
579+  8358 22 95 80         ld (px),hl
580+  835B C9               ret
581+  835C
582+  835C
583+  835C
584+  835C
585+  835C              player_animate_idle:
586+  835C AF               xor a
587+  835D 32 9D 80         ld (player_animation_timer),a
588+  8360
589+  8360 3A 9E 80         ld a,(player_animation_state)
590+  8363 FE 00            cp IDLE
591+  8365 C0               ret nz
592+  8366
593+  8366 3A 9B 80         ld a,(legsA_attr_3)
594+  8369 E6 3F            and %00111111 ;mask out top 2 bits
595+  836B FE 04            cp WBOY_FINAL_IDLE ;Final Idle 'A' pattern
596+  836D 30 0C            jr nc,plyr_set_idle_firstframe
597+  836F
598+  836F C6 02            add a,WBOY_BODY_SIZE
599+  8371 C6 C0            add a,PLAYER_DEFAULT_ATTR3
600+  8373 32 9B 80         ld (legsA_attr_3),a
601+  8376 3C               inc a
602+  8377 32 9C 80         ld (legsB_attr_3),a
603+  837A
604+  837A C9               ret
605+  837B
606+  837B              plyr_set_idle_firstframe:
607+  837B 3E 02            ld a,WBOY_FIRST_IDLE
608+  837D C6 C0            add a,PLAYER_DEFAULT_ATTR3
609+  837F 32 9B 80         ld (legsA_attr_3),a
610+  8382 3C               inc a
611+  8383 32 9C 80         ld (legsB_attr_3),a
612+  8386 C9               ret
613+  8387
614+  8387              player_animate_walk:
615+  8387 AF               xor a
616+  8388 32 9D 80         ld (player_animation_timer),a
617+  838B
618+  838B 3A 9E 80         ld a,(player_animation_state)
619+  838E FE 0A            cp WALKING
620+  8390 C0               ret nz
621+  8391
622+  8391 3A 9B 80         ld a,(legsA_attr_3)
623+  8394 E6 3F            and %00111111 ;mask out top 2 bits
624+  8396 FE 0C            cp WBOY_FINAL_WALK ;final walk 'A' pattern
625+  8398 CA A7 83         jp z,plyr_set_walking_firstframe
626+  839B
627+  839B C6 02            add a,WBOY_BODY_SIZE
628+  839D C6 C0            add a,PLAYER_DEFAULT_ATTR3
629+  839F 32 9B 80         ld (legsA_attr_3),a
630+  83A2 3C               inc a
631+  83A3 32 9C 80         ld (legsB_attr_3),a
632+  83A6 C9               ret
633+  83A7
634+  83A7              plyr_set_walking_firstframe:
635+  83A7 3E 06            ld a,WBOY_FIRST_WALK
636+  83A9 C6 C0            add a,PLAYER_DEFAULT_ATTR3
637+  83AB 32 9B 80         ld (legsA_attr_3),a
638+  83AE 3C               inc a
639+  83AF 32 9C 80         ld (legsB_attr_3),a
640+  83B2 C9               ret
641+  83B3
642+  83B3
643+  83B3              player_calculate_world_position:
644+  83B3 3A 97 80         ld a,(py)
645+  83B6 E6 F0            and %11110000
646+  83B8 0F               rrca
647+  83B9 0F               rrca
648+  83BA 0F               rrca
649+  83BB 0F               rrca
650+  83BC 32 94 80         ld (player_world_y),a
651+  83BF
652+  83BF 3A A2 80         ld a,(player_walk_direction)
653+  83C2 FE 01            cp RIGHT
654+  83C4 CA DC 83         jp z, p_wp_r
655+  83C7
656+  83C7              p_wp_l:
657+  83C7 2A 95 80         ld hl,(px)
658+  83CA 7D               ld a,l
659+  83CB E6 F0            and %11110000
660+  83CD 0F               rrca
661+  83CE 0F               rrca
662+  83CF 0F               rrca
663+  83D0 0F               rrca
664+  83D1 47               ld b,a
665+  83D2 3A 76 8C         ld a,(cam_x)
666+  83D5 4F               ld c,a
667+  83D6 78               ld a,b
668+  83D7 81               add a,c
669+  83D8 32 93 80         ld (player_world_x),a
670+  83DB C9               ret
671+  83DC              p_wp_r:
672+  83DC 2A 95 80         ld hl,(px)
673+  83DF ED 34 18 00      add hl,24
674+  83E3 7D               ld a,l
675+  83E4 E6 F0            and %11110000
676+  83E6 0F               rrca
677+  83E7 0F               rrca
678+  83E8 0F               rrca
679+  83E9 0F               rrca
680+  83EA 47               ld b,a
681+  83EB 3A 76 8C         ld a,(cam_x)
682+  83EE 4F               ld c,a
683+  83EF 78               ld a,b
684+  83F0 81               add a,c
685+  83F1 32 93 80         ld (player_world_x),a
686+  83F4 C9               ret
687+  83F5
688+  83F5
689+  83F5
690+  83F5              check_collision_jumping:
691+  83F5 3A 9E 80         ld a,(player_animation_state)
692+  83F8 FE 0B            cp JUMPING
693+  83FA C0               ret nz
694+  83FB
695+  83FB 3A A3 80         ld a,(player_jump_direction)
696+  83FE FE 03            cp DOWN
697+  8400 C0               ret nz
698+  8401
699+  8401
700+  8401 21 F4 87         ld hl,superlevel
701+  8404 3A 94 80         ld a,(player_world_y)
702+  8407 FE 06            cp 6
703+  8409 D8               ret c
704+  840A D6 06            sub 6
705+  840C 57               ld d,a
706+  840D 1E 50            ld e,LEVEL_WIDTH_META
707+  840F ED 30            mul d,e
708+  8411 19               add hl,de
709+  8412 3A 93 80         ld a,(player_world_x)
710+  8415 5F               ld e,a
711+  8416 16 00            ld d,0
712+  8418 19               add hl,de
713+  8419 7E               ld a,(hl)
714+  841A CD EB 87         call check_solid
715+  841D CA 42 84         jp z,collided_jumping
716+  8420
717+  8420 21 F4 87         ld hl,superlevel
718+  8423 3A 94 80         ld a,(player_world_y)
719+  8426 FE 06            cp 6
720+  8428 D8               ret c
721+  8429 D6 06            sub 6
722+  842B 57               ld d,a
723+  842C 1E 50            ld e,LEVEL_WIDTH_META
724+  842E ED 30            mul d,e
725+  8430 19               add hl,de
726+  8431 3A 93 80         ld a,(player_world_x)
727+  8434 C6 01            add a,1
728+  8436 5F               ld e,a
729+  8437 16 00            ld d,0
730+  8439 19               add hl,de
731+  843A 7E               ld a,(hl)
732+  843B CD EB 87         call check_solid
733+  843E CA 42 84         jp z,collided_jumping
734+  8441
735+  8441
736+  8441
737+  8441 C9               ret
738+  8442
739+  8442
740+  8442              collided_jumping:
741+  8442
742+  8442                  ;snap to nearest cell
743+  8442 3A 94 80         ld a,(player_world_y)
744+  8445 87               add a,a
745+  8446 87               add a,a
746+  8447 87               add a,a
747+  8448 87               add a,a
748+  8449 32 97 80         ld (py),a
749+  844C
750+  844C 3A A3 80         ld a,(player_jump_direction)
751+  844F FE 02            cp UP
752+  8451 C8               ret z
753+  8452
754+  8452                  ;collided
755+  8452 CD 02 82         call player_walking_start
756+  8455
757+  8455
758+  8455
759+  8455 C9               ret
760+  8456
761+  8456
762+  8456              check_grounded:
763+  8456 3A A3 80         ld a,(player_jump_direction)
764+  8459 FE 03            cp DOWN
765+  845B C0               ret nz
766+  845C
767+  845C 21 F4 87         ld hl,superlevel
768+  845F 3A 94 80         ld a,(player_world_y)
769+  8462 FE 06            cp 6
770+  8464 D8               ret c
771+  8465 D6 06            sub 6
772+  8467 57               ld d,a
773+  8468 1E 50            ld e,LEVEL_WIDTH_META
774+  846A ED 30            mul d,e
775+  846C 19               add hl,de
776+  846D 3A 93 80         ld a,(player_world_x)
777+  8470 5F               ld e,a
778+  8471 16 00            ld d,0
779+  8473 19               add hl,de
780+  8474 7E               ld a,(hl)
781+  8475 CD EB 87         call check_solid
782+  8478 CA 7E 84         jp z,grounded_true
783+  847B
784+  847B
785+  847B C3 84 84         jp grounded_false
786+  847E              grounded_true:
787+  847E
788+  847E 3E 01            ld a,TRUE
789+  8480 32 A5 80         ld (player_grounded),a
790+  8483 C9               ret
791+  8484
792+  8484              grounded_false:
793+  8484 3E 00            ld a,FALSE
794+  8486 32 A5 80         ld (player_grounded),a
795+  8489
796+  8489
797+  8489 3E 0B            ld a,JUMPING
798+  848B 32 9E 80         ld (player_animation_state),a
799+  848E
800+  848E C9               ret
801+  848F
802+  848F
803+  848F              ; check_collision_left:
804+  848F              ;     ld hl,level1
805+  848F              ;     ld a,(player_world_y)
806+  848F              ;     add a,2
807+  848F              ;     ld d,a
808+  848F              ;     ld e,WORLD_WIDTH
809+  848F              ;     mul d,e
810+  848F              ;     add hl,de
811+  848F              ;     ld a,(player_world_x)
812+  848F              ;     ld e,a
813+  848F              ;     ld d,0
814+  848F              ;     add hl,de
815+  848F              ;     ld a,(hl)
816+  848F              ;     cp 12
817+  848F              ;     jp c,collided_solid_sideways
818+  848F
819+  848F              ;     ld a,FALSE
820+  848F              ;     ld (player_collided_solid),a
821+  848F
822+  848F              ;     ret
823+  848F
824+  848F
825+  848F
826+  848F              ; check_collision_right:
827+  848F              ;     ld hl,(px)
828+  848F              ;     ld a,h
829+  848F              ;     cp 0
830+  848F              ;     jp nz, check_collision_right_x8
831+  848F
832+  848F              ;     ld hl,level1
833+  848F              ;     ld a,(player_world_y)
834+  848F              ;     ld d,a
835+  848F              ;     ld e,WORLD_WIDTH
836+  848F              ;     mul d,e
837+  848F              ;     add hl,de
838+  848F              ;     ld a,(player_world_x)
839+  848F              ;     add a,1
840+  848F              ;     ld e,a
841+  848F              ;     ld d,0
842+  848F              ;     add hl,de
843+  848F              ;     ld a,(hl)
844+  848F              ;     cp 12
845+  848F              ;     jp c,collided_solid_sideways
846+  848F
847+  848F              ;     ld hl,level1
848+  848F              ;     ld a,(player_world_y)
849+  848F              ;     add a,1
850+  848F              ;     ld d,a
851+  848F              ;     ld e,WORLD_WIDTH
852+  848F              ;     mul d,e
853+  848F              ;     add hl,de
854+  848F              ;     ld a,(player_world_x)
855+  848F              ;     add a,1
856+  848F              ;     ld e,a
857+  848F              ;     ld d,0
858+  848F              ;     add hl,de
859+  848F              ;     ld a,(hl)
860+  848F              ;     cp 12
861+  848F              ;     jp c,collided_solid_sideways
862+  848F
863+  848F              ;     ld hl,level1
864+  848F              ;     ld a,(player_world_y)
865+  848F              ;     add a,2
866+  848F              ;     ld d,a
867+  848F              ;     ld e,WORLD_WIDTH
868+  848F              ;     mul d,e
869+  848F              ;     add hl,de
870+  848F              ;     ld a,(player_world_x)
871+  848F              ;     add a,1
872+  848F              ;     ld e,a
873+  848F              ;     ld d,0
874+  848F              ;     add hl,de
875+  848F              ;     ld a,(hl)
876+  848F              ;     cp 12
877+  848F              ;     jp c,collided_solid_sideways
878+  848F
879+  848F              ;     ld hl,level1
880+  848F              ;     ld a,(player_world_y)
881+  848F              ;     add a,3
882+  848F              ;     ld d,a
883+  848F              ;     ld e,WORLD_WIDTH
884+  848F              ;     mul d,e
885+  848F              ;     add hl,de
886+  848F              ;     ld a,(player_world_x)
887+  848F              ;     add a,1
888+  848F              ;     ld e,a
889+  848F              ;     ld d,0
890+  848F              ;     add hl,de
891+  848F              ;     ld a,(hl)
892+  848F              ;     cp 12
893+  848F              ;     jp c,collided_solid_sideways
894+  848F
895+  848F
896+  848F
897+  848F              ;     ld a,FALSE
898+  848F              ;     ld (player_collided_solid),a
899+  848F
900+  848F              ;     ret
901+  848F
902+  848F              ; check_collision_right_x8:
903+  848F              ;     ld hl,level1
904+  848F              ;     ld a,(player_world_y)
905+  848F              ;     ld d,a
906+  848F              ;     ld e,WORLD_WIDTH
907+  848F              ;     mul d,e
908+  848F              ;     add hl,de
909+  848F              ;     ld a,(player_world_x)
910+  848F              ;     add a,33
911+  848F              ;     ld e,a
912+  848F              ;     ld d,0
913+  848F              ;     add hl,de
914+  848F              ;     ld a,(hl)
915+  848F              ;     cp 12
916+  848F              ;     jp c,collided_solid_sideways
917+  848F
918+  848F              ;     ld hl,level1
919+  848F              ;     ld a,(player_world_y)
920+  848F              ;     add a,1
921+  848F              ;     ld d,a
922+  848F              ;     ld e,WORLD_WIDTH
923+  848F              ;     mul d,e
924+  848F              ;     add hl,de
925+  848F              ;     ld a,(player_world_x)
926+  848F              ;     add a,33
927+  848F              ;     ld e,a
928+  848F              ;     ld d,0
929+  848F              ;     add hl,de
930+  848F              ;     ld a,(hl)
931+  848F              ;     cp 12
932+  848F              ;     jp c,collided_solid_sideways
933+  848F
934+  848F              ;     ld hl,level1
935+  848F              ;     ld a,(player_world_y)
936+  848F              ;     add a,2
937+  848F              ;     ld d,a
938+  848F              ;     ld e,WORLD_WIDTH
939+  848F              ;     mul d,e
940+  848F              ;     add hl,de
941+  848F              ;     ld a,(player_world_x)
942+  848F              ;     add a,33
943+  848F              ;     ld e,a
944+  848F              ;     ld d,0
945+  848F              ;     add hl,de
946+  848F              ;     ld a,(hl)
947+  848F              ;     cp 12
948+  848F              ;     jp c,collided_solid_sideways
949+  848F
950+  848F              ;     ld hl,level1
951+  848F              ;     ld a,(player_world_y)
952+  848F              ;     add a,3
953+  848F              ;     ld d,a
954+  848F              ;     ld e,WORLD_WIDTH
955+  848F              ;     mul d,e
956+  848F              ;     add hl,de
957+  848F              ;     ld a,(player_world_x)
958+  848F              ;     add a,33
959+  848F              ;     ld e,a
960+  848F              ;     ld d,0
961+  848F              ;     add hl,de
962+  848F              ;     ld a,(hl)
963+  848F              ;     cp 12
964+  848F              ;     jp c,collided_solid_sideways
965+  848F
966+  848F
967+  848F
968+  848F              ;     ld a,FALSE
969+  848F              ;     ld (player_collided_solid),a
970+  848F
971+  848F              ;     ret
972+  848F
973+  848F
974+  848F
975+  848F
976+  848F
977+  848F
978+  848F              ; collided_solid_sideways:
979+  848F              ;     ld a,TRUE
980+  848F              ;     ld (player_collided_solid),a
981+  848F              ;     ret
982+  848F
983+  848F
984+  848F
985+  848F              throw_hammer:
986+  848F 3A A0 86         ld a,(keypressed_Q_Held)
987+  8492 FE 01            cp TRUE
988+  8494 C8               ret z
989+  8495
990+  8495
991+  8495 CD 8C 8E         call projectiles_spawn
992+  8498 C9               ret
# file closed: src/player.asm
 45   8499              	include 'objects.asm'
# file opened: src/objects.asm
  1+  8499
  2+  8499
  3+  8499
  4+  8499              OBJECT_PUMPKIN equ 0
  5+  8499              OBJECT_GHOST equ 1
  6+  8499              OBJECT_GHOST_WALKER equ 2
  7+  8499              OBJECT_DEAD equ 100
  8+  8499              OBJECT_COLLIDED equ $FF
  9+  8499              OBJECT_HEIGHT equ 16
 10+  8499
 11+  8499
 12+  8499              ;::All objects have 2 frame animation::
 13+  8499
 14+  8499              ;0=isInView
 15+  8499              ;1=objType
 16+  8499              ;2=wX
 17+  8499              ;3=wY
 18+  8499              ;4,5=XX
 19+  8499              ;6=Y
 20+  8499              ;7=att2
 21+  8499              ;8=att3
 22+  8499              ;9=att4
 23+  8499              ;10=slot_ID
 24+  8499              ;11=sprites specific XOR value
 25+  8499              ;12=direction
 26+  8499
 27+  8499              objects:
 28+  8499                  ; db FALSE, OBJECT_PUMPKIN, 01, 01  : dw 0 : db 0,  %00000000,%01010000,%00000000,0,1,RIGHT
 29+  8499                  ; db FALSE, OBJECT_GHOST, 50, 19 : dw 0 : db 0, %00000000,%01010010,%00000000,11,1,RIGHT
 30+  8499                  ; db FALSE, OBJECT_GHOST_WALKER, 39, 24 : dw 0 : db 0, %00000000,%01010010,%00000000,15,1,LEFT
 31+  8499                  ; db FALSE, OBJECT_GHOST_WALKER, 50, 26 : dw 0 : db 0, %00000000,%01010010,%00000000,15,1,LEFT
 32+  8499                  ; db FALSE, OBJECT_GHOST_WALKER, 72, 26 : dw 0 : db 0, %00000000,%01010010,%00000000,15,1,LEFT
 33+  8499                  ; db FALSE, OBJECT_GHOST_WALKER, 110, 26 : dw 0 : db 0, %00000000,%01010010,%00000000,15,1,LEFT
 34+  8499 FF               db END_OF_ARRAY
 35+  849A
 36+  849A              OBJECTS_DATA_LENGTH equ 13
 37+  849A
 38+  849A
 39+  849A              GHOST_SPEED equ 2
 40+  849A              GHOST_MAX_MOVEMENT_X equ 30
 41+  849A
 42+  849A
 43+  849A
 44+  849A              ;sX= wX-(cam_edge_r-VW)*8
 45+  849A              ;sY= wY*8
 46+  849A
 47+  849A
 48+  849A
 49+  849A              objects_init:
 50+  849A C9               ret
 51+  849B
 52+  849B
 53+  849B
 54+  849B              objects_update:
 55+  849B DD 21 99 84      ld ix,objects
 56+  849F              objs_update_start:
 57+  849F DD 7E 00         ld a,(ix)
 58+  84A2 FE FF            cp END_OF_ARRAY
 59+  84A4 C8               ret z
 60+  84A5
 61+  84A5 CD C5 84         call object_update
 62+  84A8
 63+  84A8 11 0D 00         ld de,OBJECTS_DATA_LENGTH
 64+  84AB DD 19            add ix,de
 65+  84AD C3 9F 84         jp objs_update_start
 66+  84B0
 67+  84B0
 68+  84B0
 69+  84B0
 70+  84B0              objects_draw:
 71+  84B0 DD 21 99 84      ld ix,objects
 72+  84B4              objs_draw_start:
 73+  84B4 DD 7E 00         ld a,(ix)
 74+  84B7 FE FF            cp END_OF_ARRAY
 75+  84B9 C8               ret z
 76+  84BA
 77+  84BA CD 7C 85         call object_draw
 78+  84BD
 79+  84BD 11 0D 00         ld de,OBJECTS_DATA_LENGTH
 80+  84C0 DD 19            add ix,de
 81+  84C2 C3 B4 84         jp objs_draw_start
 82+  84C5
 83+  84C5
 84+  84C5
 85+  84C5
 86+  84C5
 87+  84C5
 88+  84C5
 89+  84C5              object_update:
 90+  84C5 DD 7E 01         ld a,(ix+1)
 91+  84C8 FE 64            cp OBJECT_DEAD
 92+  84CA C8               ret z
 93+  84CB
 94+  84CB
 95+  84CB CD DE 84         call object_check_in_view
 96+  84CE CD 69 85         call animate_object
 97+  84D1
 98+  84D1 DD 7E 01         ld a,(ix+1)
 99+  84D4 FE 00            cp OBJECT_PUMPKIN
100+  84D6 C8               ret z
101+  84D7
102+  84D7 CD AC 85         call handle_behaviour
103+  84DA CD E5 85         call object_check_collision_player
104+  84DD
105+  84DD C9               ret
106+  84DE
107+  84DE
108+  84DE
109+  84DE              object_check_in_view:
110+  84DE DD 7E 02         ld a,(ix+2)
111+  84E1 47               ld b,a
112+  84E2 3A 76 8C         ld a,(cam_x)
113+  84E5 C6 14            add a,VIEW_WIDTH_META
114+  84E7 B8               cp b
115+  84E8 DA 06 85         jp c, obj_set_not_inview
116+  84EB
117+  84EB 3A 76 8C         ld a,(cam_x)
118+  84EE 47               ld b,a
119+  84EF DD 7E 02         ld a,(ix+2)
120+  84F2 B8               cp b
121+  84F3 DA 06 85         jp c, obj_set_not_inview
122+  84F6
123+  84F6                  ; set to inview=yes
124+  84F6 DD 36 00 01      ld (ix),TRUE
125+  84FA DD 7E 08         ld a,(ix+8)
126+  84FD CB FF            set 7,a
127+  84FF DD 77 08         ld (ix+8),a
128+  8502
129+  8502 CD 16 85         call object_calculate_screen_pos
130+  8505 C9               ret
131+  8506
132+  8506              obj_set_not_inview:
133+  8506 DD 36 00 00      ld (ix),FALSE
134+  850A DD 7E 08         ld a,(ix+8)
135+  850D CB BF            res 7,a
136+  850F DD 77 08         ld (ix+8),a
137+  8512 CD 82 85         call obj_drw
138+  8515 C9               ret
139+  8516
140+  8516
141+  8516
142+  8516              object_calculate_screen_pos:
143+  8516                  ;Y
144+  8516 DD 7E 03         ld a,(ix+3)
145+  8519 87               add a,a
146+  851A 87               add a,a
147+  851B 87               add a,a ;A*8
148+  851C DD 77 06         ld (ix+6),a
149+  851F
150+  851F 3A 75 8C         ld a,(scroll_direction)
151+  8522 FE 00            cp LEFT
152+  8524 CA 2D 85         jp z,obj_screen_moving_left
153+  8527 FE 01            cp RIGHT
154+  8529 CA 49 85         jp z,obj_screen_moving_right
155+  852C
156+  852C C9               ret
157+  852D
158+  852D              obj_screen_moving_left:
159+  852D                  ;X (scroll left)
160+  852D 3A 76 8C         ld a,(cam_x)
161+  8530 47               ld b,a
162+  8531 DD 7E 02         ld a,(ix+2) ;wX
163+  8534 90               sub b ;wX-camX
164+  8535 21 00 00         ld hl,0
165+  8538 ED 31            add hl,a
166+  853A 29               add hl,hl
167+  853B 29               add hl,hl
168+  853C 29               add hl,hl
169+  853D 3A 74 8C         ld a,(current_scroll)
170+  8540 ED 31            add hl,a
171+  8542 DD 75 04         ld (ix+4),l
172+  8545 DD 74 05         ld (ix+5),h ;X8
173+  8548 C9               ret
174+  8549
175+  8549              obj_screen_moving_right:
176+  8549                  ;X (scroll left)
177+  8549 3A 76 8C         ld a,(cam_x)
178+  854C 47               ld b,a
179+  854D DD 7E 02         ld a,(ix+2) ;wX
180+  8550 90               sub b ;wX-camX
181+  8551 21 00 00         ld hl,0
182+  8554 ED 31            add hl,a
183+  8556 29               add hl,hl
184+  8557 29               add hl,hl
185+  8558 29               add hl,hl
186+  8559 3A 74 8C         ld a,(current_scroll)
187+  855C 47               ld b,a
188+  855D 3E 08            ld a,8
189+  855F 90               sub b
190+  8560 ED 31            add hl,a
191+  8562 DD 75 04         ld (ix+4),l
192+  8565 DD 74 05         ld (ix+5),h ;X8
193+  8568
194+  8568 C9               ret
195+  8569
196+  8569
197+  8569              animate_object:
198+  8569 DD 7E 08         ld a,(ix+8)
199+  856C E6 C0            and %11000000
200+  856E 47               ld b,a
201+  856F DD 7E 08         ld a,(ix+8)
202+  8572 E6 3F            and %00111111
203+  8574 DD AE 0B         xor (ix+11)
204+  8577 80               add a,b
205+  8578 DD 77 08         ld (ix+8),a
206+  857B C9               ret
207+  857C
208+  857C
209+  857C              object_draw:
210+  857C DD 7E 00         ld a,(ix)
211+  857F FE 01            cp TRUE
212+  8581 C0               ret nz
213+  8582              obj_drw:
214+  8582 DD 7E 0A         ld a,(ix+10)
215+  8585 ED 92 34         nextreg $34,a
216+  8588
217+  8588                  ;attr 0
218+  8588 DD 7E 04         ld a,(ix+4)
219+  858B ED 92 35         nextreg $35,a
220+  858E
221+  858E                  ;attr 1
222+  858E DD 7E 06         ld a,(ix+6)
223+  8591 ED 92 36         nextreg $36,a
224+  8594
225+  8594                  ;attr 2
226+  8594 DD 7E 07         ld a,(ix+7)
227+  8597 47               ld b,a
228+  8598 DD 7E 05         ld a,(ix+5)
229+  859B B0               or b
230+  859C ED 92 37         nextreg $37,a
231+  859F
232+  859F                  ;attr 3
233+  859F DD 7E 08         ld a,(ix+8)
234+  85A2 ED 92 38         nextreg $38,a
235+  85A5
236+  85A5                  ;attr 4
237+  85A5 DD 7E 09         ld a,(ix+9)
238+  85A8 ED 92 39         nextreg $39,a
239+  85AB
240+  85AB C9               ret
241+  85AC
242+  85AC
243+  85AC
244+  85AC
245+  85AC
246+  85AC
247+  85AC
248+  85AC              handle_behaviour:
249+  85AC DD 7E 00         ld a,(ix)
250+  85AF FE 00            cp FALSE
251+  85B1 C8               ret z
252+  85B2
253+  85B2 DD 7E 01         ld a,(ix+1)
254+  85B5 FE 01            cp OBJECT_GHOST
255+  85B7 CA C0 85         jp z, handle_behaviour_ghost
256+  85BA FE 02            cp OBJECT_GHOST_WALKER
257+  85BC CA D0 85         jp z, handle_behaviour_ghost_walker
258+  85BF C9               ret
259+  85C0
260+  85C0
261+  85C0              handle_behaviour_ghost:
262+  85C0 DD 7E 0C         ld a,(ix+12)
263+  85C3 FE 00            cp LEFT
264+  85C5 CA CE 85         jp z,ghost_move_left
265+  85C8 FE 01            cp RIGHT
266+  85CA CA CF 85         jp z,ghost_move_right
267+  85CD
268+  85CD C9               ret
269+  85CE
270+  85CE              ghost_move_left:
271+  85CE                  ; ld a,(ix+2)
272+  85CE                  ; dec a
273+  85CE                  ; ld (ix+2),a
274+  85CE
275+  85CE                  ; ; ld a,h
276+  85CE                  ; ; or l
277+  85CE                  ; ; ret nz
278+  85CE
279+  85CE                  ; ; ld a,RIGHT
280+  85CE                  ; ; ld (ix+12),a
281+  85CE
282+  85CE C9               ret
283+  85CF              ghost_move_right:
284+  85CF                  ; ld h,(ix+14)
285+  85CF                  ; ld l,(ix+15)
286+  85CF                  ; add hl,GHOST_SPEED
287+  85CF                  ; ld (ix+14),h
288+  85CF                  ; ld (ix+15),l
289+  85CF
290+  85CF                  ; ld a,l
291+  85CF                  ; cp GHOST_MAX_MOVEMENT_X
292+  85CF                  ; ret nz
293+  85CF
294+  85CF                  ; ld a,LEFT
295+  85CF                  ; ld (ix+12),a
296+  85CF
297+  85CF
298+  85CF C9               ret
299+  85D0
300+  85D0
301+  85D0              handle_behaviour_ghost_walker:
302+  85D0 DD 7E 02         ld a,(ix+2)
303+  85D3 3D               dec a
304+  85D4 DD 77 02         ld (ix+2),a
305+  85D7
306+  85D7 47               ld b,a
307+  85D8 3A 76 8C         ld a,(cam_x)
308+  85DB B8               cp b
309+  85DC D8               ret c
310+  85DD
311+  85DD
312+  85DD                  ;kill ghost
313+  85DD DD 36 01 64      ld (ix+1),OBJECT_DEAD
314+  85E1 CD 06 85         call obj_set_not_inview
315+  85E4
316+  85E4 C9               ret
317+  85E5
318+  85E5
319+  85E5
320+  85E5
321+  85E5
322+  85E5              object_check_collision_player
323+  85E5 DD 7E 00         ld a,(ix)
324+  85E8 FE 01            cp TRUE
325+  85EA C0               ret nz
326+  85EB
327+  85EB DD 7E 01         ld a,(ix+1)
328+  85EE FE 01            cp OBJECT_GHOST
329+  85F0 CA 1A 86         jp z,checkcollision_player_ghost
330+  85F3 FE 02            cp OBJECT_GHOST_WALKER
331+  85F5 CA 35 86         jp z,checkcollision_player_ghostwalker
332+  85F8              obj_check_coll_y:
333+  85F8                  ;player above object:
334+  85F8 DD 7E 06         ld a,(ix+6)
335+  85FB 47               ld b,a
336+  85FC 3A 97 80         ld a,(py)
337+  85FF C6 20            add a,PLAYER_HEIGHT
338+  8601 B8               cp b
339+  8602 38 15            jr c,obj_nocollision
340+  8604
341+  8604                  ;player below object:
342+  8604 3A 97 80         ld a,(py)
343+  8607 47               ld b,a
344+  8608 DD 7E 06         ld a,(ix+6)
345+  860B C6 10            add a,OBJECT_HEIGHT
346+  860D B8               cp b
347+  860E 38 09            jr c,obj_nocollision
348+  8610
349+  8610 2A 95 80         ld hl,(px)
350+  8613 DD 7E 05         ld a,(ix+5)
351+  8616 BC               cp h
352+  8617 20 00            jr nz,obj_nocollision
353+  8619
354+  8619                  ;collided...
355+  8619
356+  8619              obj_nocollision:
357+  8619 C9               ret
358+  861A
359+  861A              checkcollision_player_ghost:
360+  861A                  ;x axis collision check:
361+  861A DD 66 04         ld h,(ix+4)
362+  861D DD 6E 05         ld l,(ix+5)
363+  8620 DD 56 0E         ld d,(ix+14)
364+  8623 DD 5E 0F         ld e,(ix+15)
365+  8626 19               add hl,de
366+  8627 ED 5B 95 80      ld de,(px)
367+  862B B7               or a
368+  862C ED 52            sbc hl,de
369+  862E 7D               ld a,l
370+  862F FE 1C            cp 28
371+  8631 DA F8 85         jp c,obj_check_coll_y
372+  8634 C9               ret
373+  8635
374+  8635              checkcollision_player_ghostwalker:
375+  8635                  ;x axis collision check:
376+  8635 DD 66 04         ld h,(ix+4)
377+  8638 DD 6E 05         ld l,(ix+5)
378+  863B DD 56 0E         ld d,(ix+14)
379+  863E DD 5E 0F         ld e,(ix+15)
380+  8641 B7               or a
381+  8642 ED 52            sbc hl,de
382+  8644 ED 5B 95 80      ld de,(px)
383+  8648 B7               or a
384+  8649 ED 52            sbc hl,de
385+  864B 7D               ld a,l
386+  864C FE 1C            cp 28
387+  864E DA F8 85         jp c,obj_check_coll_y
388+  8651 C9               ret
# file closed: src/objects.asm
 46   8652              	include 'game.asm'
# file opened: src/game.asm
  1+  8652 00           frame_counter db 0
  2+  8653
  3+  8653              game_init:
  4+  8653 CD 79 8C         call layer2_init
  5+  8656 ED 91 56 0E      nextreg $56,14
  6+  865A
  7+  865A 06 0E            ld b,WBOY_PATTERN_COUNT
  8+  865C 21 00 C0         ld hl,$c000
  9+  865F CD D5 87         call sprites_init
 10+  8662
 11+  8662 CD 9A 8C         call tiles_init
 12+  8665 CD A6 80         call player_init
 13+  8668 CD 8B 8E         call projectiles_init
 14+  866B
 15+  866B C9               ret
 16+  866C
 17+  866C
 18+  866C              game_update:
 19+  866C 06 0B            ld b,11
 20+  866E CD 39 80         call WaitRasterLine
 21+  8671
 22+  8671 3A 52 86         ld a,(frame_counter)
 23+  8674 3C               inc a
 24+  8675 32 52 86         ld (frame_counter),a
 25+  8678
 26+  8678 CD E3 8C         call layer2_update
 27+  867B CD A5 86         call check_keys
 28+  867E CD B7 81         call player_update
 29+  8681 CD AA 80         call draw_debug_sprite
 30+  8684 CD 9B 84         call objects_update
 31+  8687 CD D1 8E         call projectiles_update
 32+  868A
 33+  868A C9               ret
 34+  868B
 35+  868B              game_draw:
 36+  868B CD 31 81         call player_draw
 37+  868E CD B0 84         call objects_draw
 38+  8691 CD E6 8E         call projectiles_draw
 39+  8694 C9               ret
 40+  8695
 41+  8695
# file closed: src/game.asm
 47   8695              	include 'retrotools\keycacher.asm'
# file opened: src/retrotools/keycacher.asm
  1+  8695              ;Usage:
  2+  8695              ;first call check_keys
  3+  8695              ;compare states of cached values (eg. keypressed_W) before doing movement/actions etc.
  4+  8695              ;after all actions, call reset_keys
  5+  8695
  6+  8695
  7+  8695              ; 32766 B, N, M, Symbol Shift, Space
  8+  8695              ; 49150 H, J, K, L, Enter
  9+  8695              ; 57342 Y, U, I, O, P
 10+  8695              ; 61438 6, 7, 8, 9, 0
 11+  8695              ; 63486 5, 4, 3, 2, 1
 12+  8695              ; 64510 T, R, E, W, Q
 13+  8695              ; 65022 G, F, D, S, A
 14+  8695              ; 65278 V, C, X, Z, Caps Shift
 15+  8695
 16+  8695
 17+  8695 00           keypressed_W db FALSE
 18+  8696 00           keypressed_W_Held db FALSE
 19+  8697 00           keypressed_A db FALSE
 20+  8698 00           keypressed_A_Held db FALSE
 21+  8699 00           keypressed_S db FALSE
 22+  869A 00           keypressed_S_Held db FALSE
 23+  869B 00           keypressed_D db FALSE
 24+  869C
 25+  869C 00           keypressed_F db FALSE
 26+  869D 00           keypressed_F_Held db FALSE
 27+  869E 00           keypressed_I db FALSE
 28+  869F 00           keypressed_Q db FALSE
 29+  86A0 00           keypressed_Q_Held db FALSE
 30+  86A1 00           keypressed_O db FALSE
 31+  86A2 00           keypressed_P db FALSE
 32+  86A3 00           keypressed_Space db FALSE
 33+  86A4 00           keypressed_Space_Held db FALSE
 34+  86A5
 35+  86A5              check_keys:
 36+  86A5 3A 95 86         ld a,(keypressed_W)
 37+  86A8 FE 01            cp TRUE
 38+  86AA CC 5D 87         call z,set_W_Held
 39+  86AD C4 63 87         call nz, reset_W_Held
 40+  86B0
 41+  86B0 3A 99 86         ld a,(keypressed_S)
 42+  86B3 FE 01            cp TRUE
 43+  86B5 CC 7F 87         call z,set_S_Held
 44+  86B8 C4 85 87         call nz, reset_S_Held
 45+  86BB
 46+  86BB 3A 9C 86         ld a,(keypressed_F)
 47+  86BE FE 01            cp TRUE
 48+  86C0 CC 96 87         call z, set_F_Held
 49+  86C3 C4 9C 87         call nz, reset_F_Held
 50+  86C6
 51+  86C6 3A 97 86         ld a,(keypressed_A)
 52+  86C9 FE 01            cp TRUE
 53+  86CB CC 6E 87         call z,set_A_Held
 54+  86CE C4 74 87         call nz, reset_A_Held
 55+  86D1
 56+  86D1 3A 9F 86         ld a,(keypressed_Q)
 57+  86D4 FE 01            cp TRUE
 58+  86D6 CC AD 87         call z,set_Q_Held
 59+  86D9 C4 B3 87         call nz, reset_Q_Held
 60+  86DC
 61+  86DC 3A A3 86         ld a,(keypressed_Space)
 62+  86DF FE 01            cp TRUE
 63+  86E1 CC CA 87         call z,set_Space_Held
 64+  86E4 C4 D0 87         call nz, reset_Space_Held
 65+  86E7
 66+  86E7
 67+  86E7
 68+  86E7 AF               xor a
 69+  86E8 32 95 86         ld (keypressed_W),a
 70+  86EB 32 97 86         ld (keypressed_A),a
 71+  86EE 32 99 86         ld (keypressed_S),a
 72+  86F1 32 9B 86         ld (keypressed_D),a
 73+  86F4 32 9C 86         ld (keypressed_F),a
 74+  86F7 32 9E 86         ld (keypressed_I),a
 75+  86FA 32 9F 86         ld (keypressed_Q),a
 76+  86FD 32 A1 86         ld (keypressed_O),a
 77+  8700 32 A2 86         ld (keypressed_P),a
 78+  8703 32 A3 86         ld (keypressed_Space),a
 79+  8706
 80+  8706
 81+  8706 01 FE FD         ld bc,0xFDFE ;ASDFG
 82+  8709 ED 78            in a,(c)
 83+  870B 1F               rra
 84+  870C F5               push af
 85+  870D D4 68 87         call nc, set_A
 86+  8710 F1               pop af
 87+  8711 1F               rra
 88+  8712 F5               push af
 89+  8713 D4 79 87         call nc, set_S
 90+  8716 F1               pop af
 91+  8717 1F               rra
 92+  8718 F5               push af
 93+  8719 D4 8A 87         call nc, set_D
 94+  871C F1               pop af
 95+  871D 1F               rra
 96+  871E F5               push af
 97+  871F D4 90 87         call nc, set_F
 98+  8722 F1               pop af
 99+  8723
100+  8723 01 FE FB         ld bc,0xFBFE ;QWERT
101+  8726 ED 78            in a,(c)
102+  8728 1F               rra ;Q
103+  8729 F5               push af
104+  872A D4 A7 87         call nc, set_Q
105+  872D F1               pop af
106+  872E 1F               rra ;W
107+  872F F5               push af
108+  8730 D4 57 87         call nc, set_W
109+  8733 F1               pop af
110+  8734
111+  8734 01 FE DF         ld bc,0xDFFE ;POIUY
112+  8737 ED 78            in a,(c)
113+  8739 1F               rra ;P
114+  873A F5               push af
115+  873B D4 BE 87         call nc, set_P
116+  873E F1               pop af
117+  873F 1F               rra ;O
118+  8740 F5               push af
119+  8741 D4 B8 87         call nc, set_O
120+  8744 F1               pop af
121+  8745 1F               rra ;I
122+  8746 F5               push af
123+  8747 D4 A1 87         call nc, set_I
124+  874A F1               pop af
125+  874B
126+  874B 01 FE 7F         ld bc,32766
127+  874E ED 78            in a,(c)
128+  8750 1F               rra
129+  8751 F5               push af
130+  8752 D4 C4 87         call nc, set_Space
131+  8755 F1               pop af
132+  8756
133+  8756
134+  8756 C9               ret
135+  8757
136+  8757              set_W:
137+  8757 3E 01            ld a,TRUE
138+  8759 32 95 86         ld (keypressed_W),a
139+  875C C9               ret
140+  875D
141+  875D              set_W_Held:
142+  875D 3E 01            ld a,TRUE
143+  875F 32 96 86         ld (keypressed_W_Held),a
144+  8762 C9               ret
145+  8763              reset_W_Held:
146+  8763 AF               xor a
147+  8764 32 96 86         ld (keypressed_W_Held),a
148+  8767 C9               ret
149+  8768
150+  8768              set_A:
151+  8768 3E 01            ld a,TRUE
152+  876A 32 97 86         ld (keypressed_A),a
153+  876D C9               ret
154+  876E
155+  876E              set_A_Held:
156+  876E 3E 01            ld a,TRUE
157+  8770 32 98 86         ld (keypressed_A_Held),a
158+  8773 C9               ret
159+  8774
160+  8774              reset_A_Held:
161+  8774 AF               xor a
162+  8775 32 98 86         ld (keypressed_A_Held),a
163+  8778 C9               ret
164+  8779
165+  8779              set_S:
166+  8779 3E 01            ld a,TRUE
167+  877B 32 99 86         ld (keypressed_S),a
168+  877E C9               ret
169+  877F              set_S_Held:
170+  877F 3E 01            ld a,TRUE
171+  8781 32 9A 86         ld (keypressed_S_Held),a
172+  8784 C9               ret
173+  8785              reset_S_Held:
174+  8785 AF               xor a
175+  8786 32 9A 86         ld (keypressed_S_Held),a
176+  8789 C9               ret
177+  878A
178+  878A              set_D:
179+  878A 3E 01            ld a,TRUE
180+  878C 32 9B 86         ld (keypressed_D),a
181+  878F C9               ret
182+  8790
183+  8790              set_F:
184+  8790 3E 01            ld a,TRUE
185+  8792 32 9C 86         ld (keypressed_F),a
186+  8795 C9               ret
187+  8796
188+  8796
189+  8796              set_F_Held:
190+  8796 3E 01            ld a,TRUE
191+  8798 32 9D 86         ld (keypressed_F_Held),a
192+  879B C9               ret
193+  879C
194+  879C              reset_F_Held:
195+  879C AF               xor a
196+  879D 32 9D 86         ld (keypressed_F_Held),a
197+  87A0 C9               ret
198+  87A1
199+  87A1
200+  87A1
201+  87A1              set_I:
202+  87A1 3E 01            ld a,TRUE
203+  87A3 32 9E 86         ld (keypressed_I),a
204+  87A6 C9               ret
205+  87A7
206+  87A7
207+  87A7              set_Q:
208+  87A7 3E 01            ld a,TRUE
209+  87A9 32 9F 86         ld (keypressed_Q),a
210+  87AC C9               ret
211+  87AD
212+  87AD              set_Q_Held:
213+  87AD 3E 01            ld a,TRUE
214+  87AF 32 A0 86         ld (keypressed_Q_Held),a
215+  87B2 C9               ret
216+  87B3
217+  87B3              reset_Q_Held:
218+  87B3 AF               xor a
219+  87B4 32 A0 86         ld (keypressed_Q_Held),a
220+  87B7 C9               ret
221+  87B8
222+  87B8              set_O:
223+  87B8 3E 01            ld a,TRUE
224+  87BA 32 A1 86         ld (keypressed_O),a
225+  87BD C9               ret
226+  87BE
227+  87BE              set_P:
228+  87BE 3E 01            ld a,TRUE
229+  87C0 32 A2 86         ld (keypressed_P),a
230+  87C3 C9               ret
231+  87C4
232+  87C4              set_Space:
233+  87C4 3E 01            ld a,TRUE
234+  87C6 32 A3 86         ld (keypressed_Space),a
235+  87C9 C9               ret
236+  87CA              set_Space_Held:
237+  87CA 3E 01            ld a,TRUE
238+  87CC 32 A4 86         ld (keypressed_Space_Held),a
239+  87CF C9               ret
240+  87D0
241+  87D0              reset_Space_Held:
242+  87D0 AF               xor a
243+  87D1 32 A4 86         ld (keypressed_Space_Held),a
244+  87D4 C9               ret
245+  87D5
# file closed: src/retrotools/keycacher.asm
 48   87D5              	include 'retrotools\spritetools.asm'
# file opened: src/retrotools/spritetools.asm
  1+  87D5              VISIBILITY equ %10000000
  2+  87D5              EXTENDED equ %01000000
  3+  87D5              MIRROR_X equ %00001000
  4+  87D5              MIRROR_Y equ %00000100
  5+  87D5
  6+  87D5              ; Sprite Attribute 0
  7+  87D5              ;     X X X X X X X X
  8+  87D5
  9+  87D5              ; Sprite Attribute 1
 10+  87D5              ;     Y Y Y Y Y Y Y Y
 11+  87D5
 12+  87D5              ; Sprite Attribute 2
 13+  87D5              ;     P P P P XM YM R X8/PR
 14+  87D5
 15+  87D5              ; Sprite Attribute 3
 16+  87D5              ;     V E N5 N4 N3 N2 N1 N0 (NNNNN=Pattern ID)
 17+  87D5
 18+  87D5              ; Sprite Attribute 4
 19+  87D5              ; A. Extended Anchor Sprite
 20+  87D5              ;     H N6 T X X Y Y Y8
 21+  87D5              ; B. Relative Sprite, Composite Type
 22+  87D5              ;     0 1 N6 X X Y Y PO
 23+  87D5              ; C. Relative Sprite, Unified Type
 24+  87D5              ;     0 1 N6 0 0 0 0 PO
 25+  87D5
 26+  87D5
 27+  87D5
 28+  87D5              ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 29+  87D5              ;; Upload spritesheet to 16K FPGA Internal Memory
 30+  87D5              ;; Inputs: B=Sprite Count HL=Sprite data Ptr
 31+  87D5              ;; Outputs: none
 32+  87D5              ;; Destroys: A,BC,HL
 33+  87D5              ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 34+  87D5              sprites_init:
 35+  87D5 C5           	push bc
 36+  87D6 3E 00        	ld a,0
 37+  87D8 01 3B 30     	ld bc,$303b
 38+  87DB ED 79        	out (c),a
 39+  87DD C1           	pop bc
 40+  87DE              is_loop:
 41+  87DE C5           	push bc
 42+  87DF 01 5B 00     	ld bc,$005b
 43+  87E2 ED B3        	otir
 44+  87E4 C1           	pop bc
 45+  87E5 10 F7        	djnz is_loop
 46+  87E7 C9           	ret
# file closed: src/retrotools/spritetools.asm
 49   87E8              	include 'levels\levels.asm'
# file opened: src/levels/levels.asm
  1+  87E8              ; another way to check solids (if not in order)
  2+  87E8              super_solids:
  3+  87E8 11 13 31         db 17,19,49
  4+  87EB
  5+  87EB              SOLIDS_LENGTH equ 3
  6+  87EB
  7+  87EB              ;INPUTS:
  8+  87EB              ;A=value to test against 'solids' array
  9+  87EB              check_solid:
 10+  87EB 21 E8 87         ld hl,super_solids
 11+  87EE 01 03 00         ld bc,SOLIDS_LENGTH
 12+  87F1 ED B1            cpir
 13+  87F3 C9               ret
 14+  87F4
 15+  87F4
 16+  87F4              ;Platform::
 17+  87F4              ;01 03 03 01*
 18+  87F4              ;17 19 19 17*
 19+  87F4              ;02 04 04 02*
 20+  87F4              ;18 20 20 18*
 21+  87F4
 22+  87F4
 23+  87F4
 24+  87F4
 25+  87F4              superlevel:
 26+  87F4 00 00 00 00      db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
 26+  87F8 00 00 00 00
 26+  87FC 00 00 00 00
 26+  8800 00 00 00 00
 26+  8804 00 00 00 00
 26+  8808 00 00 00 00
 26+  880C 00 00 00 00
 26+  8810 00 00 00 00
 26+  8814 00 00 00 00
 26+  8818 00 00 00 00
 26+  881C 00 00 00 00
 26+  8820 00 00 00 00
 26+  8824 00 00 00 00
 26+  8828 00 00 00 00
 26+  882C 00 00 00 00
 26+  8830 00 00 00 00
 26+  8834 00 00 00 00
 26+  8838 00 00 00 00
 26+  883C 00 00 00 00
 26+  8840 00 00 00 00
 27+  8844 00 00 00 00      db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,01,03,03,03,33,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
 27+  8848 00 00 00 00
 27+  884C 00 00 00 00
 27+  8850 00 00 00 00
 27+  8854 00 00 00 00
 27+  8858 00 00 00 00
 27+  885C 00 00 00 00
 27+  8860 00 00 00 00
 27+  8864 00 00 00 00
 27+  8868 00 00 00 00
 27+  886C 00 00 00 00
 27+  8870 00 00 00 00
 27+  8874 00 00 00 00
 27+  8878 00 01 03 03
 27+  887C 03 21 00 00
 27+  8880 00 00 00 00
 27+  8884 00 00 00 00
 27+  8888 00 00 00 00
 27+  888C 00 00 00 00
 27+  8890 00 00 00 00
 28+  8894 00 00 00 00      db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,17,19,19,19,49,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
 28+  8898 00 00 00 00
 28+  889C 00 00 00 00
 28+  88A0 00 00 00 00
 28+  88A4 00 00 00 00
 28+  88A8 00 00 00 00
 28+  88AC 00 00 00 00
 28+  88B0 00 00 00 00
 28+  88B4 00 00 00 00
 28+  88B8 00 00 00 00
 28+  88BC 00 00 00 00
 28+  88C0 00 00 00 00
 28+  88C4 00 00 00 00
 28+  88C8 00 11 13 13
 28+  88CC 13 31 00 00
 28+  88D0 00 00 00 00
 28+  88D4 00 00 00 00
 28+  88D8 00 00 00 00
 28+  88DC 00 00 00 00
 28+  88E0 00 00 00 00
 29+  88E4 00 00 00 00      db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,01,33,00,00,01,03,03,03,33,00,02,20,20,20,34,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
 29+  88E8 00 00 00 00
 29+  88EC 00 00 00 00
 29+  88F0 00 00 00 00
 29+  88F4 00 00 00 00
 29+  88F8 00 00 00 00
 29+  88FC 00 00 00 00
 29+  8900 00 00 00 00
 29+  8904 00 00 00 00
 29+  8908 00 00 00 00
 29+  890C 00 00 00 01
 29+  8910 21 00 00 01
 29+  8914 03 03 03 21
 29+  8918 00 02 14 14
 29+  891C 14 22 00 00
 29+  8920 00 00 00 00
 29+  8924 00 00 00 00
 29+  8928 00 00 00 00
 29+  892C 00 00 00 00
 29+  8930 00 00 00 00
 30+  8934 00 00 00 00      db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,01,03,03,03,03,03,03,03,03,03,03,03,33,00,00,00,00,00,00,00,00,00,00,17,19,00,00,17,19,19,19,49,00,18,19,19,19,50,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
 30+  8938 00 00 00 00
 30+  893C 00 00 00 00
 30+  8940 00 00 00 00
 30+  8944 00 00 00 00
 30+  8948 01 03 03 03
 30+  894C 03 03 03 03
 30+  8950 03 03 03 03
 30+  8954 21 00 00 00
 30+  8958 00 00 00 00
 30+  895C 00 00 00 11
 30+  8960 13 00 00 11
 30+  8964 13 13 13 31
 30+  8968 00 12 13 13
 30+  896C 13 32 00 00
 30+  8970 00 00 00 00
 30+  8974 00 00 00 00
 30+  8978 00 00 00 00
 30+  897C 00 00 00 00
 30+  8980 00 00 00 00
 31+  8984 00 00 00 00      db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,17,19,19,19,19,19,19,19,19,19,19,19,49,00,00,00,00,00,01,03,03,03,03,02,49,00,00,02,20,20,20,34,00,02,20,20,20,34,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
 31+  8988 00 00 00 00
 31+  898C 00 00 00 00
 31+  8990 00 00 00 00
 31+  8994 00 00 00 00
 31+  8998 11 13 13 13
 31+  899C 13 13 13 13
 31+  89A0 13 13 13 13
 31+  89A4 31 00 00 00
 31+  89A8 00 00 01 03
 31+  89AC 03 03 03 02
 31+  89B0 31 00 00 02
 31+  89B4 14 14 14 22
 31+  89B8 00 02 14 14
 31+  89BC 14 22 00 00
 31+  89C0 00 00 00 00
 31+  89C4 00 00 00 00
 31+  89C8 00 00 00 00
 31+  89CC 00 00 00 00
 31+  89D0 00 00 00 00
 32+  89D4 00 01 03 03      db 00,01,03,03,03,03,03,33,00,00,01,03,03,03,03,03,03,03,03,33,02,20,20,20,20,20,20,20,20,20,20,20,34,03,03,03,33,00,17,19,19,19,19,19,34,00,00,18,19,19,19,50,00,18,19,19,19,50,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
 32+  89D8 03 03 03 21
 32+  89DC 00 00 01 03
 32+  89E0 03 03 03 03
 32+  89E4 03 03 03 21
 32+  89E8 02 14 14 14
 32+  89EC 14 14 14 14
 32+  89F0 14 14 14 14
 32+  89F4 22 03 03 03
 32+  89F8 21 00 11 13
 32+  89FC 13 13 13 13
 32+  8A00 22 00 00 12
 32+  8A04 13 13 13 32
 32+  8A08 00 12 13 13
 32+  8A0C 13 32 00 00
 32+  8A10 00 00 00 00
 32+  8A14 00 00 00 00
 32+  8A18 00 00 00 00
 32+  8A1C 00 00 00 00
 32+  8A20 00 00 00 00
 33+  8A24 00 11 13 13      db 00,17,19,19,19,19,19,49,00,00,17,19,19,19,19,19,19,19,19,49,18,19,19,19,19,19,19,19,19,19,19,19,50,19,19,19,49,00,02,20,20,20,20,20,50,00,00,02,20,20,20,34,00,02,20,20,20,34,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
 33+  8A28 13 13 13 31
 33+  8A2C 00 00 11 13
 33+  8A30 13 13 13 13
 33+  8A34 13 13 13 31
 33+  8A38 12 13 13 13
 33+  8A3C 13 13 13 13
 33+  8A40 13 13 13 13
 33+  8A44 32 13 13 13
 33+  8A48 31 00 02 14
 33+  8A4C 14 14 14 14
 33+  8A50 32 00 00 02
 33+  8A54 14 14 14 22
 33+  8A58 00 02 14 14
 33+  8A5C 14 22 00 00
 33+  8A60 00 00 00 00
 33+  8A64 00 00 00 00
 33+  8A68 00 00 00 00
 33+  8A6C 00 00 00 00
 33+  8A70 00 00 00 00
 34+  8A74
 35+  8A74
 36+  8A74              supertiles:
 37+  8A74 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR   ;supertile 0
 37+  8A78 00 00 00 00
 38+  8A7C 02 00 03 00      db 2,TILE_ATTR_NOMIRROR,3,TILE_ATTR_NOMIRROR,34,TILE_ATTR_NOMIRROR,35,TILE_ATTR_NOMIRROR ;1
 38+  8A80 22 00 23 00
 39+  8A84 04 00 05 00      db 4,TILE_ATTR_NOMIRROR,5,TILE_ATTR_NOMIRROR,36,TILE_ATTR_NOMIRROR,37,TILE_ATTR_NOMIRROR ;2
 39+  8A88 24 00 25 00
 40+  8A8C 06 00 07 00      db 6,TILE_ATTR_NOMIRROR,7,TILE_ATTR_NOMIRROR,38,TILE_ATTR_NOMIRROR,39,TILE_ATTR_NOMIRROR ;3
 40+  8A90 26 00 27 00
 41+  8A94 08 00 09 00      db 8,TILE_ATTR_NOMIRROR,9,TILE_ATTR_NOMIRROR,40,TILE_ATTR_NOMIRROR,41,TILE_ATTR_NOMIRROR ;4
 41+  8A98 28 00 29 00
 42+  8A9C 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 42+  8AA0 00 00 00 00
 43+  8AA4 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 43+  8AA8 00 00 00 00
 44+  8AAC 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 44+  8AB0 00 00 00 00
 45+  8AB4 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 45+  8AB8 00 00 00 00
 46+  8ABC 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 46+  8AC0 00 00 00 00
 47+  8AC4 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 47+  8AC8 00 00 00 00
 48+  8ACC 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 48+  8AD0 00 00 00 00
 49+  8AD4 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 49+  8AD8 00 00 00 00
 50+  8ADC 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 50+  8AE0 00 00 00 00
 51+  8AE4 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 51+  8AE8 00 00 00 00
 52+  8AEC 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 52+  8AF0 00 00 00 00
 53+  8AF4 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 53+  8AF8 00 00 00 00
 54+  8AFC 42 00 43 00      db 66,TILE_ATTR_NOMIRROR,67,TILE_ATTR_NOMIRROR,98,TILE_ATTR_NOMIRROR,99,TILE_ATTR_NOMIRROR ;17
 54+  8B00 62 00 63 00
 55+  8B04 44 00 45 00      db 68,TILE_ATTR_NOMIRROR,69,TILE_ATTR_NOMIRROR,100,TILE_ATTR_NOMIRROR,101,TILE_ATTR_NOMIRROR ;18
 55+  8B08 64 00 65 00
 56+  8B0C 46 00 47 00      db 70,TILE_ATTR_NOMIRROR,71,TILE_ATTR_NOMIRROR,102,TILE_ATTR_NOMIRROR,103,TILE_ATTR_NOMIRROR ;19
 56+  8B10 66 00 67 00
 57+  8B14 48 00 49 00      db 72,TILE_ATTR_NOMIRROR,73,TILE_ATTR_NOMIRROR,104,TILE_ATTR_NOMIRROR,105,TILE_ATTR_NOMIRROR ;20
 57+  8B18 68 00 69 00
 58+  8B1C 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 58+  8B20 00 00 00 00
 59+  8B24 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 59+  8B28 00 00 00 00
 60+  8B2C 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 60+  8B30 00 00 00 00
 61+  8B34 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 61+  8B38 00 00 00 00
 62+  8B3C 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 62+  8B40 00 00 00 00
 63+  8B44 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 63+  8B48 00 00 00 00
 64+  8B4C 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 64+  8B50 00 00 00 00
 65+  8B54 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 65+  8B58 00 00 00 00
 66+  8B5C 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR
 66+  8B60 00 00 00 00
 67+  8B64 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR ;30
 67+  8B68 00 00 00 00
 68+  8B6C 00 00 00 00      db 0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR,0,TILE_ATTR_NOMIRROR ;31 - end of definitions
 68+  8B70 00 00 00 00
 69+  8B74 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR ;32 0*
 69+  8B78 00 08 00 08
 70+  8B7C 03 08 02 08      db 3,TILE_ATTR_MIRROR,2,TILE_ATTR_MIRROR,35,TILE_ATTR_MIRROR,34,TILE_ATTR_MIRROR ;33 1*
 70+  8B80 23 08 22 08
 71+  8B84 05 08 04 08      db 5,TILE_ATTR_MIRROR,4,TILE_ATTR_MIRROR,37,TILE_ATTR_MIRROR,36,TILE_ATTR_MIRROR ;34 2*
 71+  8B88 25 08 24 08
 72+  8B8C 07 08 06 08      db 7,TILE_ATTR_MIRROR,6,TILE_ATTR_MIRROR,39,TILE_ATTR_MIRROR,38,TILE_ATTR_MIRROR ;35 3*
 72+  8B90 27 08 26 08
 73+  8B94 09 08 08 08      db 9,TILE_ATTR_MIRROR,8,TILE_ATTR_MIRROR,41,TILE_ATTR_MIRROR,40,TILE_ATTR_MIRROR ;36 4*
 73+  8B98 29 08 28 08
 74+  8B9C 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 74+  8BA0 00 08 00 08
 75+  8BA4 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 75+  8BA8 00 08 00 08
 76+  8BAC 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 76+  8BB0 00 08 00 08
 77+  8BB4 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 77+  8BB8 00 08 00 08
 78+  8BBC 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 78+  8BC0 00 08 00 08
 79+  8BC4 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 79+  8BC8 00 08 00 08
 80+  8BCC 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 80+  8BD0 00 08 00 08
 81+  8BD4 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 81+  8BD8 00 08 00 08
 82+  8BDC 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 82+  8BE0 00 08 00 08
 83+  8BE4 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 83+  8BE8 00 08 00 08
 84+  8BEC 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 84+  8BF0 00 08 00 08
 85+  8BF4 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 85+  8BF8 00 08 00 08
 86+  8BFC 43 08 42 08      db 67,TILE_ATTR_MIRROR,66,TILE_ATTR_MIRROR,99,TILE_ATTR_MIRROR,98,TILE_ATTR_MIRROR ;49 17*
 86+  8C00 63 08 62 08
 87+  8C04 45 08 44 08      db 69,TILE_ATTR_MIRROR,68,TILE_ATTR_MIRROR,101,TILE_ATTR_MIRROR,100,TILE_ATTR_MIRROR ;50 18*
 87+  8C08 65 08 64 08
 88+  8C0C 47 08 46 08      db 71,TILE_ATTR_MIRROR,70,TILE_ATTR_MIRROR,103,TILE_ATTR_MIRROR,102,TILE_ATTR_MIRROR ;19*
 88+  8C10 67 08 66 08
 89+  8C14 49 08 48 08      db 73,TILE_ATTR_MIRROR,72,TILE_ATTR_MIRROR,105,TILE_ATTR_MIRROR,104,TILE_ATTR_MIRROR ;20*
 89+  8C18 69 08 68 08
 90+  8C1C 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 90+  8C20 00 08 00 08
 91+  8C24 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 91+  8C28 00 08 00 08
 92+  8C2C 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 92+  8C30 00 08 00 08
 93+  8C34 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 93+  8C38 00 08 00 08
 94+  8C3C 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 94+  8C40 00 08 00 08
 95+  8C44 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 95+  8C48 00 08 00 08
 96+  8C4C 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 96+  8C50 00 08 00 08
 97+  8C54 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 97+  8C58 00 08 00 08
 98+  8C5C 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR
 98+  8C60 00 08 00 08
 99+  8C64 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR ;30*
 99+  8C68 00 08 00 08
100+  8C6C 00 08 00 08      db 0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR,0,TILE_ATTR_MIRROR ;31*
100+  8C70 00 08 00 08
101+  8C74                  ;supertile 31 is last
102+  8C74
103+  8C74
104+  8C74
# file closed: src/levels/levels.asm
 50   8C74              	include 'levels\levelmanager.asm'
# file opened: src/levels/levelmanager.asm
  1+  8C74              TILE_DEFINITIONS_SIZE equ 4096
  2+  8C74
  3+  8C74
  4+  8C74              VIEW_WIDTH equ 40
  5+  8C74              VIEW_HEIGHT equ 32
  6+  8C74
  7+  8C74              VIEW_WIDTH_META equ 20
  8+  8C74
  9+  8C74              LEVEL_START_ADDRESS equ $4500 ;half way down
 10+  8C74              LEVEL_WIDTH_META equ 80
 11+  8C74              LEVEL_HEIGHT_META equ 8
 12+  8C74
 13+  8C74              OUT_OF_WORLD equ LEVEL_WIDTH_META+1
 14+  8C74
 15+  8C74
 16+  8C74              TILE_ATTR_NOMIRROR equ %00000000
 17+  8C74              TILE_ATTR_MIRROR equ %00001000
 18+  8C74
 19+  8C74
 20+  8C74
 21+  8C74 00           current_scroll db 0
 22+  8C75 01           scroll_direction db RIGHT
 23+  8C76
 24+  8C76              LEVEL_START equ 0
 25+  8C76
 26+  8C76 00           cam_x db LEVEL_START
 27+  8C77
 28+  8C77 40 01        layer2_scroll dw 320
 29+  8C79
 30+  8C79
 31+  8C79              layer2_init:
 32+  8C79                  CLIP_LAYER2 8,151,0,255 ;layer 2 is basically rotated to do 320x256 mode
 32+  8C79 3E 08       >		ld a,8
 32+  8C7B ED 92 18    >		nextreg $18,a
 32+  8C7E 3E 97       >		ld a,151
 32+  8C80 ED 92 18    >		nextreg $18,a
 32+  8C83 3E 00       >		ld a,0
 32+  8C85 ED 92 18    >		nextreg $18,a
 32+  8C88 3E FF       >		ld a,255
 32+  8C8A ED 92 18    >		nextreg $18,a
 32+  8C8D             >
 33+  8C8D
 34+  8C8D ED 91 70 10      nextreg $70, %00010000 ;bit5-4=320x256x8bpp mode
 35+  8C91 ED 91 69 80      nextreg $69, %10000000 ;bit7=enable layer2
 36+  8C95 ED 91 12 14  	nextreg $12,20 ;layer2 ram page register
 37+  8C99 C9               ret
 38+  8C9A
 39+  8C9A              tiles_init:
 40+  8C9A                  CLIPTILES 8,151,0,255
 40+  8C9A 3E 08       >		ld a,8
 40+  8C9C ED 92 1B    >		nextreg $1b,a
 40+  8C9F 3E 97       >		ld a,151
 40+  8CA1 ED 92 1B    >		nextreg $1b,a
 40+  8CA4 3E 00       >		ld a,0
 40+  8CA6 ED 92 1B    >		nextreg $1b,a
 40+  8CA9 3E FF       >		ld a,255
 40+  8CAB ED 92 1B    >		nextreg $1b,a
 40+  8CAE             >
 41+  8CAE CD FD 8C         call tiles_set_palette
 42+  8CB1
 43+  8CB1                  ;load the tile defs
 44+  8CB1 ED 91 56 10      nextreg $56, 16
 45+  8CB5 21 00 C0         ld hl,$c000
 46+  8CB8 11 00 60         ld de,$6000
 47+  8CBB 01 00 10         ld bc,TILE_DEFINITIONS_SIZE
 48+  8CBE ED B0            ldir
 49+  8CC0
 50+  8CC0 ED 91 6B 80      nextreg $6b, %10000000
 51+  8CC4 ED 91 6C 00      nextreg $6c, 0
 52+  8CC8 ED 91 6E 40      nextreg $6e, $40
 53+  8CCC ED 91 6F 60      nextreg $6f, $60
 54+  8CD0 ED 91 68 80      nextreg $68, %10000000
 55+  8CD4 ED 91 43 30      nextreg $43, %00110000
 56+  8CD8
 57+  8CD8 AF               xor a ;black
 58+  8CD9 ED 92 4C         nextreg $4c,a ;tilemap transparency colour
 59+  8CDC ED 92 14         nextreg $14,a; global transparency colour
 60+  8CDF
 61+  8CDF CD 17 8D         call view_init
 62+  8CE2
 63+  8CE2 C9               ret
 64+  8CE3
 65+  8CE3
 66+  8CE3              layer2_update:
 67+  8CE3 2A 77 8C         ld hl,(layer2_scroll)
 68+  8CE6 7D               ld a,l
 69+  8CE7 ED 92 16         nextreg $16, a
 70+  8CEA 7C               ld a,h
 71+  8CEB ED 92 71         nextreg $71, a
 72+  8CEE 2B               dec hl
 73+  8CEF 2B               dec hl
 74+  8CF0
 75+  8CF0 22 77 8C         ld (layer2_scroll),hl
 76+  8CF3 7C               ld a,h
 77+  8CF4 B5               or l
 78+  8CF5 C0               ret nz
 79+  8CF6
 80+  8CF6 21 40 01         ld hl,320
 81+  8CF9 22 77 8C         ld (layer2_scroll),hl
 82+  8CFC
 83+  8CFC C9               ret
 84+  8CFD
 85+  8CFD
 86+  8CFD
 87+  8CFD
 88+  8CFD              tiles_set_palette:
 89+  8CFD 21 0F 91         ld hl,caveman_palette
 90+  8D00 ED 91 43 30      nextreg $43,%00110000
 91+  8D04 AF               xor a
 92+  8D05 06 10            ld b,16
 93+  8D07 ED 92 40         nextreg $40,a
 94+  8D0A              uploadpal:
 95+  8D0A 7E               ld a,(hl)
 96+  8D0B ED 92 44         nextreg $44,a
 97+  8D0E 23               inc hl
 98+  8D0F 7E               ld a,(hl)
 99+  8D10 ED 92 44         nextreg $44,a
100+  8D13 23               inc hl
101+  8D14 10 F4            djnz uploadpal
102+  8D16 C9               ret
103+  8D17
104+  8D17
105+  8D17              ;does 2 passes per 'map' line, due to 2 rows within each supertile
106+  8D17              view_init:
107+  8D17 DD 21 F4 87      ld ix,superlevel ;point at level 'map' (in super tiles)
108+  8D1B 11 00 45         ld de,$4500 ;
109+  8D1E 0E 00            ld c,0
110+  8D20              view_init_screen:
111+  8D20 06 14            ld b,VIEW_WIDTH_META
112+  8D22              view_init_line_pass1:
113+  8D22 21 74 8A         ld hl,supertiles
114+  8D25 DD 7E 00         ld a,(ix)
115+  8D28 87               add a,a
116+  8D29 87               add a,a ;A*4 (supertile size)
117+  8D2A ED 31            add hl,a
118+  8D2C ED 31            add hl,a ;add twice to hl because supertile elements are 2 bytes each
119+  8D2E 7E               ld a,(hl)
120+  8D2F 12               ld (de),a
121+  8D30 23               inc hl
122+  8D31 13               inc de
123+  8D32 7E               ld a,(hl)
124+  8D33 12               ld (de),a
125+  8D34 23               inc hl
126+  8D35 13               inc de
127+  8D36 7E               ld a,(hl)
128+  8D37 12               ld (de),a
129+  8D38 23               inc hl
130+  8D39 13               inc de
131+  8D3A 7E               ld a,(hl)
132+  8D3B 12               ld (de),a
133+  8D3C 13               inc de
134+  8D3D DD 23            inc ix
135+  8D3F 10 E1            djnz view_init_line_pass1
136+  8D41 06 14            ld b,VIEW_WIDTH_META
137+  8D43              view_init_golineback:
138+  8D43 DD 2B            dec ix
139+  8D45 10 FC            djnz view_init_golineback
140+  8D47 06 14            ld b,VIEW_WIDTH_META
141+  8D49              view_init_line_pass2:
142+  8D49 21 74 8A         ld hl,supertiles
143+  8D4C DD 7E 00         ld a,(ix)
144+  8D4F 87               add a,a
145+  8D50 87               add a,a ;A*4 (supertile size)
146+  8D51 ED 31            add hl,a
147+  8D53 ED 31            add hl,a
148+  8D55 3E 04            ld a,4
149+  8D57 ED 31            add hl,a
150+  8D59 7E               ld a,(hl)
151+  8D5A 12               ld (de),a
152+  8D5B 23               inc hl
153+  8D5C 13               inc de
154+  8D5D 7E               ld a,(hl)
155+  8D5E 12               ld (de),a
156+  8D5F 23               inc hl
157+  8D60 13               inc de
158+  8D61 7E               ld a,(hl)
159+  8D62 12               ld (de),a
160+  8D63 23               inc hl
161+  8D64 13               inc de
162+  8D65 7E               ld a,(hl)
163+  8D66 12               ld (de),a
164+  8D67 13               inc de
165+  8D68 DD 23            inc ix
166+  8D6A 10 DD            djnz view_init_line_pass2
167+  8D6C
168+  8D6C D5               push de
169+  8D6D 11 3C 00         ld de,LEVEL_WIDTH_META-VIEW_WIDTH_META
170+  8D70 DD 19            add ix,de
171+  8D72 D1               pop de
172+  8D73 0C               inc c
173+  8D74 79               ld a,c
174+  8D75 FE 08            cp LEVEL_HEIGHT_META
175+  8D77 DA 20 8D         jp c,view_init_screen
176+  8D7A C9               ret
177+  8D7B
178+  8D7B
179+  8D7B              MAX_SCROLL equ 16
180+  8D7B
181+  8D7B
182+  8D7B              scroll_left:
183+  8D7B 3A 75 8C         ld a,(scroll_direction)
184+  8D7E FE 00            cp LEFT
185+  8D80 CA 88 8D         jp z,do_scroll_left
186+  8D83
187+  8D83 3E 00            ld a,LEFT
188+  8D85 32 75 8C         ld (scroll_direction),a
189+  8D88              do_scroll_left:
190+  8D88 3A 76 8C         ld a,(cam_x)
191+  8D8B FE 00            cp 0
192+  8D8D CA 0F 83         jp z,p_move_left
193+  8D90
194+  8D90 3A 74 8C         ld a,(current_scroll)
195+  8D93 3D               dec a
196+  8D94 32 74 8C         ld (current_scroll),a
197+  8D97 FE FF            cp $ff
198+  8D99 CC A3 8D         call z,sl_scrollmax
199+  8D9C 3A 74 8C         ld a,(current_scroll)
200+  8D9F ED 92 30         nextreg $30,a
201+  8DA2 C9               ret
202+  8DA3              sl_scrollmax:
203+  8DA3 21 FC 49         ld hl,$4a00-4
204+  8DA6 11 00 4A         ld de,$4a00
205+  8DA9 01 00 05         ld bc,20*32*2
206+  8DAC ED B8            lddr
207+  8DAE
208+  8DAE 3A 76 8C         ld a,(cam_x)
209+  8DB1 3D               dec a
210+  8DB2 32 76 8C         ld (cam_x),a
211+  8DB5
212+  8DB5 21 F4 87         ld hl,superlevel
213+  8DB8 3A 76 8C         ld a,(cam_x)
214+  8DBB ED 31            add hl,a
215+  8DBD 11 00 45         ld de,LEVEL_START_ADDRESS
216+  8DC0 06 08            ld b,LEVEL_HEIGHT_META
217+  8DC2 CD 1E 8E         call putsupercolumn
218+  8DC5
219+  8DC5 3E 0F            ld a,MAX_SCROLL-1
220+  8DC7 32 74 8C         ld (current_scroll),a
221+  8DCA
222+  8DCA C9               ret
223+  8DCB
224+  8DCB
225+  8DCB
226+  8DCB              scroll_right:
227+  8DCB 3A 75 8C         ld a,(scroll_direction)
228+  8DCE FE 01            cp RIGHT
229+  8DD0 CA D8 8D         jp z,do_scroll_right
230+  8DD3
231+  8DD3 3E 01            ld a,RIGHT
232+  8DD5 32 75 8C         ld (scroll_direction),a
233+  8DD8
234+  8DD8              do_scroll_right:
235+  8DD8 3A 76 8C         ld a,(cam_x)
236+  8DDB C6 14            add a,VIEW_WIDTH_META
237+  8DDD FE 50            cp LEVEL_WIDTH_META
238+  8DDF D2 54 83         jp nc, p_move_right
239+  8DE2
240+  8DE2 3A 74 8C         ld a,(current_scroll)
241+  8DE5 3C               inc a
242+  8DE6 32 74 8C         ld (current_scroll),a
243+  8DE9 FE 10            cp MAX_SCROLL
244+  8DEB CC F5 8D         call z,sr_scrollmax
245+  8DEE 3A 74 8C         ld a,(current_scroll)
246+  8DF1 ED 92 30         nextreg $30,a
247+  8DF4 C9               ret
248+  8DF5
249+  8DF5              sr_scrollmax:
250+  8DF5 21 04 45         ld hl,LEVEL_START_ADDRESS+4
251+  8DF8 11 00 45         ld de,LEVEL_START_ADDRESS
252+  8DFB 01 00 05         ld bc,20*32*2
253+  8DFE ED B0            ldir
254+  8E00
255+  8E00 21 F4 87         ld hl,superlevel
256+  8E03 3A 76 8C         ld a,(cam_x)
257+  8E06 C6 14            add a,VIEW_WIDTH_META
258+  8E08 ED 31            add hl,a
259+  8E0A 11 4C 45         ld de,LEVEL_START_ADDRESS+76
260+  8E0D 06 08            ld b,LEVEL_HEIGHT_META
261+  8E0F CD 1E 8E         call putsupercolumn
262+  8E12
263+  8E12 AF               xor a
264+  8E13 32 74 8C         ld (current_scroll),a
265+  8E16
266+  8E16 3A 76 8C         ld a,(cam_x)
267+  8E19 3C               inc a
268+  8E1A 32 76 8C         ld (cam_x),a
269+  8E1D
270+  8E1D C9               ret
271+  8E1E
272+  8E1E
273+  8E1E
274+  8E1E              ;puts super tiles column from superlevel (map) to screen tile memory
275+  8E1E              ;supertile description (2x2 cells; 2bytes per cell):
276+  8E1E              ;AB
277+  8E1E              ;CD
278+  8E1E              ;2 bytes per cell
279+  8E1E              ;Inputs:
280+  8E1E              ;B=level height in supertiles
281+  8E1E              ;DE=top tile in column (screen memory)
282+  8E1E              ;HL=top tile in superlevel column
283+  8E1E              putsupercolumn:
284+  8E1E 7E               ld a,(hl) ;get supertile id
285+  8E1F 87               add a,a
286+  8E20 87               add a,a
287+  8E21 E5               push hl ;HL=supertiles again
288+  8E22 21 74 8A         ld hl,supertiles
289+  8E25 ED 31            add hl,a
290+  8E27 ED 31            add hl,a ;hl=supertiles+=(8*supertile ID)
291+  8E29 7E               ld a,(hl)
292+  8E2A 12               ld (de),a ;tile Aa
293+  8E2B 23               inc hl
294+  8E2C 13               inc de
295+  8E2D 7E               ld a,(hl)
296+  8E2E 12               ld (de),a ;tile Ab
297+  8E2F 23               inc hl
298+  8E30 13               inc de
299+  8E31 7E               ld a,(hl)
300+  8E32 12               ld (de),a ;tile Ba
301+  8E33 23               inc hl
302+  8E34 13               inc de
303+  8E35 7E               ld a,(hl)
304+  8E36 12               ld (de),a ;tile Bb
305+  8E37 23               inc hl
306+  8E38 ED 35 4D 00      add de,(VIEW_WIDTH*2)-3 ;down one line of screen tiles (2bytes per tile)
307+  8E3C 7E               ld a,(hl)
308+  8E3D 12               ld (de),a ;tile Ca
309+  8E3E 23               inc hl
310+  8E3F 13               inc de
311+  8E40 7E               ld a,(hl)
312+  8E41 12               ld (de),a ;tile Cb
313+  8E42 23               inc hl
314+  8E43 13               inc de
315+  8E44 7E               ld a,(hl)
316+  8E45 12               ld (de),a ;tile Da
317+  8E46 23               inc hl
318+  8E47 13               inc de
319+  8E48 7E               ld a,(hl)
320+  8E49 12               ld (de),a ;tile Db
321+  8E4A E1               pop hl
322+  8E4B ED 35 4D 00      add de,(VIEW_WIDTH*2)-3
323+  8E4F ED 34 50 00      add hl,LEVEL_WIDTH_META
324+  8E53 10 C9            djnz putsupercolumn
325+  8E55 C9               ret
326+  8E56
327+  8E56
328+  8E56
329+  8E56
330+  8E56
331+  8E56
332+  8E56
333+  8E56
334+  8E56
# file closed: src/levels/levelmanager.asm
 51   8E56              	include 'projectiles.asm'
# file opened: src/projectiles.asm
  1+  8E56
  2+  8E56
  3+  8E56              ;0=wX
  4+  8E56              ;1=wY
  5+  8E56              ;2,3=xx
  6+  8E56              ;4=y
  7+  8E56              ;5=attr2
  8+  8E56              ;6=attr3
  9+  8E56              ;7=slot_ID
 10+  8E56              ;8=vy
 11+  8E56              ;9=y direction
 12+  8E56              ;10=vTimer
 13+  8E56              ;11=x pixel offset (yes this elements need rearranging)
 14+  8E56              ;12=x direction
 15+  8E56              projectiles:
 16+  8E56 51 00            db OUT_OF_WORLD,0
 16+  8E58 00 00          dw 0
 16+  8E5A 00 00 24 14    db 0, %00000000, %00100100, 20,0,UP,0,0,0
 16+  8E5E 00 02 00 00
 16+  8E62 00
 17+  8E63 51 00            db OUT_OF_WORLD,0
 17+  8E65 00 00          dw 0
 17+  8E67 00 00 24 15    db 0, %00000000, %00100100, 21,0,UP,0,0,0
 17+  8E6B 00 02 00 00
 17+  8E6F 00
 18+  8E70 51 00            db OUT_OF_WORLD,0
 18+  8E72 00 00          dw 0
 18+  8E74 00 00 24 16    db 0, %00000000, %00100100, 22,0,UP,0,0,0
 18+  8E78 00 02 00 00
 18+  8E7C 00
 19+  8E7D 51 00            db OUT_OF_WORLD,0
 19+  8E7F 00 00          dw 0
 19+  8E81 00 00 24 16    db 0, %00000000, %00100100, 22,0,UP,0,0,0
 19+  8E85 00 02 00 00
 19+  8E89 00
 20+  8E8A FF               db END_OF_ARRAY
 21+  8E8B              PROJECTILES_DATA_LENGTH equ 13
 22+  8E8B
 23+  8E8B
 24+  8E8B
 25+  8E8B              PROJECTILE_MAX_VELOCITY equ 4
 26+  8E8B              PROJECTILE_MIN_VELOCITY equ 0
 27+  8E8B
 28+  8E8B              PROJECTILE_X_VELOCITY equ 4
 29+  8E8B
 30+  8E8B              PROJECTILE_VELOCITY_DELAY equ 8
 31+  8E8B
 32+  8E8B              PROJECTILE_MAX_DISTANCE equ 127
 33+  8E8B
 34+  8E8B
 35+  8E8B              projectiles_init:
 36+  8E8B
 37+  8E8B C9               ret
 38+  8E8C
 39+  8E8C
 40+  8E8C
 41+  8E8C
 42+  8E8C
 43+  8E8C
 44+  8E8C
 45+  8E8C              projectiles_spawn:
 46+  8E8C DD 21 56 8E      ld ix,projectiles
 47+  8E90              proj_spwn_start:
 48+  8E90 DD 7E 00         ld a,(ix)
 49+  8E93 FE FF            cp END_OF_ARRAY
 50+  8E95 C8               ret z
 51+  8E96
 52+  8E96 DD 7E 06         ld a,(ix+6)
 53+  8E99 CB 7F            bit 7,a
 54+  8E9B C2 C9 8E         jp nz,proj_spwn_next
 55+  8E9E
 56+  8E9E CB FF            set 7,a
 57+  8EA0 DD 77 06         ld (ix+6),a
 58+  8EA3
 59+  8EA3
 60+  8EA3
 61+  8EA3                  ;spawn one here...
 62+  8EA3 3A 93 80         ld a,(player_world_x)
 63+  8EA6 DD 77 00         ld (ix),a
 64+  8EA9
 65+  8EA9 AF               xor a ;py offset
 66+  8EAA DD 77 04         ld (ix+4),a
 67+  8EAD
 68+  8EAD 3A 94 80         ld a,(player_world_y)
 69+  8EB0 DD 77 01         ld (ix+1),a
 70+  8EB3
 71+  8EB3 DD 36 08 04      ld (ix+8),PROJECTILE_MAX_VELOCITY
 72+  8EB7
 73+  8EB7 DD 36 09 02      ld (ix+9),UP
 74+  8EBB
 75+  8EBB AF               xor a
 76+  8EBC DD 77 0A         ld (ix+10),a
 77+  8EBF DD 77 0B         ld (ix+11),a
 78+  8EC2
 79+  8EC2 3A A2 80         ld a,(player_walk_direction)
 80+  8EC5 DD 77 0C         ld (ix+12),a
 81+  8EC8
 82+  8EC8
 83+  8EC8 C9               ret
 84+  8EC9              proj_spwn_next:
 85+  8EC9 11 0D 00         ld de,PROJECTILES_DATA_LENGTH
 86+  8ECC DD 19            add ix,de
 87+  8ECE C3 90 8E         jp proj_spwn_start
 88+  8ED1
 89+  8ED1
 90+  8ED1
 91+  8ED1              projectiles_update:
 92+  8ED1 DD 21 56 8E      ld ix,projectiles
 93+  8ED5              proj_upd_start:
 94+  8ED5 DD 7E 00         ld a,(ix)
 95+  8ED8 FE FF            cp END_OF_ARRAY
 96+  8EDA C8               ret z
 97+  8EDB
 98+  8EDB CD 85 8F         call projectile_update
 99+  8EDE
100+  8EDE              proj_upd_next:
101+  8EDE 11 0D 00         ld de,PROJECTILES_DATA_LENGTH
102+  8EE1 DD 19            add ix,de
103+  8EE3 C3 D5 8E         jp proj_upd_start
104+  8EE6
105+  8EE6
106+  8EE6
107+  8EE6              projectiles_draw:
108+  8EE6 DD 21 56 8E      ld ix,projectiles
109+  8EEA              proj_drw_start:
110+  8EEA DD 7E 00         ld a,(ix)
111+  8EED FE FF            cp END_OF_ARRAY
112+  8EEF C8               ret z
113+  8EF0
114+  8EF0
115+  8EF0 DD 7E 06         ld a,(ix+6)
116+  8EF3 CB 7F            bit 7,a
117+  8EF5 CA FB 8E         jp z,proj_drw_next
118+  8EF8
119+  8EF8 CD 03 8F         call projectile_draw
120+  8EFB
121+  8EFB              proj_drw_next:
122+  8EFB 11 0D 00         ld de,PROJECTILES_DATA_LENGTH
123+  8EFE DD 19            add ix,de
124+  8F00 C3 EA 8E         jp proj_drw_start
125+  8F03
126+  8F03
127+  8F03
128+  8F03
129+  8F03
130+  8F03              projectile_draw:
131+  8F03 DD 7E 07         ld a,(ix+7)
132+  8F06 ED 92 34         nextreg $34,a
133+  8F09
134+  8F09 DD 7E 0C         ld a,(ix+12)
135+  8F0C FE 00            cp LEFT
136+  8F0E CA 5B 8F         jp z,proj_draw_left
137+  8F11
138+  8F11 DD 7E 02         ld a,(ix+2)
139+  8F14 6F               ld l,a
140+  8F15 DD 7E 03         ld a,(ix+3)
141+  8F18 67               ld h,a
142+  8F19 DD 7E 0B         ld a,(ix+11)
143+  8F1C E5               push hl ;save hl to restore further down
144+  8F1D ED 31            add hl,a ;add pixelx offset
145+  8F1F DD 75 02         ld (ix+2),l
146+  8F22 DD 74 03         ld (ix+3),h
147+  8F25              proj_draw:
148+  8F25                  ;attr 0 (x lsb)
149+  8F25 DD 7E 02         ld a,(ix+2)
150+  8F28 ED 92 35         nextreg $35,a
151+  8F2B
152+  8F2B                  ;attr 1 (y)
153+  8F2B DD 7E 09         ld a,(ix+9)
154+  8F2E FE 03            cp DOWN
155+  8F30 CA 73 8F         jp z,proj_draw_down
156+  8F33
157+  8F33 DD 7E 04         ld a,(ix+4)
158+  8F36 47               ld b,a
159+  8F37 DD 7E 01         ld a,(ix+1)
160+  8F3A 87               add a,a
161+  8F3B 87               add a,a
162+  8F3C 87               add a,a
163+  8F3D 87               add a,a
164+  8F3E 90               sub b
165+  8F3F ED 92 36         nextreg $36,a
166+  8F42              proj_drw_attr2:
167+  8F42                  ;attr 2
168+  8F42 DD 7E 05         ld a,(ix+5)
169+  8F45 47               ld b,a
170+  8F46 DD 7E 03         ld a,(ix+3) ;X8 (msb)
171+  8F49 B0               or b
172+  8F4A ED 92 37         nextreg $37,a
173+  8F4D
174+  8F4D                  ;attr 3
175+  8F4D DD 7E 06         ld a,(ix+6)
176+  8F50 ED 92 38         nextreg $38,a
177+  8F53
178+  8F53                  ;draw routine ends here...
179+  8F53 E1               pop hl
180+  8F54 DD 75 02         ld (ix+2),l
181+  8F57 DD 74 03         ld (ix+3),h
182+  8F5A
183+  8F5A C9               ret
184+  8F5B
185+  8F5B              proj_draw_left:
186+  8F5B DD 7E 02         ld a,(ix+2)
187+  8F5E 6F               ld l,a
188+  8F5F DD 7E 03         ld a,(ix+3)
189+  8F62 67               ld h,a
190+  8F63 DD 7E 0B         ld a,(ix+11)
191+  8F66 47               ld b,a
192+  8F67 7D               ld a,l
193+  8F68 90               sub b
194+  8F69
195+  8F69 E5               push hl ;save hl to restore further down
196+  8F6A                  ; neg : add hl,a ;add pixelx offset
197+  8F6A DD 77 02         ld (ix+2),a
198+  8F6D DD 74 03         ld (ix+3),h
199+  8F70
200+  8F70 C3 25 8F         jp proj_draw
201+  8F73              proj_draw_down:
202+  8F73 DD 7E 04         ld a,(ix+4)
203+  8F76 47               ld b,a
204+  8F77 DD 7E 01         ld a,(ix+1)
205+  8F7A 87               add a,a
206+  8F7B 87               add a,a
207+  8F7C 87               add a,a
208+  8F7D 87               add a,a
209+  8F7E 80               add a,b
210+  8F7F ED 92 36         nextreg $36,a
211+  8F82 C3 42 8F         jp proj_drw_attr2
212+  8F85
213+  8F85
214+  8F85
215+  8F85
216+  8F85
217+  8F85              projectile_update:
218+  8F85 CD E1 90         call projectile_check_in_view
219+  8F88 CD 91 90         call projectile_calculate_screen_pos
220+  8F8B
221+  8F8B 3A 52 86         ld a,(frame_counter)
222+  8F8E E6 03            and %00000011
223+  8F90 CC 7A 90         call z,projectile_rotate
224+  8F93
225+  8F93 DD 7E 06         ld a,(ix+6)
226+  8F96 CB 7F            bit 7,a
227+  8F98 C8               ret z
228+  8F99
229+  8F99 CD C9 8F         call proj_move_sideways
230+  8F9C
231+  8F9C DD 7E 0A         ld a,(ix+10)
232+  8F9F 3C               inc a
233+  8FA0 DD 77 0A         ld (ix+10),a
234+  8FA3
235+  8FA3
236+  8FA3 DD 7E 09         ld a,(ix+9)
237+  8FA6 FE 03            cp DOWN
238+  8FA8 CA BA 8F         jp z,p_upd_dwn
239+  8FAB                  ;move projectile up
240+  8FAB DD 7E 04         ld a,(ix+4) ;y pixel offset
241+  8FAE DD 86 08         add a,(ix+8) ;y Vel
242+  8FB1 DD 77 04         ld (ix+4),a
243+  8FB4 FE 10            cp MAX_SCROLL
244+  8FB6 CC 2B 90         call z,proj_up_one
245+  8FB9 C9               ret
246+  8FBA              p_upd_dwn:
247+  8FBA                  ;move projectile down
248+  8FBA DD 7E 04         ld a,(ix+4) ;y scroll
249+  8FBD DD 86 08         add a,(ix+8) ;y Vel
250+  8FC0 DD 77 04         ld (ix+4),a
251+  8FC3 FE 10            cp MAX_SCROLL
252+  8FC5 CC 55 90         call z,proj_down_one
253+  8FC8 C9               ret
254+  8FC9
255+  8FC9
256+  8FC9
257+  8FC9              proj_move_sideways:
258+  8FC9 DD 7E 0C         ld a,(ix+12)
259+  8FCC FE 00            cp LEFT
260+  8FCE F5               push af
261+  8FCF CC D8 8F         call z,proj_move_left
262+  8FD2 F1               pop af
263+  8FD3 C8               ret z
264+  8FD4
265+  8FD4 CD 02 90         call proj_move_right
266+  8FD7 C9               ret
267+  8FD8              proj_move_left:
268+  8FD8
269+  8FD8 DD 7E 0B         ld a,(ix+11)
270+  8FDB DD 86 08         add a,(ix+8)
271+  8FDE DD 77 0B         ld (ix+11),a
272+  8FE1
273+  8FE1 DD 7E 0B         ld a,(ix+11)
274+  8FE4 FE 7F            cp 127
275+  8FE6 D4 85 90         call nc, projectile_kill
276+  8FE9
277+  8FE9
278+  8FE9 DD 7E 02         ld a,(ix+2)
279+  8FEC 6F               ld l,a
280+  8FED DD 7E 03         ld a,(ix+3)
281+  8FF0 67               ld h,a
282+  8FF1 DD 7E 0B         ld a,(ix+11)
283+  8FF4                  SUB_HL_A ;see macros
283+  8FF4 ED 44       >	neg
283+  8FF6 ED 31       >  add hl,a
284+  8FF8
285+  8FF8 7C               ld a,h
286+  8FF9 CB 47            bit 0,a
287+  8FFB C0               ret nz
288+  8FFC
289+  8FFC 7D               ld a,l
290+  8FFD B7               or a
291+  8FFE FC 85 90         call m, projectile_kill
292+  9001                  ;TODO: study M flag
293+  9001
294+  9001 C9               ret
295+  9002
296+  9002              proj_move_right:
297+  9002 DD 7E 0B         ld a,(ix+11)
298+  9005 DD 86 08         add a,(ix+8)
299+  9008 DD 77 0B         ld (ix+11),a
300+  900B
301+  900B DD 7E 0B         ld a,(ix+11)
302+  900E FE 7F            cp 127
303+  9010 D4 85 90         call nc, projectile_kill
304+  9013
305+  9013 DD 7E 02         ld a,(ix+2)
306+  9016 6F               ld l,a
307+  9017 DD 7E 03         ld a,(ix+3)
308+  901A 67               ld h,a
309+  901B DD 7E 0B         ld a,(ix+11)
310+  901E ED 31            add hl,a
311+  9020
312+  9020 7C               ld a,h
313+  9021 CB 47            bit 0,a
314+  9023 C8               ret z
315+  9024
316+  9024 7D               ld a,l
317+  9025 FE 40            cp LOW 320
318+  9027 D4 85 90         call nc, projectile_kill
319+  902A
320+  902A
321+  902A C9               ret
322+  902B
323+  902B
324+  902B
325+  902B
326+  902B
327+  902B              proj_up_one:
328+  902B DD 7E 01         ld a,(ix+1)
329+  902E 3D               dec a
330+  902F DD 77 01         ld (ix+1),a
331+  9032 DD 36 04 00      ld (ix+4),0
332+  9036 FE 00            cp 0
333+  9038 CC 85 90         call z,projectile_kill ;kill it if top of screen
334+  903B
335+  903B DD 7E 0A         ld a,(ix+10)
336+  903E FE 08            cp PROJECTILE_VELOCITY_DELAY
337+  9040 D8               ret c
338+  9041
339+  9041 DD 7E 08         ld a,(ix+8)
340+  9044 E6 FE            and %11111110
341+  9046 0F               rrca
342+  9047 DD 77 08         ld (ix+8),a
343+  904A FE 00            cp 0
344+  904C DD 36 09 03      ld (ix+9),DOWN
345+  9050
346+  9050 AF               xor a
347+  9051 DD 77 0A         ld (ix+10),a
348+  9054
349+  9054 C9               ret
350+  9055
351+  9055              proj_down_one:
352+  9055 DD 7E 01         ld a,(ix+1)
353+  9058 3C               inc a
354+  9059 DD 77 01         ld (ix+1),a
355+  905C DD 36 04 00      ld (ix+4),0
356+  9060 FE 0F            cp 15
357+  9062 CC 85 90         call z,projectile_kill ;kill it if top of screen
358+  9065
359+  9065 DD 7E 0A         ld a,(ix+10)
360+  9068 FE 08            cp PROJECTILE_VELOCITY_DELAY
361+  906A D8               ret c
362+  906B
363+  906B DD 7E 08         ld a,(ix+8)
364+  906E FE 04            cp PROJECTILE_MAX_VELOCITY
365+  9070 C8               ret z
366+  9071 87               add a,a
367+  9072 DD 77 08         ld (ix+8),a
368+  9075
369+  9075 AF               xor a
370+  9076 DD 77 0A         ld (ix+10),a
371+  9079
372+  9079
373+  9079 C9               ret
374+  907A
375+  907A
376+  907A
377+  907A
378+  907A
379+  907A
380+  907A
381+  907A
382+  907A
383+  907A
384+  907A
385+  907A              projectile_rotate:
386+  907A DD 7E 05         ld a,(ix+5)
387+  907D C6 02            add a,2
388+  907F E6 0E            and %00001110
389+  9081 DD 77 05         ld (ix+5),a
390+  9084 C9               ret
391+  9085
392+  9085
393+  9085
394+  9085              projectile_kill:
395+  9085 DD CB 06 BE      res 7,(ix+6)
396+  9089 CD 03 8F         call projectile_draw
397+  908C
398+  908C DD 36 00 51      ld (ix),OUT_OF_WORLD
399+  9090
400+  9090
401+  9090 C9               ret
402+  9091
403+  9091
404+  9091
405+  9091              projectile_calculate_screen_pos:
406+  9091 3A 75 8C         ld a,(scroll_direction)
407+  9094 FE 00            cp LEFT
408+  9096 CA 9F 90         jp z,proj_screen_moving_left
409+  9099 FE 01            cp RIGHT
410+  909B CA C0 90         jp z,proj_screen_moving_right
411+  909E
412+  909E C9               ret
413+  909F
414+  909F
415+  909F              proj_screen_moving_left:
416+  909F                  ;X (scroll left)
417+  909F 3A 76 8C         ld a,(cam_x)
418+  90A2 47               ld b,a
419+  90A3 DD 7E 00         ld a,(ix+0) ;wX
420+  90A6 90               sub b ;wX-camX
421+  90A7 21 00 00         ld hl,0
422+  90AA ED 31            add hl,a
423+  90AC 29               add hl,hl
424+  90AD 29               add hl,hl
425+  90AE 29               add hl,hl
426+  90AF 29               add hl,hl
427+  90B0 3A 74 8C         ld a,(current_scroll)
428+  90B3 47               ld b,a
429+  90B4 3E 10            ld a,16
430+  90B6 90               sub b
431+  90B7 ED 31            add hl,a
432+  90B9 DD 75 02         ld (ix+2),l
433+  90BC DD 74 03         ld (ix+3),h ;X8
434+  90BF C9               ret
435+  90C0
436+  90C0              proj_screen_moving_right:
437+  90C0                  ;X (scroll left)
438+  90C0 3A 76 8C         ld a,(cam_x)
439+  90C3 47               ld b,a
440+  90C4 DD 7E 00         ld a,(ix) ;wX
441+  90C7 90               sub b ;wX-camX
442+  90C8 21 00 00         ld hl,0
443+  90CB ED 31            add hl,a
444+  90CD 29               add hl,hl
445+  90CE 29               add hl,hl
446+  90CF 29               add hl,hl
447+  90D0 29               add hl,hl
448+  90D1 3A 74 8C         ld a,(current_scroll)
449+  90D4 47               ld b,a
450+  90D5 3E 10            ld a,16
451+  90D7 90               sub b
452+  90D8 ED 31            add hl,a
453+  90DA DD 75 02         ld (ix+2),l
454+  90DD DD 74 03         ld (ix+3),h ;X8
455+  90E0
456+  90E0 C9               ret
457+  90E1
458+  90E1
459+  90E1
460+  90E1              projectile_check_in_view:
461+  90E1 DD 7E 00         ld a,(ix)
462+  90E4 47               ld b,a
463+  90E5 3A 76 8C         ld a,(cam_x)
464+  90E8 C6 14            add a,VIEW_WIDTH_META
465+  90EA B8               cp b
466+  90EB DA FE 90         jp c, proj_set_not_inview
467+  90EE
468+  90EE 3A 76 8C         ld a,(cam_x)
469+  90F1 47               ld b,a
470+  90F2 DD 7E 00         ld a,(ix)
471+  90F5 B8               cp b
472+  90F6 DA FE 90         jp c, proj_set_not_inview
473+  90F9
474+  90F9
475+  90F9                  ; set to inview=yes
476+  90F9 DD CB 06 FE      set 7,(ix+6)
477+  90FD
478+  90FD C9               ret
479+  90FE
480+  90FE              proj_set_not_inview:
481+  90FE DD 36 00 51      ld (ix),OUT_OF_WORLD
482+  9102 DD CB 06 7E      bit 7,(ix+6)
483+  9106 C8               ret z
484+  9107
485+  9107 DD CB 06 BE      res 7,(ix+6)
486+  910B CD 03 8F         call projectile_draw
487+  910E
488+  910E
489+  910E C9               ret
490+  910F
# file closed: src/projectiles.asm
 52   910F
 53   910F              	include 'loadbins.asm'
# file opened: src/loadbins.asm
  1+  910F
  2+  910F
  3+  910F              ;;;;;Tiles
  4+  910F
  5+  910F
  6+  910F
  7+  910F
  8+  910F
  9+  910F              caveman_palette:
 10+  910F                  incbin 'assets/cavetiles2.nxp',0
 11+  912B
 12+  912B                  MMU 6,16
 13+  912B                  org $c000
 14+  C000
 15+  C000                  incbin 'assets/cavetiles2.til',0,TILE_DEFINITIONS_SIZE
 16+  D000
 17+  D000
 18+  D000              ; 	;courtesy of ped7g:
 19+  D000              ;     ; patch tile gfx with grid gfx
 20+  D000              ; tileN=1
 21+  D000              ;     DUP 128-tileN
 22+  D000              ;         ORG $C000 + tileN*32
 23+  D000              ;         DB $FF
 24+  D000              ;         DB {b $ } | $F0
 25+  D000              ;         ORG $C000 + tileN*32 + 1*4
 26+  D000              ;         DB {b $ } | $F0
 27+  D000              ;         ORG $C000 + tileN*32 + 2*4
 28+  D000              ;         DB {b $ } | $F0
 29+  D000              ;         ORG $C000 + tileN*32 + 6*4 + 3
 30+  D000              ;         DB {b $ } | $0F
 31+  D000              ;         ORG $C000 + tileN*32 + 7*4 + 3
 32+  D000              ;         DB $FF
 33+  D000              ; tileN=tileN+1
 34+  D000              ;     EDUP
 35+  D000
 36+  D000
 37+  D000
 38+  D000              ;;
 39+  D000              ;;Caveman Walk Animation:
 40+  D000              ; A>B>C>D>A>B>C>D
 41+  D000
 42+  D000              ;;;sprites
 43+  D000              ;WBOY SPRITES:
 44+  D000              ;Idle = A,B
 45+  D000              ;Walk = C,D,E,F
 46+  D000
 47+  D000
 48+  D000              ;size (in patterns) for the head and body parts
 49+  D000              WBOY_HEAD_SIZE equ 2
 50+  D000              WBOY_BODY_SIZE equ 2
 51+  D000
 52+  D000              ;animation 'first A' values:
 53+  D000              WBOY_FIRST_IDLE equ 2
 54+  D000              WBOY_FIRST_WALK equ 6
 55+  D000              WBOY_FIRST_JUMP equ 12 ;the jump animation is just one frame, and is same as walk4
 56+  D000
 57+  D000              ;animation 'fiNAL A' values:
 58+  D000              WBOY_FINAL_IDLE equ 4
 59+  D000              WBOY_FINAL_WALK equ 12
 60+  D000
 61+  D000              ;animation start patterns...
 62+  D000              WBOY_ANIMATION_IDLE equ 2
 63+  D000              WBOY_ANIMATION_RUN equ 6
 64+  D000
 65+  D000              WBOY_PATTERN_COUNT equ 14
 66+  D000
 67+  D000
 68+  D000                  MMU 6,14
 69+  D000                  org $c000
 70+  C000
 71+  C000
 72+  C000              wBoy_Head1: ;0
 73+  C000 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $D5, $FC, $E3, $E3, $E3, $FC, $FC, $FC;
 73+  C004 E3 E3 E3 E3
 73+  C008 D5 FC E3 E3
 73+  C00C E3 FC FC FC
 74+  C010 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $FC, $FC, $FC, $D5, $AD, $FC, $FC, $FC, $FC, $FC;
 74+  C014 E3 E3 FC FC
 74+  C018 FC D5 AD FC
 74+  C01C FC FC FC FC
 75+  C020 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $D5, $AD, $FC, $FC, $D5, $FC, $FC, $FC;
 75+  C024 E3 E3 E3 E3
 75+  C028 D5 AD FC FC
 75+  C02C D5 FC FC FC
 76+  C030 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $FC, $FC, $FC, $FC, $D5, $FC, $D5, $D5, $FC;
 76+  C034 E3 E3 E3 FC
 76+  C038 FC FC FC D5
 76+  C03C FC D5 D5 FC
 77+  C040 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $D5, $FC, $FC;
 77+  C044 E3 E3 E3 E3
 77+  C048 E3 20 D5 D5
 77+  C04C D5 D5 FC FC
 78+  C050 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $D5, $FC, $FC;
 78+  C054 E3 E3 E3 E3
 78+  C058 E3 20 D5 D5
 78+  C05C D5 D5 FC FC
 79+  C060 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $D5, $FC, $FC, $FC;
 79+  C064 E3 E3 E3 E3
 79+  C068 20 D5 D5 D5
 79+  C06C D5 FC FC FC
 80+  C070 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $D5, $FC, $FC, $AC, $FC;
 80+  C074 E3 E3 E3 E3
 80+  C078 20 D5 D5 D5
 80+  C07C FC FC AC FC
 81+  C080 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $FC, $FC, $FC, $AD, $FC;
 81+  C084 E3 E3 E3 E3
 81+  C088 20 D5 D5 FC
 81+  C08C FC FC AD FC
 82+  C090 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $FC, $FC, $FC, $AD, $AD;
 82+  C094 E3 E3 E3 E3
 82+  C098 20 D5 D5 FC
 82+  C09C FC FC AD AD
 83+  C0A0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $F6, $AD, $FC, $AD, $AD;
 83+  C0A4 E3 E3 E3 E3
 83+  C0A8 20 D5 D5 F6
 83+  C0AC AD FC AD AD
 84+  C0B0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $F6, $AD, $FC, $AD, $F6;
 84+  C0B4 E3 E3 E3 E3
 84+  C0B8 20 D5 D5 F6
 84+  C0BC AD FC AD F6
 85+  C0C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $FC, $AC, $AD, $AD;
 85+  C0C4 E3 E3 E3 E3
 85+  C0C8 E3 20 D5 D5
 85+  C0CC FC AC AD AD
 86+  C0D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $FC, $FC, $AC, $AD;
 86+  C0D4 E3 E3 E3 E3
 86+  C0D8 E3 20 D5 D5
 86+  C0DC FC FC AC AD
 87+  C0E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $FC, $FC, $AC, $AD;
 87+  C0E4 E3 E3 E3 E3
 87+  C0E8 E3 20 D5 D5
 87+  C0EC FC FC AC AD
 88+  C0F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $D5, $D5, $FC, $FC, $AC;
 88+  C0F4 E3 E3 E3 E3
 88+  C0F8 E3 E3 20 D5
 88+  C0FC D5 FC FC AC
 89+  C100
 90+  C100
 91+  C100
 92+  C100              wBoy_Head2: ;1
 93+  C100 FC FC E3 E3  	db  $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 93+  C104 E3 E3 E3 E3
 93+  C108 E3 E3 E3 E3
 93+  C10C E3 E3 E3 E3
 94+  C110 FF FF FC FC  	db  $FF, $FF, $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 94+  C114 E3 E3 E3 E3
 94+  C118 E3 E3 E3 E3
 94+  C11C E3 E3 E3 E3
 95+  C120 FC FC FF FF  	db  $FC, $FC, $FF, $FF, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 95+  C124 FC E3 E3 E3
 95+  C128 E3 E3 E3 E3
 95+  C12C E3 E3 E3 E3
 96+  C130 FC FC FC FF  	db  $FC, $FC, $FC, $FF, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 96+  C134 FC E3 E3 E3
 96+  C138 E3 E3 E3 E3
 96+  C13C E3 E3 E3 E3
 97+  C140 FC FC FC FC  	db  $FC, $FC, $FC, $FC, $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 97+  C144 FC FC E3 E3
 97+  C148 E3 E3 E3 E3
 97+  C14C E3 E3 E3 E3
 98+  C150 FF FC FC FC  	db  $FF, $FC, $FC, $FC, $FF, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 98+  C154 FF FC E3 E3
 98+  C158 E3 E3 E3 E3
 98+  C15C E3 E3 E3 E3
 99+  C160 FF AC FC FC  	db  $FF, $AC, $FC, $FC, $AC, $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
 99+  C164 AC FC FC E3
 99+  C168 E3 E3 E3 E3
 99+  C16C E3 E3 E3 E3
100+  C170 FC AD FC AD  	db  $FC, $AD, $FC, $AD, $AD, $FC, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
100+  C174 AD FC FC E3
100+  C178 E3 E3 E3 E3
100+  C17C E3 E3 E3 E3
101+  C180 AD AD F6 F6  	db  $AD, $AD, $F6, $F6, $F6, $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
101+  C184 F6 AD FC E3
101+  C188 E3 E3 E3 E3
101+  C18C E3 E3 E3 E3
102+  C190 F6 FF FF F6  	db  $F6, $FF, $FF, $F6, $FF, $F6, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
102+  C194 FF F6 FC E3
102+  C198 E3 E3 E3 E3
102+  C19C E3 E3 E3 E3
103+  C1A0 FF FF 20 F6  	db  $FF, $FF, $20, $F6, $20, $FF, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
103+  C1A4 20 FF FC E3
103+  C1A8 E3 E3 E3 E3
103+  C1AC E3 E3 E3 E3
104+  C1B0 FF FF 20 F6  	db  $FF, $FF, $20, $F6, $20, $FF, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
104+  C1B4 20 FF FC E3
104+  C1B8 E3 E3 E3 E3
104+  C1BC E3 E3 E3 E3
105+  C1C0 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $F6, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
105+  C1C4 F6 F6 FC E3
105+  C1C8 E3 E3 E3 E3
105+  C1CC E3 E3 E3 E3
106+  C1D0 F6 F6 F6 FF  	db  $F6, $F6, $F6, $FF, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
106+  C1D4 F6 F6 E3 E3
106+  C1D8 E3 E3 E3 E3
106+  C1DC E3 E3 E3 E3
107+  C1E0 F6 F6 F6 E1  	db  $F6, $F6, $F6, $E1, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
107+  C1E4 F6 F6 E3 E3
107+  C1E8 E3 E3 E3 E3
107+  C1EC E3 E3 E3 E3
108+  C1F0 AD F6 F6 F6  	db  $AD, $F6, $F6, $F6, $F6, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
108+  C1F4 F6 FC E3 E3
108+  C1F8 E3 E3 E3 E3
108+  C1FC E3 E3 E3 E3
109+  C200
110+  C200
111+  C200              ;bodies:
112+  C200
113+  C200              ;IDLE ANIMATION: 1,2
114+  C200              idle1_A: ;2
115+  C200 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6;
115+  C204 E3 E3 E3 E3
115+  C208 E3 E3 E3 20
115+  C20C F6 F6 F6 F6
116+  C210 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $AD, $AD;
116+  C214 E3 E3 E3 E3
116+  C218 E3 E3 20 F6
116+  C21C F6 F6 AD AD
117+  C220 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $AC, $F6, $F6;
117+  C224 E3 E3 E3 E3
117+  C228 E3 20 F6 F6
117+  C22C F6 AC F6 F6
118+  C230 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $F6;
118+  C234 E3 E3 E3 E3
118+  C238 E3 20 F6 F6
118+  C23C F6 F6 F6 F6
119+  C240 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $AD;
119+  C244 E3 E3 E3 E3
119+  C248 E3 20 F6 F6
119+  C24C F6 F6 F6 AD
120+  C250 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $AD, $F6;
120+  C254 E3 E3 E3 E3
120+  C258 E3 E3 20 F6
120+  C25C F6 F6 AD F6
121+  C260 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $AD, $AD, $F6;
121+  C264 E3 E3 E3 E3
121+  C268 E3 E3 E3 20
121+  C26C 10 AD AD F6
122+  C270 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $AD, $AD, $F6;
122+  C274 E3 E3 E3 E3
122+  C278 E3 E3 20 10
122+  C27C 10 AD AD F6
123+  C280 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $AD, $AD, $F6;
123+  C284 E3 E3 E3 E3
123+  C288 E3 E3 20 10
123+  C28C 10 AD AD F6
124+  C290 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $20, $20, $AD, $AD;
124+  C294 E3 E3 E3 E3
124+  C298 E3 20 10 10
124+  C29C 20 20 AD AD
125+  C2A0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $E3, $E3, $20, $20;
125+  C2A4 E3 E3 E3 E3
125+  C2A8 E3 E3 20 20
125+  C2AC E3 E3 20 20
126+  C2B0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20;
126+  C2B4 E3 E3 E3 E3
126+  C2B8 E3 E3 E3 E3
126+  C2BC E3 E3 E3 20
127+  C2C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20;
127+  C2C4 E3 E3 E3 E3
127+  C2C8 E3 E3 E3 E3
127+  C2CC E3 E3 E3 20
128+  C2D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20;
128+  C2D4 E3 E3 E3 E3
128+  C2D8 E3 E3 E3 E3
128+  C2DC E3 E3 E3 20
129+  C2E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
129+  C2E4 E3 E3 E3 E3
129+  C2E8 E3 E3 E3 E3
129+  C2EC E3 E3 E3 E3
130+  C2F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
130+  C2F4 E3 E3 E3 E3
130+  C2F8 E3 E3 E3 E3
130+  C2FC E3 E3 E3 E3
131+  C300              idle1_B: ;3
132+  C300 AC AD AD AD  	db  $AC, $AD, $AD, $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
132+  C304 FC E3 E3 E3
132+  C308 E3 E3 E3 E3
132+  C30C E3 E3 E3 E3
133+  C310 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
133+  C314 F6 E3 E3 E3
133+  C318 E3 E3 E3 E3
133+  C31C E3 E3 E3 E3
134+  C320 AD F6 F6 F6  	db  $AD, $F6, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
134+  C324 F6 AD F6 E3
134+  C328 E3 E3 E3 E3
134+  C32C E3 E3 E3 E3
135+  C330 AD AD F6 F6  	db  $AD, $AD, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
135+  C334 F6 AD F6 E3
135+  C338 E3 E3 E3 E3
135+  C33C E3 E3 E3 E3
136+  C340 F6 F6 AD F6  	db  $F6, $F6, $AD, $F6, $F6, $AC, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
136+  C344 F6 AC F6 E3
136+  C348 E3 E3 E3 E3
136+  C34C E3 E3 E3 E3
137+  C350 F6 F6 AD F6  	db  $F6, $F6, $AD, $F6, $AD, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
137+  C354 AD E3 E3 E3
137+  C358 E3 E3 E3 E3
137+  C35C E3 E3 E3 E3
138+  C360 F6 F6 10 10  	db  $F6, $F6, $10, $10, $10, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
138+  C364 10 E3 E3 E3
138+  C368 E3 E3 E3 E3
138+  C36C E3 E3 E3 E3
139+  C370 F6 F6 10 10  	db  $F6, $F6, $10, $10, $10, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
139+  C374 10 E3 E3 E3
139+  C378 E3 E3 E3 E3
139+  C37C E3 E3 E3 E3
140+  C380 F6 F6 F6 10  	db  $F6, $F6, $F6, $10, $10, $10, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
140+  C384 10 10 E3 E3
140+  C388 E3 E3 E3 E3
140+  C38C E3 E3 E3 E3
141+  C390 F6 F6 F6 AD  	db  $F6, $F6, $F6, $AD, $20, $10, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
141+  C394 20 10 E3 E3
141+  C398 E3 E3 E3 E3
141+  C39C E3 E3 E3 E3
142+  C3A0 AC AC AD F6  	db  $AC, $AC, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
142+  C3A4 E3 E3 E3 E3
142+  C3A8 E3 E3 E3 E3
142+  C3AC E3 E3 E3 E3
143+  C3B0 AD AD F6 F6  	db  $AD, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
143+  C3B4 E3 E3 E3 E3
143+  C3B8 E3 E3 E3 E3
143+  C3BC E3 E3 E3 E3
144+  C3C0 AD AD F6 F6  	db  $AD, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
144+  C3C4 E3 E3 E3 E3
144+  C3C8 E3 E3 E3 E3
144+  C3CC E3 E3 E3 E3
145+  C3D0 AD AD F6 F6  	db  $AD, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
145+  C3D4 F6 E3 E3 E3
145+  C3D8 E3 E3 E3 E3
145+  C3DC E3 E3 E3 E3
146+  C3E0 20 AD AD F6  	db  $20, $AD, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
146+  C3E4 F6 E3 E3 E3
146+  C3E8 E3 E3 E3 E3
146+  C3EC E3 E3 E3 E3
147+  C3F0 E3 20 20 20  	db  $E3, $20, $20, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
147+  C3F4 E3 E3 E3 E3
147+  C3F8 E3 E3 E3 E3
147+  C3FC E3 E3 E3 E3
148+  C400
149+  C400              idle2_A: ;4
150+  C400 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6;
150+  C404 E3 E3 E3 E3
150+  C408 E3 E3 E3 20
150+  C40C F6 F6 F6 F6
151+  C410 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $AD, $AD;
151+  C414 E3 E3 E3 E3
151+  C418 E3 E3 20 F6
151+  C41C F6 F6 AD AD
152+  C420 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $AC, $F6, $F6;
152+  C424 E3 E3 E3 E3
152+  C428 E3 20 F6 F6
152+  C42C F6 AC F6 F6
153+  C430 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $F6;
153+  C434 E3 E3 E3 E3
153+  C438 E3 20 F6 F6
153+  C43C F6 F6 F6 F6
154+  C440 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $F6;
154+  C444 E3 E3 E3 E3
154+  C448 E3 20 F6 F6
154+  C44C F6 F6 F6 F6
155+  C450 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6;
155+  C454 E3 E3 E3 E3
155+  C458 E3 E3 20 F6
155+  C45C F6 F6 F6 F6
156+  C460 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $14, $14, $14;
156+  C464 E3 E3 E3 E3
156+  C468 E3 E3 E3 20
156+  C46C 10 14 14 14
157+  C470 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $14, $14;
157+  C474 E3 E3 E3 E3
157+  C478 E3 E3 20 10
157+  C47C 10 10 14 14
158+  C480 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $AD, $F6, $14;
158+  C484 E3 E3 E3 E3
158+  C488 E3 20 10 10
158+  C48C 10 AD F6 14
159+  C490 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $AD, $F6, $F6, $F6;
159+  C494 E3 E3 E3 E3
159+  C498 E3 E3 20 10
159+  C49C AD F6 F6 F6
160+  C4A0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $F6;
160+  C4A4 E3 E3 E3 E3
160+  C4A8 E3 E3 E3 20
160+  C4AC AD F6 F6 F6
161+  C4B0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $F6;
161+  C4B4 E3 E3 E3 E3
161+  C4B8 E3 E3 E3 20
161+  C4BC AD F6 F6 F6
162+  C4C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $F6;
162+  C4C4 E3 E3 E3 E3
162+  C4C8 E3 E3 E3 20
162+  C4CC AD F6 F6 F6
163+  C4D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6, $F6;
163+  C4D4 E3 E3 E3 E3
163+  C4D8 E3 E3 E3 20
163+  C4DC AD AD F6 F6
164+  C4E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6;
164+  C4E4 E3 E3 E3 E3
164+  C4E8 E3 E3 E3 E3
164+  C4EC 20 AD AD F6
165+  C4F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20;
165+  C4F4 E3 E3 E3 E3
165+  C4F8 E3 E3 E3 E3
165+  C4FC E3 20 20 20
166+  C500              idle2_B: ;5
167+  C500 AC AD AD AD  	db  $AC, $AD, $AD, $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
167+  C504 FC E3 E3 E3
167+  C508 E3 E3 E3 E3
167+  C50C E3 E3 E3 E3
168+  C510 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
168+  C514 F6 E3 E3 E3
168+  C518 E3 E3 E3 E3
168+  C51C E3 E3 E3 E3
169+  C520 AD F6 F6 F6  	db  $AD, $F6, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
169+  C524 F6 AD F6 E3
169+  C528 E3 E3 E3 E3
169+  C52C E3 E3 E3 E3
170+  C530 F6 AD F6 F6  	db  $F6, $AD, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
170+  C534 F6 AD F6 E3
170+  C538 E3 E3 E3 E3
170+  C53C E3 E3 E3 E3
171+  C540 F6 AD F6 F6  	db  $F6, $AD, $F6, $F6, $AD, $AC, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
171+  C544 AD AC F6 E3
171+  C548 E3 E3 E3 E3
171+  C54C E3 E3 E3 E3
172+  C550 AD F6 F6 AD  	db  $AD, $F6, $F6, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
172+  C554 F6 F6 E3 E3
172+  C558 E3 E3 E3 E3
172+  C55C E3 E3 E3 E3
173+  C560 AC AD AD AD  	db  $AC, $AD, $AD, $AD, $F6, $F6, $10, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
173+  C564 F6 F6 10 E3
173+  C568 E3 E3 E3 E3
173+  C56C E3 E3 E3 E3
174+  C570 10 10 AD AD  	db  $10, $10, $AD, $AD, $F6, $F6, $10, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
174+  C574 F6 F6 10 E3
174+  C578 E3 E3 E3 E3
174+  C57C E3 E3 E3 E3
175+  C580 14 10 AD AD  	db  $14, $10, $AD, $AD, $F6, $F6, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
175+  C584 F6 F6 20 E3
175+  C588 E3 E3 E3 E3
175+  C58C E3 E3 E3 E3
176+  C590 14 14 AD AD  	db  $14, $14, $AD, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
176+  C594 F6 F6 F6 E3
176+  C598 E3 E3 E3 E3
176+  C59C E3 E3 E3 E3
177+  C5A0 20 14 20 AD  	db  $20, $14, $20, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
177+  C5A4 F6 F6 F6 E3
177+  C5A8 E3 E3 E3 E3
177+  C5AC E3 E3 E3 E3
178+  C5B0 E3 20 E3 20  	db  $E3, $20, $E3, $20, $20, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
178+  C5B4 20 20 E3 E3
178+  C5B8 E3 E3 E3 E3
178+  C5BC E3 E3 E3 E3
179+  C5C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
179+  C5C4 E3 E3 E3 E3
179+  C5C8 E3 E3 E3 E3
179+  C5CC E3 E3 E3 E3
180+  C5D0 F6 E3 E3 E3  	db  $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
180+  C5D4 E3 E3 E3 E3
180+  C5D8 E3 E3 E3 E3
180+  C5DC E3 E3 E3 E3
181+  C5E0 F6 E3 E3 E3  	db  $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
181+  C5E4 E3 E3 E3 E3
181+  C5E8 E3 E3 E3 E3
181+  C5EC E3 E3 E3 E3
182+  C5F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
182+  C5F4 E3 E3 E3 E3
182+  C5F8 E3 E3 E3 E3
182+  C5FC E3 E3 E3 E3
183+  C600
184+  C600
185+  C600
186+  C600
187+  C600              ;WALK ANIMATION 1,2,3,4
188+  C600              walk1_a: ;6
189+  C600 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $AC;
189+  C604 E3 E3 E3 E3
189+  C608 E3 E3 20 F6
189+  C60C F6 F6 F6 AC
190+  C610 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $F6;
190+  C614 E3 E3 E3 E3
190+  C618 E3 20 F6 F6
190+  C61C F6 F6 F6 F6
191+  C620 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $AD, $F6, $F6;
191+  C624 E3 E3 E3 E3
191+  C628 20 F6 F6 F6
191+  C62C F6 AD F6 F6
192+  C630 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $AC, $AD, $F6;
192+  C634 E3 E3 E3 E3
192+  C638 20 F6 F6 F6
192+  C63C F6 AC AD F6
193+  C640 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $F6, $AC;
193+  C644 E3 E3 E3 E3
193+  C648 20 F6 F6 F6
193+  C64C F6 F6 F6 AC
194+  C650 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $F6;
194+  C654 E3 E3 E3 E3
194+  C658 E3 20 F6 F6
194+  C65C F6 F6 F6 F6
195+  C660 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $F6, $F6, $AD, $AD;
195+  C664 E3 E3 E3 E3
195+  C668 E3 E3 20 20
195+  C66C F6 F6 AD AD
196+  C670 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $F6, $F6;
196+  C674 E3 E3 E3 E3
196+  C678 E3 E3 20 10
196+  C67C 10 10 F6 F6
197+  C680 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $AC, $F6, $F6, $F6;
197+  C684 E3 E3 E3 E3
197+  C688 E3 20 10 10
197+  C68C AC F6 F6 F6
198+  C690 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $AD, $AD, $F6, $F6;
198+  C694 E3 E3 E3 E3
198+  C698 20 10 10 10
198+  C69C AD AD F6 F6
199+  C6A0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20, $AD, $AD, $F6, $F6;
199+  C6A4 E3 E3 E3 E3
199+  C6A8 E3 20 20 20
199+  C6AC AD AD F6 F6
200+  C6B0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6;
200+  C6B4 E3 E3 E3 E3
200+  C6B8 E3 E3 E3 E3
200+  C6BC 20 AD F6 F6
201+  C6C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6;
201+  C6C4 E3 E3 E3 E3
201+  C6C8 E3 E3 E3 E3
201+  C6CC 20 AD AD F6
202+  C6D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6;
202+  C6D4 E3 E3 E3 E3
202+  C6D8 E3 E3 E3 E3
202+  C6DC 20 AD AD F6
203+  C6E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD;
203+  C6E4 E3 E3 E3 E3
203+  C6E8 E3 E3 E3 E3
203+  C6EC E3 20 AD AD
204+  C6F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20;
204+  C6F4 E3 E3 E3 E3
204+  C6F8 E3 E3 E3 E3
204+  C6FC E3 E3 20 20
205+  C700              walk1_b: ;7
206+  C700 AD AD AD FC  	db  $AD, $AD, $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
206+  C704 E3 E3 E3 E3
206+  C708 E3 E3 E3 E3
206+  C70C E3 E3 E3 E3
207+  C710 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
207+  C714 E3 E3 E3 E3
207+  C718 E3 E3 E3 E3
207+  C71C E3 E3 E3 E3
208+  C720 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
208+  C724 F6 E3 E3 E3
208+  C728 E3 E3 E3 E3
208+  C72C E3 E3 E3 E3
209+  C730 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
209+  C734 AD F6 E3 E3
209+  C738 E3 E3 E3 E3
209+  C73C E3 E3 E3 E3
210+  C740 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
210+  C744 AD F6 E3 E3
210+  C748 E3 E3 E3 E3
210+  C74C E3 E3 E3 E3
211+  C750 AC AD AD F6  	db  $AC, $AD, $AD, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
211+  C754 AD F6 E3 E3
211+  C758 E3 E3 E3 E3
211+  C75C E3 E3 E3 E3
212+  C760 10 14 14 14  	db  $10, $14, $14, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
212+  C764 E3 E3 E3 E3
212+  C768 E3 E3 E3 E3
212+  C76C E3 E3 E3 E3
213+  C770 10 14 14 10  	db  $10, $14, $14, $10, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
213+  C774 14 E3 E3 E3
213+  C778 E3 E3 E3 E3
213+  C77C E3 E3 E3 E3
214+  C780 F6 10 14 10  	db  $F6, $10, $14, $10, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
214+  C784 14 E3 E3 E3
214+  C788 E3 E3 E3 E3
214+  C78C E3 E3 E3 E3
215+  C790 F6 20 AD 14  	db  $F6, $20, $AD, $14, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
215+  C794 14 E3 E3 E3
215+  C798 E3 E3 E3 E3
215+  C79C E3 E3 E3 E3
216+  C7A0 F6 AC AD F6  	db  $F6, $AC, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
216+  C7A4 E3 E3 E3 E3
216+  C7A8 E3 E3 E3 E3
216+  C7AC E3 E3 E3 E3
217+  C7B0 F6 AC F6 E3  	db  $F6, $AC, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
217+  C7B4 E3 E3 E3 E3
217+  C7B8 E3 E3 E3 E3
217+  C7BC E3 E3 E3 E3
218+  C7C0 F6 E3 E3 E3  	db  $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
218+  C7C4 E3 E3 E3 E3
218+  C7C8 E3 E3 E3 E3
218+  C7CC E3 E3 E3 E3
219+  C7D0 F6 F6 E3 E3  	db  $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
219+  C7D4 E3 E3 E3 E3
219+  C7D8 E3 E3 E3 E3
219+  C7DC E3 E3 E3 E3
220+  C7E0 F6 F6 E3 E3  	db  $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
220+  C7E4 E3 E3 E3 E3
220+  C7E8 E3 E3 E3 E3
220+  C7EC E3 E3 E3 E3
221+  C7F0 20 E3 E3 E3  	db  $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
221+  C7F4 E3 E3 E3 E3
221+  C7F8 E3 E3 E3 E3
221+  C7FC E3 E3 E3 E3
222+  C800
223+  C800
224+  C800
225+  C800              walk2_a: ;8
226+  C800 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6;
226+  C804 E3 E3 E3 E3
226+  C808 E3 E3 E3 E3
226+  C80C 20 F6 F6 F6
227+  C810 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6;
227+  C814 E3 E3 E3 E3
227+  C818 E3 E3 E3 20
227+  C81C F6 F6 F6 F6
228+  C820 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $AD;
228+  C824 E3 E3 E3 E3
228+  C828 E3 E3 20 F6
228+  C82C F6 F6 F6 AD
229+  C830 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $AC;
229+  C834 E3 E3 E3 E3
229+  C838 E3 E3 20 F6
229+  C83C F6 F6 F6 AC
230+  C840 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6;
230+  C844 E3 E3 E3 E3
230+  C848 E3 E3 20 F6
230+  C84C F6 F6 F6 F6
231+  C850 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6;
231+  C854 E3 E3 E3 E3
231+  C858 E3 E3 E3 20
231+  C85C F6 F6 F6 F6
232+  C860 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $F6, $F6;
232+  C864 E3 E3 E3 E3
232+  C868 E3 E3 E3 E3
232+  C86C 20 20 F6 F6
233+  C870 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20, $10, $10, $10;
233+  C874 E3 E3 E3 E3
233+  C878 E3 E3 20 20
233+  C87C 20 10 10 10
234+  C880 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $AD, $AD, $10, $10;
234+  C884 E3 E3 E3 E3
234+  C888 E3 20 AD AD
234+  C88C AD AD 10 10
235+  C890 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $AD, $AD, $AD, $10;
235+  C894 E3 E3 E3 E3
235+  C898 E3 20 AD AD
235+  C89C AD AD AD 10
236+  C8A0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $AC, $AC, $20;
236+  C8A4 E3 E3 E3 E3
236+  C8A8 E3 20 AD F6
236+  C8AC F6 AC AC 20
237+  C8B0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $20, $20, $E3;
237+  C8B4 E3 E3 E3 E3
237+  C8B8 E3 20 AD F6
237+  C8BC F6 20 20 E3
238+  C8C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $20, $E3, $E3, $E3;
238+  C8C4 E3 E3 E3 E3
238+  C8C8 E3 20 AD F6
238+  C8CC 20 E3 E3 E3
239+  C8D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $E3, $E3, $E3, $E3;
239+  C8D4 E3 E3 E3 E3
239+  C8D8 E3 E3 20 20
239+  C8DC E3 E3 E3 E3
240+  C8E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
240+  C8E4 E3 E3 E3 E3
240+  C8E8 E3 E3 E3 E3
240+  C8EC E3 E3 E3 E3
241+  C8F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
241+  C8F4 E3 E3 E3 E3
241+  C8F8 E3 E3 E3 E3
241+  C8FC E3 E3 E3 E3
242+  C900              walk2_b: ;9
243+  C900 F6 AC AD AD  	db  $F6, $AC, $AD, $AD, $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
243+  C904 AD FC E3 E3
243+  C908 E3 E3 E3 E3
243+  C90C E3 E3 E3 E3
244+  C910 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
244+  C914 F6 E3 E3 E3
244+  C918 E3 E3 E3 E3
244+  C91C E3 E3 E3 E3
245+  C920 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
245+  C924 F6 F6 E3 E3
245+  C928 E3 E3 E3 E3
245+  C92C E3 E3 E3 E3
246+  C930 AD F6 F6 F6  	db  $AD, $F6, $F6, $F6, $F6, $F6, $AC, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
246+  C934 F6 F6 AC F6
246+  C938 E3 E3 E3 E3
246+  C93C E3 E3 E3 E3
247+  C940 F6 AD F6 F6  	db  $F6, $AD, $F6, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
247+  C944 F6 F6 AD F6
247+  C948 E3 E3 E3 E3
247+  C94C E3 E3 E3 E3
248+  C950 F6 F6 AC AD  	db  $F6, $F6, $AC, $AD, $AD, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
248+  C954 AD F6 AD F6
248+  C958 E3 E3 E3 E3
248+  C95C E3 E3 E3 E3
249+  C960 AD F6 F6 F6  	db  $AD, $F6, $F6, $F6, $F6, $10, $AC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
249+  C964 F6 10 AC E3
249+  C968 E3 E3 E3 E3
249+  C96C E3 E3 E3 E3
250+  C970 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $F6, $10, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
250+  C974 F6 F6 10 E3
250+  C978 E3 E3 E3 E3
250+  C97C E3 E3 E3 E3
251+  C980 10 AD AD F6  	db  $10, $AD, $AD, $F6, $F6, $F6, $F6, $E3, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3;
251+  C984 F6 F6 F6 E3
251+  C988 F6 F6 E3 E3
251+  C98C E3 E3 E3 E3
252+  C990 10 20 10 AD  	db  $10, $20, $10, $AD, $AD, $F6, $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3;
252+  C994 AD F6 F6 F6
252+  C998 F6 F6 F6 E3
252+  C99C E3 E3 E3 E3
253+  C9A0 10 20 20 20  	db  $10, $20, $20, $20, $AD, $AD, $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3;
253+  C9A4 AD AD F6 F6
253+  C9A8 F6 F6 F6 E3
253+  C9AC E3 E3 E3 E3
254+  C9B0 20 E3 E3 E3  	db  $20, $E3, $E3, $E3, $20, $AD, $AD, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3;
254+  C9B4 20 AD AD AD
254+  C9B8 F6 F6 E3 E3
254+  C9BC E3 E3 E3 E3
255+  C9C0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $AD, $20, $E3, $E3, $E3, $E3, $E3, $E3;
255+  C9C4 E3 20 AD AD
255+  C9C8 AD 20 E3 E3
255+  C9CC E3 E3 E3 E3
256+  C9D0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
256+  C9D4 E3 E3 20 20
256+  C9D8 20 E3 E3 E3
256+  C9DC E3 E3 E3 E3
257+  C9E0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
257+  C9E4 E3 E3 E3 E3
257+  C9E8 E3 E3 E3 E3
257+  C9EC E3 E3 E3 E3
258+  C9F0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
258+  C9F4 E3 E3 E3 E3
258+  C9F8 E3 E3 E3 E3
258+  C9FC E3 E3 E3 E3
259+  CA00
260+  CA00
261+  CA00
262+  CA00              walk3_a: ;10
263+  CA00 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6;
263+  CA04 E3 E3 E3 E3
263+  CA08 E3 E3 E3 20
263+  CA0C F6 F6 F6 F6
264+  CA10 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6;
264+  CA14 E3 E3 E3 E3
264+  CA18 E3 E3 20 F6
264+  CA1C F6 F6 F6 F6
265+  CA20 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $AC, $F6;
265+  CA24 E3 E3 E3 E3
265+  CA28 E3 20 F6 F6
265+  CA2C F6 F6 AC F6
266+  CA30 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $AD, $AC;
266+  CA34 E3 E3 E3 E3
266+  CA38 E3 20 F6 F6
266+  CA3C F6 F6 AD AC
267+  CA40 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6, $F6;
267+  CA44 E3 E3 E3 E3
267+  CA48 E3 20 F6 F6
267+  CA4C F6 F6 F6 F6
268+  CA50 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $F6, $F6;
268+  CA54 E3 E3 E3 E3
268+  CA58 E3 E3 20 F6
268+  CA5C F6 F6 F6 F6
269+  CA60 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20, $20, $F6, $F6, $F6;
269+  CA64 E3 E3 E3 E3
269+  CA68 E3 20 20 20
269+  CA6C 20 F6 F6 F6
270+  CA70 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $10, $14, $F6, $F6;
270+  CA74 E3 E3 E3 E3
270+  CA78 20 10 10 10
270+  CA7C 10 14 F6 F6
271+  CA80 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $10, $10, $14;
271+  CA84 E3 E3 E3 E3
271+  CA88 E3 20 10 10
271+  CA8C 10 10 10 14
272+  CA90 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $AD, $10, $10, $10;
272+  CA94 E3 E3 E3 E3
272+  CA98 E3 E3 20 10
272+  CA9C AD 10 10 10
273+  CAA0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6, $10, $10;
273+  CAA4 E3 E3 E3 E3
273+  CAA8 E3 E3 20 AD
273+  CAAC AD F6 10 10
274+  CAB0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6, $F6, $F6;
274+  CAB4 E3 E3 E3 E3
274+  CAB8 E3 E3 20 AD
274+  CABC AD F6 F6 F6
275+  CAC0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $20;
275+  CAC4 E3 E3 E3 E3
275+  CAC8 E3 E3 E3 20
275+  CACC AD F6 F6 20
276+  CAD0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20, $E3;
276+  CAD4 E3 E3 E3 E3
276+  CAD8 E3 E3 E3 E3
276+  CADC 20 20 20 E3
277+  CAE0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
277+  CAE4 E3 E3 E3 E3
277+  CAE8 E3 E3 E3 E3
277+  CAEC E3 E3 E3 E3
278+  CAF0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
278+  CAF4 E3 E3 E3 E3
278+  CAF8 E3 E3 E3 E3
278+  CAFC E3 E3 E3 E3
279+  CB00
280+  CB00
281+  CB00
282+  CB00              walk3_b: ;11
283+  CB00 AC AD AD AD  	db  $AC, $AD, $AD, $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
283+  CB04 FC E3 E3 E3
283+  CB08 E3 E3 E3 E3
283+  CB0C E3 E3 E3 E3
284+  CB10 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
284+  CB14 E3 E3 E3 E3
284+  CB18 E3 E3 E3 E3
284+  CB1C E3 E3 E3 E3
285+  CB20 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
285+  CB24 F6 E3 E3 E3
285+  CB28 E3 E3 E3 E3
285+  CB2C E3 E3 E3 E3
286+  CB30 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
286+  CB34 F6 E3 E3 E3
286+  CB38 E3 E3 E3 E3
286+  CB3C E3 E3 E3 E3
287+  CB40 AD F6 F6 F6  	db  $AD, $F6, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
287+  CB44 F6 AD F6 E3
287+  CB48 E3 E3 E3 E3
287+  CB4C E3 E3 E3 E3
288+  CB50 F6 AD F6 F6  	db  $F6, $AD, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
288+  CB54 F6 AD F6 E3
288+  CB58 E3 E3 E3 E3
288+  CB5C E3 E3 E3 E3
289+  CB60 F6 AD F6 F6  	db  $F6, $AD, $F6, $F6, $F6, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
289+  CB64 F6 AD F6 E3
289+  CB68 E3 E3 E3 E3
289+  CB6C E3 E3 E3 E3
290+  CB70 AD AD AD AD  	db  $AD, $AD, $AD, $AD, $14, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
290+  CB74 14 14 E3 E3
290+  CB78 E3 E3 E3 E3
290+  CB7C E3 E3 E3 E3
291+  CB80 14 14 14 14  	db  $14, $14, $14, $14, $14, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
291+  CB84 14 14 E3 E3
291+  CB88 E3 E3 E3 E3
291+  CB8C E3 E3 E3 E3
292+  CB90 10 14 14 F6  	db  $10, $14, $14, $F6, $F6, $14, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
292+  CB94 F6 14 E3 E3
292+  CB98 E3 E3 E3 E3
292+  CB9C E3 E3 E3 E3
293+  CBA0 10 10 AD F6  	db  $10, $10, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
293+  CBA4 F6 F6 E3 E3
293+  CBA8 E3 E3 E3 E3
293+  CBAC E3 E3 E3 E3
294+  CBB0 20 10 AD F6  	db  $20, $10, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
294+  CBB4 F6 F6 E3 E3
294+  CBB8 E3 E3 E3 E3
294+  CBBC E3 E3 E3 E3
295+  CBC0 E3 20 AD F6  	db  $E3, $20, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
295+  CBC4 F6 F6 E3 E3
295+  CBC8 E3 E3 E3 E3
295+  CBCC E3 E3 E3 E3
296+  CBD0 E3 20 AD AD  	db  $E3, $20, $AD, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
296+  CBD4 F6 F6 F6 E3
296+  CBD8 E3 E3 E3 E3
296+  CBDC E3 E3 E3 E3
297+  CBE0 E3 E3 20 AD  	db  $E3, $E3, $20, $AD, $AD, $AD, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
297+  CBE4 AD AD F6 E3
297+  CBE8 E3 E3 E3 E3
297+  CBEC E3 E3 E3 E3
298+  CBF0 E3 E3 E3 20  	db  $E3, $E3, $E3, $20, $20, $20, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
298+  CBF4 20 20 E3 E3
298+  CBF8 E3 E3 E3 E3
298+  CBFC E3 E3 E3 E3
299+  CC00
300+  CC00
301+  CC00
302+  CC00              walk4_a: ;12
303+  CC00 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $F6;
303+  CC04 E3 E3 E3 E3
303+  CC08 E3 E3 E3 E3
303+  CC0C E3 20 20 F6
304+  CC10 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6;
304+  CC14 E3 E3 E3 E3
304+  CC18 E3 E3 E3 E3
304+  CC1C E3 20 F6 F6
305+  CC20 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6;
305+  CC24 E3 E3 E3 E3
305+  CC28 E3 E3 E3 E3
305+  CC2C 20 F6 F6 F6
306+  CC30 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6;
306+  CC34 E3 E3 E3 E3
306+  CC38 E3 E3 E3 E3
306+  CC3C 20 F6 F6 F6
307+  CC40 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6;
307+  CC44 E3 E3 E3 E3
307+  CC48 E3 E3 E3 E3
307+  CC4C 20 F6 F6 F6
308+  CC50 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $10, $10, $F6, $F6;
308+  CC54 E3 E3 E3 E3
308+  CC58 E3 E3 20 20
308+  CC5C 10 10 F6 F6
309+  CC60 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $10, $10, $10;
309+  CC64 E3 E3 E3 E3
309+  CC68 E3 20 10 10
309+  CC6C 10 10 10 10
310+  CC70 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $10, $10, $10, $10;
310+  CC74 E3 E3 E3 E3
310+  CC78 E3 E3 20 10
310+  CC7C 10 10 10 10
311+  CC80 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $10, $20, $10, $10, $10, $14;
311+  CC84 E3 E3 E3 E3
311+  CC88 E3 20 10 20
311+  CC8C 10 10 10 14
312+  CC90 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $10, $10, $10, $10;
312+  CC94 E3 E3 E3 E3
312+  CC98 E3 E3 20 AD
312+  CC9C 10 10 10 10
313+  CCA0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $10, $10, $F6, $F6;
313+  CCA4 E3 E3 E3 E3
313+  CCA8 E3 20 AD AD
313+  CCAC 10 10 F6 F6
314+  CCB0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $F6, $F6, $F6, $E3;
314+  CCB4 E3 E3 E3 E3
314+  CCB8 E3 20 AD AD
314+  CCBC F6 F6 F6 E3
315+  CCC0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $F6, $F6, $F6, $E3, $E3;
315+  CCC4 E3 E3 E3 E3
315+  CCC8 E3 20 AD F6
315+  CCCC F6 F6 E3 E3
316+  CCD0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $F6, $F6, $F6, $E3, $E3;
316+  CCD4 E3 E3 E3 E3
316+  CCD8 E3 E3 20 F6
316+  CCDC F6 F6 E3 E3
317+  CCE0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $E3, $E3, $E3;
317+  CCE4 E3 E3 E3 E3
317+  CCE8 E3 E3 E3 20
317+  CCEC 20 E3 E3 E3
318+  CCF0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
318+  CCF4 E3 E3 E3 E3
318+  CCF8 E3 E3 E3 E3
318+  CCFC E3 E3 E3 E3
319+  CD00
320+  CD00
321+  CD00
322+  CD00              walk4_b: ;13
323+  CD00 F6 F6 AC AD  	db  $F6, $F6, $AC, $AD, $AD, $AD, $FC, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
323+  CD04 AD AD FC E3
323+  CD08 E3 E3 E3 E3
323+  CD0C E3 E3 E3 E3
324+  CD10 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
324+  CD14 F6 F6 E3 E3
324+  CD18 E3 E3 E3 E3
324+  CD1C E3 E3 E3 E3
325+  CD20 F6 AD F6 F6  	db  $F6, $AD, $F6, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
325+  CD24 F6 F6 F6 E3
325+  CD28 E3 E3 E3 E3
325+  CD2C E3 E3 E3 E3
326+  CD30 F6 AC AD F6  	db  $F6, $AC, $AD, $F6, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
326+  CD34 F6 F6 F6 E3
326+  CD38 E3 E3 E3 E3
326+  CD3C E3 E3 E3 E3
327+  CD40 F6 F6 F6 AD  	db  $F6, $F6, $F6, $AD, $F6, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
327+  CD44 F6 F6 F6 E3
327+  CD48 E3 E3 E3 E3
327+  CD4C E3 E3 E3 E3
328+  CD50 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $AD, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
328+  CD54 AD F6 F6 E3
328+  CD58 E3 E3 E3 E3
328+  CD5C E3 E3 E3 E3
329+  CD60 F6 F6 F6 F6  	db  $F6, $F6, $F6, $F6, $AD, $14, $14, $F6, $F6, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
329+  CD64 AD 14 14 F6
329+  CD68 F6 E3 E3 E3
329+  CD6C E3 E3 E3 E3
330+  CD70 10 F6 F6 14  	db  $10, $F6, $F6, $14, $14, $F6, $F6, $F6, $F6, $F6, $E3, $F6, $F6, $E3, $E3, $E3;
330+  CD74 14 F6 F6 F6
330+  CD78 F6 F6 E3 F6
330+  CD7C F6 E3 E3 E3
331+  CD80 14 14 14 14  	db  $14, $14, $14, $14, $14, $AD, $F6, $F6, $F6, $F6, $F6, $F6, $F6, $F6, $E3, $E3;
331+  CD84 14 AD F6 F6
331+  CD88 F6 F6 F6 F6
331+  CD8C F6 F6 E3 E3
332+  CD90 10 10 14 14  	db  $10, $10, $14, $14, $AD, $AD, $AD, $AD, $AD, $F6, $F6, $F6, $F6, $F6, $E3, $E3;
332+  CD94 AD AD AD AD
332+  CD98 AD F6 F6 F6
332+  CD9C F6 F6 E3 E3
333+  CDA0 20 14 20 20  	db  $20, $14, $20, $20, $20, $20, $20, $20, $AD, $AD, $F6, $F6, $F6, $20, $E3, $E3;
333+  CDA4 20 20 20 20
333+  CDA8 AD AD F6 F6
333+  CDAC F6 20 E3 E3
334+  CDB0 E3 20 E3 E3  	db  $E3, $20, $E3, $E3, $E3, $E3, $E3, $E3, $20, $AD, $AD, $AD, $20, $E3, $E3, $E3;
334+  CDB4 E3 E3 E3 E3
334+  CDB8 20 AD AD AD
334+  CDBC 20 E3 E3 E3
335+  CDC0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $20, $20, $20, $E3, $E3, $E3, $E3;
335+  CDC4 E3 E3 E3 E3
335+  CDC8 E3 20 20 20
335+  CDCC E3 E3 E3 E3
336+  CDD0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
336+  CDD4 E3 E3 E3 E3
336+  CDD8 E3 E3 E3 E3
336+  CDDC E3 E3 E3 E3
337+  CDE0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
337+  CDE4 E3 E3 E3 E3
337+  CDE8 E3 E3 E3 E3
337+  CDEC E3 E3 E3 E3
338+  CDF0 E3 E3 E3 E3  	db  $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3, $E3;
338+  CDF4 E3 E3 E3 E3
338+  CDF8 E3 E3 E3 E3
338+  CDFC E3 E3 E3 E3
339+  CE00
340+  CE00
341+  CE00
342+  CE00
343+  CE00
344+  CE00              ;;;;;;Fonts
345+  CE00
346+  CE00                  MMU 6,17
347+  CE00              	org 0xC000
348+  C000
349+  C000 00 00 00...  	ds 64,0
350+  C040              	incbin "fonts/font7.spr"
351+  D040
352+  D040
353+  D040              ;; Layer2
354+  D040
355+  D040              	MMU 7 n,40
356+  D040              	org $e000
357+  E000              	incbin "assets/skybigrotated.bmp", 1078
# file closed: src/loadbins.asm
 54   E000
 55   E000
 56   E000
 57   E000              	SAVENEX OPEN "main.nex", start , stack_top
 58   E000                  SAVENEX CORE 3, 0, 0
 59   E000                  SAVENEX CFG 0, 0
 60   E000              	SAVENEX AUTO
 61   E000                  SAVENEX CLOSE
 62   E000
 63   E000
 64   E000
# file closed: src/main.asm
